language: java
install: mvn install -DskipTests=true -Dmaven.javadoc.skip=true -Dgpg.skip -B -V
script:
- mvn test -B coveralls:report
before_install:
- openssl aes-256-cbc -K $encrypted_f9ced39a15db_key -iv $encrypted_f9ced39a15db_iv
  -in secrets.tar.enc -out secrets.tar -d
- tar -xvf secrets.tar
env:
  global:
  - secure: ajn1NWk3Lix0kYgqXkmt7SbyYQZmeDbjW+EWQ4d9ZoRR0xXLNG05HwBb7qFuXQK3MkCMsGRpzFHM/s+OCS2TOW6YFy8VYChCwQHIT9qMXommsQvXdWs+HvFdVW43OHzeOeuu0JlhEo6RS1JWri4bANIBxvtlITlMFYy3gM+lqfVmJGVHzmPrs0FPmm1+kYeEOagdI32uonMPyFp4YGHcMYEAJ7XoKuC+MgwEIbUBoL9l4Zgb/8QsNPWsiFjykOJBMVjvVTUT0riKnGTg38qFA0u85Yji5C6wTjExAROZqguiaLiIoDfrgDZN1kjP3JBxKUo0gaPuYvWCc+u6Xd0ZcJvZe9R5ih7qlH7x9sRi/s/EXTyPOm/RZPkMSXMu69Y2UKmPXHPk28MIN+qYp4Tt93PSXPJ+one2SPBQQcjuhjFXHXPRPonYSpcdNYJ7Yl3wrzghGAfhkV1GncVIms/LmCf1Tn8+6XNj/DbWB6Q1P6Dr6wlnyg6La3UJx6Y8daL02CUhevdSOtCJSiJPkP64fNIgKwIZ4lg94/VOONahWvSCZIBL5dSf/VS0fqmZh26T0DUmln7ENc8sun9qNlZeyTaDsHSMemR5i9Fmz5D6OOaC8/Hp2AghzYItiR9xI1Rnk9YIvh87dzwRCRnv/f1w1ub74W9xXBwkGcIefHCv+Q4=
  - secure: q78AUEOTCJjMTnuDMoQmKu+6RXFNI3JOwHD2/yjKFBVx6JU+KWrYbRRNz3j4zIQxej7PUiCGnWwJIiNF8MSDkkqOOegrjl95pdyPdgE27qiPPAPKJWAjEtk+qI/QuJwZejcnSLXdJbiQXRJF78xhcI3c3/zarin2U2DGqiDZ4jcE1bfqfQAXgVOVLxHJqBEZc99scpGZKy5gKYi5hjrAHjJBQ1tuMPeprui7BCtP1poxUA+fUFNHu2oOMyzw8RBx7MZJspw/EOgHKC4K+CuYPqLT5Cd577PXqwBln4DKrNh9GET5m5OQG8kY7lBYhiFsIHhrucN4V6uQ0NwHtR05fs5zk27hyhsJStWHynRSxLziTa4QpGL2H66Hy8lHOfpO505zYoIDVd7u7KbniFA7WFvuOTqbba6RIS4cg7o94MgkUU66MSzemFeiw/Vyx9G6LRDDQ3j7u7tvAIc9l+ObyFhfyCwMtq/quI7FfCtLb2qQA2py84jgdPwT90Ys6zfp9y6eH2PSwCFfDathYHSSWqxYHS+vJPbLbjuwJHbndAIyIvYjakTQ4c7sa2MszJzqSMbVxNEhJ4mjfMX9+Bb4971xsY9tmUY2rvdqSR/UPAiIKtP8RHKHel3teXpneKs6FTJKGbs55aHis4RteJaQrrkt3mg1sdvVd8pWJPkC3AE=
  - secure: EJdhjRzJQXCMPaMj9X2r+xHS0Qv+eidRQ2FYFWGOp0LbHf7sd/u1mlA9AuShezU1qvZuci0DWdof4otrOOxBMRvrjaUw1+z0F0pEXlpPE2DQMFOKlHIpvgBL0yy7pTpOHdg1a1QjSbHJ6Ep6gXNPYsjMc744LQ4RF2mneU7lesPbkMFY+5vAYO2EzzQN54xlMMkUuO5icRFUHPc05Rjo4oeMRMTGgkmzL+oiGbruuwwLNyyMy2O8JTmd1v2ED10tLIl+isTFiMpzCv4zvEvKKThs033X4O75Q+bcMmTDzI5gwOnkMdJF8ps+89q1qKVjesibltluGhEHjZyBXPmknby6r/w6DVZl5zAF3wPe77nHqvQfV9jC4Kg5+CGPQqsZBwXJthkeNi3D7gLPGW4Hw9lcFyl2j8DaHdeN935etoxvL+65S6VgFTaBNLB4hTpV+Hae6HnOTe0VoV9rgIaJsuVgHhw2+JvyejUepKf7CDsPPNelqyYSYoQaoSFzxl2OrVy1QM3iUjYiCGF9zcAa8OWem/jjaom+hyDZal8gDbMNftwh6D9r4yqgm0SbbSP0/q5aQQimH0c9T1XFbJFF/RBA2F4tjLFMhguuHz5+6UH56Qqn+x6hP3PmM3rRFPtwR4TclcZHfk/+EHD3oFCJXO6KOAuB1gVMtP7D+9u6Xb4=
  - secure: ssuQvM2V/6JBt1s2CcRat3Zbl/q9L2sAQvSkfyPVYlbCsldlbtNM5FKeW4OhvRfRQf6KANiMGHvvS6jR/x4U88r6nw8fK58nbizLldiqmpQ5V/QSlDFA9MrUXLaBeWuVf3lGfzaDmh5V+A7Iz0sO5xmeazrHOU7g65bzJSqPszCPwunJuBJXQeO7MHB8Fff6WX/EKMxv+p9AkA9WOq8YkPRh1jr6WuZKOJdrcLM5FX95M6MCPTWnvxuzPWoLpQLF0yX+5+rZyu/o4CiIhEVeU4yALJnikhSI56tTy4wmWPrVr1q7RszQdkROlR5jK3lxIpz/iQ+wMil1Cnn5z0hrcgQzgDCWa15894fUWgO2TPEHd3er2GYSu+xvnmol7QUQD4BuWARBwEGwTEJgrRZWvRTXIymxRQKNtt51wz+OalCnT/p/LHiIn4OazR0sDK8/4zAoy/O8LxGt0bCMbDjQQJIcqpRCylJbFvO/Z1JqY792ouPCXCDJQGqJND6oT5R/qcT6iqIT7wzt3DYyNc3LuEW2Mk16JGxL/IKJv3xl3prkSSdN3qV1wu7Kk99Qa4bVxpzi2j7rSItZPeNFqcY29cAB/lUyJIvf5BIqko8xEFFOXaS6KzdmtUcdiOFuFaCAUr72EhJKCfAmriInSbTzmIuPLQUoaQYh8hWtwIjzi9U=
  - secure: EaJAnjO9Zp3o62moyxQ9Z4Hm0xt7Y9n9xd3PW7Th3U5UtL+zvk7DFQ0BIbR7/LybjIJevWwQ1t9/ELFLc+xwoy3Rm1Jx1bPTP4YfA3FYCelHcH0RD4eGsPO32T80aS9LC7uQTx/Cyw293Wg/eKXeDxBxo17RRfqeoQ4m+fh22OH3DgSgGTx8bHSwU18qPLJxoUj2YLikyh2ZD/iWaUxsIVcZ8CFV3LNN3qhygdK7nfHXlC7V07PSbSFC6sWOSI0FrYjcSHj+pBcOxGGOJKF6eEi48fE20+2Jtas5SPswgpKMkMIuubXnDrishseV5/ZK3LZg+HB0JIQp1xEoO2wdj2FhVGxe694ymoFDc9McEWu8hnYbycV2dk/inX5n+NaNwsNzhbkfjSqHOzvWuBDmwtdAE6tb0fWyI0m1EsherZm0yC7uPSw/KSrxNxD6yZ9qmvrXMa2zyGbUYO9DVyUQVtrcCxFy0EXhBAuCJEMuuCIq4b+NcBwZ4IUUdnaS4rnWI6zigwfMxQq8zovUqSUvbkJsizV77pWriARYXjhpGS9ZWkd6R+NPVYh6OEOl0oempMs3DuZhCWhFLsK85IVjb4fjMHSSCggv7qGYKWNVacr3h775bA3dtCda27WZn4l2q+Eg1R5G9ohDzOOWv+DPfDek3kxo7Mj3zyhHqJdptL4=
deploy:
  - provider: script
    script: "/bin/sh prepare.sh"
    skip_cleanup: true
    on:
      branch: release
  - provider: script
    script: "/bin/sh release.sh"
    skip_cleanup: true
    on:
      tags: true
