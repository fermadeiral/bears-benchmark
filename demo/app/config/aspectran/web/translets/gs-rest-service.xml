<!DOCTYPE aspectran PUBLIC "-//ASPECTRAN//DTD Aspectran Configuration 5.0//EN"
                           "http://aspectran.github.io/dtd/aspectran-5.dtd">

<aspectran>

    <description>
        A collection of Translets for the Restful Web Service example.
    </description>

    <settings>
        <setting name="transletNamePattern" value="/examples/gs-rest-service/*"/>
    </settings>

    <bean class="com.aspectran.demo.customer.CustomerDao"/>

    <bean class="com.aspectran.demo.customer.CustomerAction"/>

    <translet name="/">
        <dispatch name="templates/default">
            <echo id="page">
                <attributes>
                    <item name="headline">Building a RESTful Web Service</item>
                    <item name="teaser">A sample page that uses RESTful web services using HTTP support methods such as GET, PUT, POST, and DELETE.</item>
                    <item name="include">pages/gs-rest-service</item>
                </attributes>
            </echo>
        </dispatch>
    </translet>

    <translet name="customers" method="GET">
        <description>
            전체 고객 목록을 조회합니다.
        </description>
        <action id="customers" bean="class:com.aspectran.demo.customer.CustomerAction" method="getCustomerList"/>
        <transform type="transform/json" pretty="true"/>
    </translet>

    <translet name="customers/${id:guest}" method="GET">
        <description>
            id를 파라메터로 받아서 해당 id를 가진 고객의 상세정보를 조회합니다.
            고객번호를 지정하지 않으면 고객번호가 "guest"인 고객의 상세정보를 조회합니다.
        </description>
        <action id="customer" bean="class:com.aspectran.demo.customer.CustomerAction" method="getCustomer"/>
        <transform type="transform/json" pretty="true"/>
    </translet>

    <translet name="customers" method="POST">
        <description>
            고객정보를 등록합니다.
        </description>
        <action bean="class:com.aspectran.demo.customer.CustomerAction" method="insertCustomer"/>
        <transform type="transform/json" pretty="true"/>
    </translet>

    <translet name="customers/${id}" method="PUT">
        <description>
            고객정보를 수정합니다.
        </description>
        <action bean="class:com.aspectran.demo.customer.CustomerAction" method="updateCustomer"/>
        <transform type="transform/json" pretty="true"/>
    </translet>

    <translet name="customers/${id}/approve/${approved}" method="PUT">
        <description>
            id를 파라메터로 받아서 해당 id를 가진 고객에 대해 승인처리를 합니다.
            "${approved}"는 승인여부에 해당하는 값을 지정합니다. (true or false)
        </description>
        <action id="result" bean="class:com.aspectran.demo.customer.CustomerAction" method="approve"/>
        <transform type="transform/json" pretty="true"/>
    </translet>

    <translet name="customers/${id}/approve" method="GET">
        <description>
            id를 파라메터로 받아서 해당 id를 가진 고객에 대하여 승인여부를 조회합니다.
        </description>
        <action id="result" bean="class:com.aspectran.demo.customer.CustomerAction" method="isApproved"/>
        <transform type="transform/json" pretty="true"/>
    </translet>

    <translet name="customers/${id}" method="DELETE">
        <description>
            id를 파라메터로 받아서 해당 id를 가진 고객의 정보를 삭제합니다.
        </description>
        <action id="result" bean="class:com.aspectran.demo.customer.CustomerAction" method="deleteCustomer"/>
        <transform type="transform/json" pretty="true"/>
    </translet>

</aspectran>