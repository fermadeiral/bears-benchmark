[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-bom:pom:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-api:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-client:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-server:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-proxy:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-common:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-components:pom:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-test-api:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-testsupport:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-api-testsupport:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-origins-starter-app:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-support:pom:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-test-plugin-dependencies:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-test-plugin:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-e2e-testsupport:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-e2e-suite:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-backend-provider:jar:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-tests:pom:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ com.hotels.styx:styx-parent:0.9-SNAPSHOT, /root/workspace/mikkokar/styx/437148287/pom.xml, line 834, column 17
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for com.hotels.styx:styx-parent:pom:0.9-SNAPSHOT
[WARNING] 'build.pluginManagement.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.apache.maven.plugins:maven-javadoc-plugin @ line 834, column 17
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] Styx
[INFO] Styx - Bill of Materials
[INFO] Styx - Support
[INFO] Styx - Support - Non-Styx Test Support
[INFO] Styx - Components
[INFO] Styx - Components - Core Api
[INFO] Styx - Components - Common
[INFO] Styx - Components - Styx API Test Support
[INFO] Styx - Components - Client
[INFO] Styx - Components - Server
[INFO] Styx - Components - Proxy
[INFO] Styx - Support - Test API
[INFO] Styx - System Tests
[INFO] Styx - System Tests - Test Support
[INFO] Styx - Origins Starter Application
[INFO] Styx - System Tests - Test Plugin - Dependencies
[INFO] Styx - System Tests - Test Plugin
[INFO] Styx - System Tests - Backend Provider
[INFO] Styx - System Tests - End To End Tests
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-parent ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-parent ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-parent ---
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-parent ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-parent/0.9-SNAPSHOT/styx-parent-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - Bill of Materials 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-bom ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-bom ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-bom ---
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-bom ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/bom/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-bom/0.9-SNAPSHOT/styx-bom-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - Support 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-support ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-support ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-support ---
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-support ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/support/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-support/0.9-SNAPSHOT/styx-support-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - Support - Non-Styx Test Support 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-testsupport ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-testsupport ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-testsupport ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-testsupport ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-testsupport ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-testsupport ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/support/testsupport/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-testsupport ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-testsupport ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-testsupport ---
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-testsupport ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/support/testsupport/target/styx-testsupport-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-testsupport/0.9-SNAPSHOT/styx-testsupport-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/support/testsupport/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-testsupport/0.9-SNAPSHOT/styx-testsupport-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - Components 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-components ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-components ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-components ---
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-components ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-components/0.9-SNAPSHOT/styx-components-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - Components - Core Api 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-api ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-api ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-api ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-api ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-api ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 74 source files to /root/workspace/mikkokar/styx/437148287/components/api/target/classes
[INFO] /root/workspace/mikkokar/styx/437148287/components/api/src/main/java/com/hotels/styx/api/HttpHeaderNames.java: Some input files use or override a deprecated API.
[INFO] /root/workspace/mikkokar/styx/437148287/components/api/src/main/java/com/hotels/styx/api/HttpHeaderNames.java: Recompile with -Xlint:deprecation for details.
[INFO] /root/workspace/mikkokar/styx/437148287/components/api/src/main/java/com/hotels/styx/api/extension/service/spi/Registry.java: /root/workspace/mikkokar/styx/437148287/components/api/src/main/java/com/hotels/styx/api/extension/service/spi/Registry.java uses unchecked or unsafe operations.
[INFO] /root/workspace/mikkokar/styx/437148287/components/api/src/main/java/com/hotels/styx/api/extension/service/spi/Registry.java: Recompile with -Xlint:unchecked for details.
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-api ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-api ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-api ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-api ---
[INFO] Building jar: /root/workspace/mikkokar/styx/437148287/components/api/target/styx-api-0.9-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-jar-plugin:2.4:test-jar (default) @ styx-api ---
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-api ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/api/target/styx-api-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-api/0.9-SNAPSHOT/styx-api-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/api/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-api/0.9-SNAPSHOT/styx-api-0.9-SNAPSHOT.pom
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/api/target/styx-api-0.9-SNAPSHOT-tests.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-api/0.9-SNAPSHOT/styx-api-0.9-SNAPSHOT-tests.jar
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - Components - Common 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-common ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-common ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-common ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-common ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/components/common/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-common ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-common ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 5 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-common ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-common ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-common ---
[INFO] 
[INFO] --- maven-jar-plugin:2.4:test-jar (default) @ styx-common ---
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-common ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/common/target/styx-common-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-common/0.9-SNAPSHOT/styx-common-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/common/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-common/0.9-SNAPSHOT/styx-common-0.9-SNAPSHOT.pom
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/common/target/styx-common-0.9-SNAPSHOT-tests.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-common/0.9-SNAPSHOT/styx-common-0.9-SNAPSHOT-tests.jar
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - Components - Styx API Test Support 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-api-testsupport ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-api-testsupport ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-api-testsupport ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-api-testsupport ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/support/api-testsupport/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-api-testsupport ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-api-testsupport ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/support/api-testsupport/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-api-testsupport ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-api-testsupport ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-api-testsupport ---
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-api-testsupport ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/support/api-testsupport/target/styx-api-testsupport-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-api-testsupport/0.9-SNAPSHOT/styx-api-testsupport-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/support/api-testsupport/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-api-testsupport/0.9-SNAPSHOT/styx-api-testsupport-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - Components - Client 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-client ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-client ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-client ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-client ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/components/client/src/main/resources
[INFO] 
[INFO] --- scala-maven-plugin:3.2.1:add-source (scala-compile-first) @ styx-client ---
[INFO] Add Source directory: /root/workspace/mikkokar/styx/437148287/components/client/src/main/scala
[INFO] Add Test Source directory: /root/workspace/mikkokar/styx/437148287/components/client/src/test/scala
[INFO] 
[INFO] --- scala-maven-plugin:3.2.1:compile (scala-compile-first) @ styx-client ---
[WARNING]  Expected all dependencies to require Scala version: 2.11.4
[WARNING]  org.scalatest:scalatest_2.11:2.2.4 requires scala version: 2.11.2
[WARNING] Multiple versions of scala libraries detected!
[INFO] /root/workspace/mikkokar/styx/437148287/components/client/src/main/java:-1: info: compiling
[INFO] Compiling 75 source files to /root/workspace/mikkokar/styx/437148287/components/client/target/classes at 1539154384739
[INFO] prepare-compile in 0 s
[INFO] compile in 2 s
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-client ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 75 source files to /root/workspace/mikkokar/styx/437148287/components/client/target/classes
[INFO] /root/workspace/mikkokar/styx/437148287/components/client/src/main/java/com/hotels/styx/client/connectionpool/stubs/StubConnectionFactory.java: Some input files use or override a deprecated API.
[INFO] /root/workspace/mikkokar/styx/437148287/components/client/src/main/java/com/hotels/styx/client/connectionpool/stubs/StubConnectionFactory.java: Recompile with -Xlint:deprecation for details.
[INFO] /root/workspace/mikkokar/styx/437148287/components/client/src/main/java/com/hotels/styx/client/netty/connectionpool/NettyConnectionFactory.java: Some input files use unchecked or unsafe operations.
[INFO] /root/workspace/mikkokar/styx/437148287/components/client/src/main/java/com/hotels/styx/client/netty/connectionpool/NettyConnectionFactory.java: Recompile with -Xlint:unchecked for details.
[INFO] 
[INFO] --- build-helper-maven-plugin:1.9.1:add-test-source (add-scala-test-sources) @ styx-client ---
[INFO] Test Source directory: /root/workspace/mikkokar/styx/437148287/components/client/src/test/unit/java added.
[INFO] Test Source directory: /root/workspace/mikkokar/styx/437148287/components/client/src/test/integration/scala added.
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-client ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/components/client/src/test/unit/resources
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/components/client/src/test/integration/resources
[INFO] 
[INFO] --- scala-maven-plugin:3.2.1:testCompile (scala-test-compile) @ styx-client ---
[WARNING]  Expected all dependencies to require Scala version: 2.11.4
[WARNING]  org.scalatest:scalatest_2.11:2.2.4 requires scala version: 2.11.2
[WARNING] Multiple versions of scala libraries detected!
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-client ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-client ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-client ---
[INFO] Building jar: /root/workspace/mikkokar/styx/437148287/components/client/target/styx-client-0.9-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-jar-plugin:2.4:test-jar (default) @ styx-client ---
[INFO] 
[INFO] --- scalatest-maven-plugin:1.0:test (test) @ styx-client ---
[36mDiscovery starting.[0m
2018-10-10 08:53:11.634:INFO::Logging to STDERR via org.mortbay.log.StdErrLog
[36mDiscovery completed in 1 second, 612 milliseconds.[0m
[36mRun starting. Expected test count is: 12[0m
[32mRetryHandlingSpec:[0m
08:53:13.460 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.u.i.l.InternalLoggerFactory - Using SLF4J as the default logging framework
08:53:13.503 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent0 - -Dio.netty.noUnsafe: false
08:53:13.507 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent0 - Java version: 8
08:53:13.509 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent0 - sun.misc.Unsafe.theUnsafe: available
08:53:13.511 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent0 - sun.misc.Unsafe.copyMemory: available
08:53:13.512 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent0 - java.nio.Buffer.address: available
08:53:13.513 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent0 - direct buffer constructor: available
08:53:13.515 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent0 - java.nio.Bits.unaligned: available, true
08:53:13.515 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent0 - jdk.internal.misc.Unsafe.allocateUninitializedArray(int): unavailable prior to Java9
08:53:13.515 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent0 - java.nio.DirectByteBuffer.<init>(long, int): available
08:53:13.516 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent - sun.misc.Unsafe: available
08:53:13.517 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent - -Dio.netty.tmpdir: /tmp (java.io.tmpdir)
08:53:13.517 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent - -Dio.netty.bitMode: 64 (sun.arch.data.model)
08:53:13.518 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent - -Dio.netty.noPreferDirect: false
08:53:13.519 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent - -Dio.netty.maxDirectMemory: 7499415552 bytes
08:53:13.519 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent - -Dio.netty.uninitializedArrayAllocationThreshold: -1
08:53:13.521 [ScalaTest-main-running-RetryHandlingSpec] DEBUG io.netty.util.internal.CleanerJava6 - java.nio.ByteBuffer.cleaner(): available
08:53:13.523 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.u.internal.NativeLibraryLoader - -Dio.netty.native.workdir: /tmp (io.netty.tmpdir)
08:53:13.535 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.u.internal.NativeLibraryLoader - Unable to load the library 'netty_transport_native_epoll', trying other loading mechanism.
java.lang.UnsatisfiedLinkError: no netty_transport_native_epoll in java.library.path
	at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1867) ~[na:1.8.0_121]
	at java.lang.Runtime.loadLibrary0(Runtime.java:870) ~[na:1.8.0_121]
	at java.lang.System.loadLibrary(System.java:1122) ~[na:1.8.0_121]
	at io.netty.util.internal.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:38) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at io.netty.util.internal.NativeLibraryLoader$1.run(NativeLibraryLoader.java:222) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.security.AccessController.doPrivileged(Native Method) ~[na:1.8.0_121]
	at io.netty.util.internal.NativeLibraryLoader.loadLibraryByHelper(NativeLibraryLoader.java:214) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.internal.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:202) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.internal.NativeLibraryLoader.load(NativeLibraryLoader.java:118) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.Native.loadNativeLibrary(Native.java:199) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.Native.<clinit>(Native.java:61) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.Epoll.<clinit>(Epoll.java:33) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.eventloop.PlatformAwareClientEventLoopGroupFactory.<init>(PlatformAwareClientEventLoopGroupFactory.java:43) [classes/:na]
	at com.hotels.styx.client.netty.connectionpool.NettyConnectionFactory.<init>(NettyConnectionFactory.java:62) [classes/:na]
	at com.hotels.styx.client.netty.connectionpool.NettyConnectionFactory.<init>(NettyConnectionFactory.java:51) [classes/:na]
	at com.hotels.styx.client.netty.connectionpool.NettyConnectionFactory$Builder.build(NettyConnectionFactory.java:182) [classes/:na]
	at com.hotels.styx.client.connectionpool.ConnectionPools.simplePoolFactory(ConnectionPools.java:82) [classes/:na]
	at com.hotels.styx.client.OriginsInventory.newOriginsInventoryBuilder(OriginsInventory.java:490) [classes/:na]
	at com.hotels.styx.client.RetryHandlingSpec.com$hotels$styx$client$RetryHandlingSpec$$activeOrigins(RetryHandlingSpec.scala:117) [test-classes/:na]
	at com.hotels.styx.client.RetryHandlingSpec$$anonfun$1.apply$mcV$sp(RetryHandlingSpec.scala:130) [test-classes/:na]
	at com.hotels.styx.client.RetryHandlingSpec$$anonfun$1.apply(RetryHandlingSpec.scala:123) [test-classes/:na]
	at com.hotels.styx.client.RetryHandlingSpec$$anonfun$1.apply(RetryHandlingSpec.scala:123) [test-classes/:na]
	at org.scalatest.Transformer$$anonfun$apply$1.apply$mcV$sp(Transformer.scala:22) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.OutcomeOf$class.outcomeOf(OutcomeOf.scala:85) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Transformer.apply(Transformer.scala:22) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Transformer.apply(Transformer.scala:20) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anon$1.apply(FunSuiteLike.scala:166) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.withFixture(Suite.scala:1122) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuite.withFixture(FunSuite.scala:1555) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$class.invokeWithFixture$1(FunSuiteLike.scala:163) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anonfun$runTest$1.apply(FunSuiteLike.scala:175) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anonfun$runTest$1.apply(FunSuiteLike.scala:175) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$class.runTest(FunSuiteLike.scala:175) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuite.runTest(FunSuite.scala:1555) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anonfun$runTests$1.apply(FunSuiteLike.scala:208) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anonfun$runTests$1.apply(FunSuiteLike.scala:208) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:413) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:401) [scalatest_2.11-2.2.4.jar:na]
	at scala.collection.immutable.List.foreach(List.scala:381) [scala-library-2.11.2.jar:na]
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.org$scalatest$SuperEngine$$runTestsInBranch(Engine.scala:396) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:483) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$class.runTests(FunSuiteLike.scala:208) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuite.runTests(FunSuite.scala:1555) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.run(Suite.scala:1424) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuite.org$scalatest$FunSuiteLike$$super$run(FunSuite.scala:1555) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anonfun$run$1.apply(FunSuiteLike.scala:212) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anonfun$run$1.apply(FunSuiteLike.scala:212) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.runImpl(Engine.scala:545) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$class.run(FunSuiteLike.scala:212) [scalatest_2.11-2.2.4.jar:na]
	at com.hotels.styx.client.RetryHandlingSpec.org$scalatest$BeforeAndAfterAll$$super$run(RetryHandlingSpec.scala:46) [test-classes/:na]
	at org.scalatest.BeforeAndAfterAll$class.liftedTree1$1(BeforeAndAfterAll.scala:257) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.BeforeAndAfterAll$class.run(BeforeAndAfterAll.scala:256) [scalatest_2.11-2.2.4.jar:na]
	at com.hotels.styx.client.RetryHandlingSpec.run(RetryHandlingSpec.scala:46) [test-classes/:na]
	at org.scalatest.Suite$class.callExecuteOnSuite$1(Suite.scala:1492) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$$anonfun$runNestedSuites$1.apply(Suite.scala:1528) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$$anonfun$runNestedSuites$1.apply(Suite.scala:1526) [scalatest_2.11-2.2.4.jar:na]
	at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:33) [scala-library-2.11.2.jar:na]
	at scala.collection.mutable.ArrayOps$ofRef.foreach(ArrayOps.scala:186) [scala-library-2.11.2.jar:na]
	at org.scalatest.Suite$class.runNestedSuites(Suite.scala:1526) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.DiscoverySuite.runNestedSuites(DiscoverySuite.scala:29) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.run(Suite.scala:1421) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.DiscoverySuite.run(DiscoverySuite.scala:29) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.SuiteRunner.run(SuiteRunner.scala:55) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$doRunRunRunDaDoRunRun$3.apply(Runner.scala:2563) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$doRunRunRunDaDoRunRun$3.apply(Runner.scala:2557) [scalatest_2.11-2.2.4.jar:na]
	at scala.collection.immutable.List.foreach(List.scala:381) [scala-library-2.11.2.jar:na]
	at org.scalatest.tools.Runner$.doRunRunRunDaDoRunRun(Runner.scala:2557) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$runOptionallyWithPassFailReporter$2.apply(Runner.scala:1044) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$runOptionallyWithPassFailReporter$2.apply(Runner.scala:1043) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$.withClassLoaderAndDispatchReporter(Runner.scala:2722) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$.runOptionallyWithPassFailReporter(Runner.scala:1043) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$.main(Runner.scala:860) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner.main(Runner.scala) [scalatest_2.11-2.2.4.jar:na]
08:53:13.539 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.u.internal.NativeLibraryLoader - netty_transport_native_epoll cannot be loaded from java.libary.path, now trying export to -Dio.netty.native.workdir: /tmp
java.lang.UnsatisfiedLinkError: no netty_transport_native_epoll in java.library.path
	at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1867) ~[na:1.8.0_121]
	at java.lang.Runtime.loadLibrary0(Runtime.java:870) ~[na:1.8.0_121]
	at java.lang.System.loadLibrary(System.java:1122) ~[na:1.8.0_121]
	at io.netty.util.internal.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:38) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.internal.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:209) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.internal.NativeLibraryLoader.load(NativeLibraryLoader.java:118) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.Native.loadNativeLibrary(Native.java:199) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.Native.<clinit>(Native.java:61) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.Epoll.<clinit>(Epoll.java:33) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.eventloop.PlatformAwareClientEventLoopGroupFactory.<init>(PlatformAwareClientEventLoopGroupFactory.java:43) [classes/:na]
	at com.hotels.styx.client.netty.connectionpool.NettyConnectionFactory.<init>(NettyConnectionFactory.java:62) [classes/:na]
	at com.hotels.styx.client.netty.connectionpool.NettyConnectionFactory.<init>(NettyConnectionFactory.java:51) [classes/:na]
	at com.hotels.styx.client.netty.connectionpool.NettyConnectionFactory$Builder.build(NettyConnectionFactory.java:182) [classes/:na]
	at com.hotels.styx.client.connectionpool.ConnectionPools.simplePoolFactory(ConnectionPools.java:82) [classes/:na]
	at com.hotels.styx.client.OriginsInventory.newOriginsInventoryBuilder(OriginsInventory.java:490) [classes/:na]
	at com.hotels.styx.client.RetryHandlingSpec.com$hotels$styx$client$RetryHandlingSpec$$activeOrigins(RetryHandlingSpec.scala:117) [test-classes/:na]
	at com.hotels.styx.client.RetryHandlingSpec$$anonfun$1.apply$mcV$sp(RetryHandlingSpec.scala:130) [test-classes/:na]
	at com.hotels.styx.client.RetryHandlingSpec$$anonfun$1.apply(RetryHandlingSpec.scala:123) [test-classes/:na]
	at com.hotels.styx.client.RetryHandlingSpec$$anonfun$1.apply(RetryHandlingSpec.scala:123) [test-classes/:na]
	at org.scalatest.Transformer$$anonfun$apply$1.apply$mcV$sp(Transformer.scala:22) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.OutcomeOf$class.outcomeOf(OutcomeOf.scala:85) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Transformer.apply(Transformer.scala:22) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Transformer.apply(Transformer.scala:20) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anon$1.apply(FunSuiteLike.scala:166) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.withFixture(Suite.scala:1122) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuite.withFixture(FunSuite.scala:1555) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$class.invokeWithFixture$1(FunSuiteLike.scala:163) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anonfun$runTest$1.apply(FunSuiteLike.scala:175) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anonfun$runTest$1.apply(FunSuiteLike.scala:175) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$class.runTest(FunSuiteLike.scala:175) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuite.runTest(FunSuite.scala:1555) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anonfun$runTests$1.apply(FunSuiteLike.scala:208) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anonfun$runTests$1.apply(FunSuiteLike.scala:208) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:413) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:401) [scalatest_2.11-2.2.4.jar:na]
	at scala.collection.immutable.List.foreach(List.scala:381) [scala-library-2.11.2.jar:na]
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.org$scalatest$SuperEngine$$runTestsInBranch(Engine.scala:396) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:483) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$class.runTests(FunSuiteLike.scala:208) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuite.runTests(FunSuite.scala:1555) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.run(Suite.scala:1424) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuite.org$scalatest$FunSuiteLike$$super$run(FunSuite.scala:1555) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anonfun$run$1.apply(FunSuiteLike.scala:212) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$$anonfun$run$1.apply(FunSuiteLike.scala:212) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.runImpl(Engine.scala:545) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSuiteLike$class.run(FunSuiteLike.scala:212) [scalatest_2.11-2.2.4.jar:na]
	at com.hotels.styx.client.RetryHandlingSpec.org$scalatest$BeforeAndAfterAll$$super$run(RetryHandlingSpec.scala:46) [test-classes/:na]
	at org.scalatest.BeforeAndAfterAll$class.liftedTree1$1(BeforeAndAfterAll.scala:257) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.BeforeAndAfterAll$class.run(BeforeAndAfterAll.scala:256) [scalatest_2.11-2.2.4.jar:na]
	at com.hotels.styx.client.RetryHandlingSpec.run(RetryHandlingSpec.scala:46) [test-classes/:na]
	at org.scalatest.Suite$class.callExecuteOnSuite$1(Suite.scala:1492) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$$anonfun$runNestedSuites$1.apply(Suite.scala:1528) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$$anonfun$runNestedSuites$1.apply(Suite.scala:1526) [scalatest_2.11-2.2.4.jar:na]
	at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:33) [scala-library-2.11.2.jar:na]
	at scala.collection.mutable.ArrayOps$ofRef.foreach(ArrayOps.scala:186) [scala-library-2.11.2.jar:na]
	at org.scalatest.Suite$class.runNestedSuites(Suite.scala:1526) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.DiscoverySuite.runNestedSuites(DiscoverySuite.scala:29) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.run(Suite.scala:1421) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.DiscoverySuite.run(DiscoverySuite.scala:29) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.SuiteRunner.run(SuiteRunner.scala:55) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$doRunRunRunDaDoRunRun$3.apply(Runner.scala:2563) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$doRunRunRunDaDoRunRun$3.apply(Runner.scala:2557) [scalatest_2.11-2.2.4.jar:na]
	at scala.collection.immutable.List.foreach(List.scala:381) [scala-library-2.11.2.jar:na]
	at org.scalatest.tools.Runner$.doRunRunRunDaDoRunRun(Runner.scala:2557) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$runOptionallyWithPassFailReporter$2.apply(Runner.scala:1044) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$runOptionallyWithPassFailReporter$2.apply(Runner.scala:1043) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$.withClassLoaderAndDispatchReporter(Runner.scala:2722) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$.runOptionallyWithPassFailReporter(Runner.scala:1043) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$.main(Runner.scala:860) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner.main(Runner.scala) [scalatest_2.11-2.2.4.jar:na]
08:53:13.566 [ScalaTest-main-running-RetryHandlingSpec] DEBUG io.netty.util.NetUtil - -Djava.net.preferIPv4Stack: false
08:53:13.566 [ScalaTest-main-running-RetryHandlingSpec] DEBUG io.netty.util.NetUtil - -Djava.net.preferIPv6Addresses: false
08:53:13.571 [ScalaTest-main-running-RetryHandlingSpec] DEBUG io.netty.util.NetUtil - Loopback interface: lo (lo, 0:0:0:0:0:0:0:1%lo)
08:53:13.575 [ScalaTest-main-running-RetryHandlingSpec] DEBUG io.netty.util.NetUtil - /proc/sys/net/core/somaxconn: 128
08:53:13.587 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:13.602 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.c.MultithreadEventLoopGroup - -Dio.netty.eventLoopThreads: 32
08:53:13.666 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.util.internal.PlatformDependent - org.jctools-core.MpscChunkedArrayQueue: available
08:53:13.817 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:UNHEALTHY_ORIGIN_ONE
08:53:13.818 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:HEALTHY_ORIGIN_TWO
08:53:13.818 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:UNHEALTHY_ORIGIN_THREE
08:53:13.819 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:UNHEALTHY_ORIGIN_TWO
08:53:14.051 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.buffer.PooledByteBufAllocator - -Dio.netty.allocator.numHeapArenas: 32
08:53:14.052 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.buffer.PooledByteBufAllocator - -Dio.netty.allocator.numDirectArenas: 32
08:53:14.052 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.buffer.PooledByteBufAllocator - -Dio.netty.allocator.pageSize: 8192
08:53:14.052 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.buffer.PooledByteBufAllocator - -Dio.netty.allocator.maxOrder: 11
08:53:14.052 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.buffer.PooledByteBufAllocator - -Dio.netty.allocator.chunkSize: 16777216
08:53:14.052 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.buffer.PooledByteBufAllocator - -Dio.netty.allocator.tinyCacheSize: 512
08:53:14.052 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.buffer.PooledByteBufAllocator - -Dio.netty.allocator.smallCacheSize: 256
08:53:14.052 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.buffer.PooledByteBufAllocator - -Dio.netty.allocator.normalCacheSize: 64
08:53:14.053 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.buffer.PooledByteBufAllocator - -Dio.netty.allocator.maxCachedBufferCapacity: 32768
08:53:14.053 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.buffer.PooledByteBufAllocator - -Dio.netty.allocator.cacheTrimInterval: 8192
08:53:14.053 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.buffer.PooledByteBufAllocator - -Dio.netty.allocator.useCacheForAllThreads: true
08:53:14.060 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.u.i.InternalThreadLocalMap - -Dio.netty.threadLocalMap.stringBuilder.initialSize: 1024
08:53:14.060 [ScalaTest-main-running-RetryHandlingSpec] DEBUG i.n.u.i.InternalThreadLocalMap - -Dio.netty.threadLocalMap.stringBuilder.maxSize: 4096
08:53:14.105 [ScalaTest-main-running-RetryHandlingSpec] DEBUG io.netty.channel.DefaultChannelId - -Dio.netty.processId: 5030 (auto-detected)
08:53:14.109 [ScalaTest-main-running-RetryHandlingSpec] DEBUG io.netty.channel.DefaultChannelId - -Dio.netty.machineId: 02:42:ac:ff:fe:11:47:ce (auto-detected)
08:53:14.137 [ScalaTest-main-running-RetryHandlingSpec] DEBUG io.netty.util.ResourceLeakDetector - -Dio.netty.leakDetection.level: simple
08:53:14.137 [ScalaTest-main-running-RetryHandlingSpec] DEBUG io.netty.util.ResourceLeakDetector - -Dio.netty.leakDetection.maxRecords: 4
08:53:14.157 [ScalaTest-main-running-RetryHandlingSpec] DEBUG io.netty.buffer.ByteBufUtil - -Dio.netty.allocator.type: pooled
08:53:14.157 [ScalaTest-main-running-RetryHandlingSpec] DEBUG io.netty.buffer.ByteBufUtil - -Dio.netty.threadLocalDirectBufferSize: 65536
08:53:14.157 [ScalaTest-main-running-RetryHandlingSpec] DEBUG io.netty.buffer.ByteBufUtil - -Dio.netty.maxThreadLocalCharBufferSize: 16384
08:53:14.196 [Styx-Client-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/version.txt, headers=[], id=f6f1012d-cd46-4188-8a34-5846d2683e18} exceptionClass=com.hotels.styx.api.exceptions.OriginUnreachableException exceptionMessage="Origin server is unreachable. Could not connect to origin=generic-app:UNHEALTHY_ORIGIN_ONE:localhost:36843"
08:53:14.299 [Styx-Client-Client-Worker-0-Thread] DEBUG io.netty.buffer.AbstractByteBuf - -Dio.netty.buffer.bytebuf.checkAccessible: true
08:53:14.302 [Styx-Client-Client-Worker-0-Thread] DEBUG i.n.util.ResourceLeakDetectorFactory - Loaded default ResourceLeakDetector: io.netty.util.ResourceLeakDetector@6d86db90
08:53:14.372 [Styx-Client-Client-Worker-0-Thread] DEBUG io.netty.util.Recycler - -Dio.netty.recycler.maxCapacityPerThread: 32768
08:53:14.373 [Styx-Client-Client-Worker-0-Thread] DEBUG io.netty.util.Recycler - -Dio.netty.recycler.maxSharedCapacityFactor: 2
08:53:14.373 [Styx-Client-Client-Worker-0-Thread] DEBUG io.netty.util.Recycler - -Dio.netty.recycler.linkCapacity: 16
08:53:14.373 [Styx-Client-Client-Worker-0-Thread] DEBUG io.netty.util.Recycler - -Dio.netty.recycler.ratio: 8
08:53:14.564 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:14.565 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:UNHEALTHY_ORIGIN_ONE
08:53:14.565 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:UNHEALTHY_ORIGIN_THREE
[32m- retries the next available origin on failure[0m
08:53:14.566 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:UNHEALTHY_ORIGIN_TWO
[32m- propagates the last observed exception if all retries failed[0m
08:53:14.568 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:14.569 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:UNHEALTHY_ORIGIN_ONE
08:53:14.569 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:HEALTHY_ORIGIN_TWO
08:53:14.570 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:UNHEALTHY_ORIGIN_THREE
08:53:14.570 [ScalaTest-main-running-RetryHandlingSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:UNHEALTHY_ORIGIN_TWO
08:53:14.573 [Styx-Client-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/version.txt, headers=[], id=daf665ff-88a7-4b75-862d-4f3253b9bec1} exceptionClass=com.hotels.styx.api.exceptions.OriginUnreachableException exceptionMessage="Origin server is unreachable. Could not connect to origin=generic-app:UNHEALTHY_ORIGIN_ONE:localhost:36843"
[32m- It should add sticky session id after a retry succeeded[0m
08:53:15.242 [ScalaTest-main-running-BackendServiceClientSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:15.243 [ScalaTest-main-running-BackendServiceClientSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:webapp-01
08:53:15.330 [ScalaTest-main-running-BackendServiceClientSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:15.331 [ScalaTest-main-running-BackendServiceClientSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:webapp-01
[32mBackendServiceClientSpec:[0m
[32m- Emits an HTTP response even when content observable remains un-subscribed.[0m
[32m- Emits an HTTP response containing Content-Length from persistent connection that stays open.[0m
[33m- Determines response content length from server closing the connection. !!! IGNORED !!![0m
08:53:15.375 [ScalaTest-main-running-BackendServiceClientSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:15.376 [ScalaTest-main-running-BackendServiceClientSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:webapp-01
08:53:16.409 [Styx-Client-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/foo/4, headers=[], id=73526736-3b5c-41f9-89fb-3d7e25a4c6d5} exceptionClass=com.hotels.styx.api.exceptions.ResponseTimeoutException exceptionMessage="No response from origin. origin=webapp:webapp-01:localhost:44651, reason=idleStateEvent, bytesReceived=0, chunksReceived=0, bytesEmitted=0, chunksEmitted=0"
responseTimeout: 1016
[32m- Emits onError when origin responds too slowly[0m
08:53:16.436 [216474600@qtp-1309335839-9] ERROR WireMock - /foo/4
java.lang.RuntimeException: java.lang.InterruptedException: sleep interrupted
	at com.github.tomakehurst.wiremock.http.StubResponseRenderer.addDelayIfSpecifiedGloballyOrIn(StubResponseRenderer.java:79) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.http.StubResponseRenderer.render(StubResponseRenderer.java:45) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.http.AbstractRequestHandler.handle(AbstractRequestHandler.java:40) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.jetty6.Jetty6HandlerDispatchingServlet.service(Jetty6HandlerDispatchingServlet.java:98) ~[wiremock-1.54.jar:na]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) ~[servlet-api-2.5-20081211.jar:na]
	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) ~[jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:401) ~[jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.Server.handle(Server.java:326) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228) [jetty-6.1.26.jar:6.1.26]
	at com.github.tomakehurst.wiremock.jetty6.DelayableSocketConnector$1.run(DelayableSocketConnector.java:49) [wiremock-1.54.jar:na]
	at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) [jetty-util-6.1.26.jar:6.1.26]
Caused by: java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method) ~[na:1.8.0_121]
	at com.github.tomakehurst.wiremock.http.StubResponseRenderer.addDelayIfSpecifiedGloballyOrIn(StubResponseRenderer.java:77) ~[wiremock-1.54.jar:na]
	... 18 common frames omitted
[32mStickySessionSpec:[0m
08:53:16.837 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:16.838 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app-02
08:53:16.839 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app-01
[32m- Responds with sticky session cookie when STICKY_SESSION_ENABLED=true[0m
08:53:17.125 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:17.127 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app-02
08:53:17.127 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app-01
[32m- Responds without sticky session cookie when sticky session is not enabled[0m
08:53:17.442 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:17.443 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app-02
08:53:17.444 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app-01
[32m- Routes to origins indicated by sticky session cookie.[0m
08:53:17.763 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:17.765 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app-02
08:53:17.765 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app-01
[32m- Routes to origins indicated by sticky session cookie when other cookies are provided.[0m
08:53:18.067 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:18.069 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app-02
08:53:18.069 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app-01
[32m- Routes to new origin when the origin indicated by sticky session cookie does not exist.[0m
08:53:18.367 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:18.369 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app-02
08:53:18.369 [ScalaTest-main-running-StickySessionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app-01
[32m- Routes to new origin when the origin indicated by sticky session cookie is no longer available.[0m
[36mRun completed in 8 seconds, 301 milliseconds.[0m
[36mTotal number of tests run: 12[0m
[36mSuites: completed 4, aborted 0[0m
[36mTests: succeeded 12, failed 0, canceled 0, ignored 1, pending 0[0m
[32mAll tests passed.[0m
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-client ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/client/target/styx-client-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-client/0.9-SNAPSHOT/styx-client-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/client/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-client/0.9-SNAPSHOT/styx-client-0.9-SNAPSHOT.pom
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/client/target/styx-client-0.9-SNAPSHOT-tests.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-client/0.9-SNAPSHOT/styx-client-0.9-SNAPSHOT-tests.jar
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - Components - Server 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-server ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-server ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- antlr4-maven-plugin:4.5.1-1:antlr4 (antlr4) @ styx-server ---
[INFO] ANTLR 4: Processing source directory /root/workspace/mikkokar/styx/437148287/components/server/src/main/antlr4
[INFO] Processing grammar: com/hotels/styx/server/routing/Condition.g4
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-server ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-server ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-server ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 72 source files to /root/workspace/mikkokar/styx/437148287/components/server/target/classes
[INFO] /root/workspace/mikkokar/styx/437148287/components/server/src/main/java/com/hotels/styx/server/HttpConnectorConfig.java: Some input files use or override a deprecated API.
[INFO] /root/workspace/mikkokar/styx/437148287/components/server/src/main/java/com/hotels/styx/server/HttpConnectorConfig.java: Recompile with -Xlint:deprecation for details.
[INFO] /root/workspace/mikkokar/styx/437148287/components/server/src/main/java/com/hotels/styx/server/netty/NettyServerConfig.java: /root/workspace/mikkokar/styx/437148287/components/server/src/main/java/com/hotels/styx/server/netty/NettyServerConfig.java uses unchecked or unsafe operations.
[INFO] /root/workspace/mikkokar/styx/437148287/components/server/src/main/java/com/hotels/styx/server/netty/NettyServerConfig.java: Recompile with -Xlint:unchecked for details.
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-server ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 5 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-server ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 26 source files to /root/workspace/mikkokar/styx/437148287/components/server/target/test-classes
[INFO] /root/workspace/mikkokar/styx/437148287/components/server/src/test/java/com/hotels/styx/server/netty/codec/NettyToStyxRequestDecoderTest.java: Some input files use or override a deprecated API.
[INFO] /root/workspace/mikkokar/styx/437148287/components/server/src/test/java/com/hotels/styx/server/netty/codec/NettyToStyxRequestDecoderTest.java: Recompile with -Xlint:deprecation for details.
[INFO] /root/workspace/mikkokar/styx/437148287/components/server/src/test/java/com/hotels/styx/server/netty/connectors/EmbeddedChannelSupportTest.java: /root/workspace/mikkokar/styx/437148287/components/server/src/test/java/com/hotels/styx/server/netty/connectors/EmbeddedChannelSupportTest.java uses unchecked or unsafe operations.
[INFO] /root/workspace/mikkokar/styx/437148287/components/server/src/test/java/com/hotels/styx/server/netty/connectors/EmbeddedChannelSupportTest.java: Recompile with -Xlint:unchecked for details.
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-server ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-server ---
[INFO] Building jar: /root/workspace/mikkokar/styx/437148287/components/server/target/styx-server-0.9-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-server ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/server/target/styx-server-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-server/0.9-SNAPSHOT/styx-server-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/server/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-server/0.9-SNAPSHOT/styx-server-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - Components - Proxy 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-proxy ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-proxy ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-proxy ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-proxy ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 17 resources
[INFO] 
[INFO] --- scala-maven-plugin:3.2.1:add-source (scala-compile-first) @ styx-proxy ---
[INFO] Add Source directory: /root/workspace/mikkokar/styx/437148287/components/proxy/src/main/scala
[INFO] Add Test Source directory: /root/workspace/mikkokar/styx/437148287/components/proxy/src/test/scala
[INFO] 
[INFO] --- scala-maven-plugin:3.2.1:compile (scala-compile-first) @ styx-proxy ---
[WARNING]  Expected all dependencies to require Scala version: 2.11.4
[WARNING]  org.scalatest:scalatest_2.11:2.2.4 requires scala version: 2.11.2
[WARNING] Multiple versions of scala libraries detected!
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-proxy ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- build-helper-maven-plugin:1.9.1:add-test-source (add-scala-test-sources) @ styx-proxy ---
[INFO] Test Source directory: /root/workspace/mikkokar/styx/437148287/components/proxy/src/test/unit/java added.
[INFO] Test Source directory: /root/workspace/mikkokar/styx/437148287/components/proxy/src/test/integration/scala added.
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-proxy ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 27 resources
[INFO] 
[INFO] --- scala-maven-plugin:3.2.1:testCompile (scala-test-compile) @ styx-proxy ---
[WARNING]  Expected all dependencies to require Scala version: 2.11.4
[WARNING]  org.scalatest:scalatest_2.11:2.2.4 requires scala version: 2.11.2
[WARNING] Multiple versions of scala libraries detected!
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-proxy ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-proxy ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-proxy ---
[INFO] Building jar: /root/workspace/mikkokar/styx/437148287/components/proxy/target/styx-proxy-0.9-SNAPSHOT.jar
[INFO] 
[INFO] --- scalatest-maven-plugin:1.0:test (test) @ styx-proxy ---
[36mDiscovery starting.[0m
08:53:25.421 [ScalaTest-main] DEBUG i.n.u.i.l.InternalLoggerFactory - Using SLF4J as the default logging framework
08:53:25.427 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent0 - -Dio.netty.noUnsafe: false
08:53:25.429 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent0 - Java version: 8
08:53:25.431 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent0 - sun.misc.Unsafe.theUnsafe: available
08:53:25.431 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent0 - sun.misc.Unsafe.copyMemory: available
08:53:25.432 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent0 - java.nio.Buffer.address: available
08:53:25.433 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent0 - direct buffer constructor: available
08:53:25.433 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent0 - java.nio.Bits.unaligned: available, true
08:53:25.434 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent0 - jdk.internal.misc.Unsafe.allocateUninitializedArray(int): unavailable prior to Java9
08:53:25.434 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent0 - java.nio.DirectByteBuffer.<init>(long, int): available
08:53:25.434 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent - sun.misc.Unsafe: available
08:53:25.434 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent - -Dio.netty.tmpdir: /tmp (java.io.tmpdir)
08:53:25.434 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent - -Dio.netty.bitMode: 64 (sun.arch.data.model)
08:53:25.435 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent - -Dio.netty.noPreferDirect: false
08:53:25.436 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent - -Dio.netty.maxDirectMemory: 7499415552 bytes
08:53:25.436 [ScalaTest-main] DEBUG i.n.util.internal.PlatformDependent - -Dio.netty.uninitializedArrayAllocationThreshold: -1
08:53:25.437 [ScalaTest-main] DEBUG io.netty.util.internal.CleanerJava6 - java.nio.ByteBuffer.cleaner(): available
08:53:25.622 [ScalaTest-main] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
    name: main-router
    type: ConditionRouter
    config:
      routes:
        - condition: protocol() == "https"
          destination:
            name: proxy-and-log-to-https
            type: StaticResponseHandler
            config:
              status: 200
              content: "secure"
      fallback:
        name: proxy-to-http
        type: StaticResponseHandler
        config:
          status: 301
          content: "insecure"
"
08:53:25.890 [ScalaTest-main] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
    name: main-router
    type: ConditionRouter
    config:
      routes:
        - condition: protocol() == "https"
          destination: secureHandler
      fallback: fallbackHandler
"
08:53:25.932 [ScalaTest-main] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
    name: proxy-and-log-to-https
    type: StaticResponseHandler
    config:
        status: 201
        content: "secure"

"
08:53:26.018 [ScalaTest-main] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
    name: ProxyToBackend
    type: ProxyToBackend
    config:
      backend:
        id: "ba"
        connectionPool:
          maxConnectionsPerHost: 45
          maxPendingConnectionsPerHost: 15
        responseTimeoutMillis: 60000
        origins:
        - { id: "ba1", host: "localhost:9094" }

"
[36mDiscovery completed in 1 second, 837 milliseconds.[0m
[36mRun starting. Expected test count is: 52[0m
[32mRoutingConfigParserSpec:[0m
08:53:26.124 [ScalaTest-main-running-RoutingConfigParserSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config: aString
      "
08:53:26.147 [ScalaTest-main-running-RoutingConfigParserSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
  name: main-router
  type: ConditionRouter
  config:
    routes:
        - condition: isSecure() == true
          destination:
            name: proxy-and-log-to-https
            type: InterceptorPipeline
            config:
              pipeline:
              - log
              - type: Rewrite
                config:
                - urlPattern: "/hwa/(.*)/foobar/(.*)"
                  replacement: "/$1/barfoo/$2"
              - type: BackendServiceProxy
                config:
                  originsFile: /path/to/https-origins.yml
    fallback:
        name: proxy-to-http
        type: BackendServiceProxy
        config:
          originsFile: /path/to/http-origins.yml

        "
[32m- Parses strings as RoutingConfigReferences[0m
[32m- Parses routing object definitions[0m
08:53:26.156 [ScalaTest-main-running-RoutingConfigParserSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
  type: ConditionRouter
  config:
    routes: omitted

        "
[32m- Routing object name is optional[0m
08:53:26.160 [ScalaTest-main-running-RoutingConfigParserSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
  name: foo
  config:
    routes: omitted

        "
[32m- Routing object type is mandatory[0m
[32mRouteHandlerFactorySpec:[0m
[32m- Builds a new handler as per RouteHandlerDefinition[0m
[32m- Doesn't accept unregistered types[0m
[32m- Returns handler from a configuration reference[0m
[32m- Throws exception when it refers a non-existent object[0m
08:53:26.300 [ScalaTest-main-running-RewriteInterceptorSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
    name: rewrite
    type: Rewrite
    config:
        - urlPattern:  /prefix/(.*)
          replacement: /app/$1
        - urlPattern:  /(.*)
          replacement: /app/$1

"
[32mRewriteInterceptorSpec:[0m
[32m- performs replacement[0m
08:53:26.372 [ScalaTest-main-running-RewriteInterceptorSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
    name: rewrite
    type: Rewrite
    config:

"
[32m- Empty config block does nothing[0m
[32mConditionRouterConfigSpec:[0m
[32m- Builds an instance with fallback handler[0m
[32m- Builds condition router instance routes[0m
[32m- Fallback handler can be specified as a handler reference[0m
[32m- Route destination can be specified as a handler reference[0m
08:53:26.576 [ScalaTest-main-running-ConditionRouterConfigSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
    name: main-router
    type: ConditionRouter
    config:
      fallback:
        name: proxy-to-http
        type: StaticResponseHandler
        config:
          status: 301
          content: "insecure"
"
[32m- Throws exception when routes attribute is missing[0m
08:53:26.597 [ScalaTest-main-running-ConditionRouterConfigSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
    name: main-router
    type: ConditionRouter
    config:
      routes:
        - condition: protocol() == "https"
          destination:
            name: proxy-and-log-to-https
            type: StaticResponseHandler
            config:
              status: 200
              content: "secure"
"
[32m- Responds with 502 Bad Gateway when fallback attribute is not specified.[0m
08:53:26.608 [ScalaTest-main-running-ConditionRouterConfigSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
    name: main-router
    type: ConditionRouter
    config:
      routes:
        - condition: )() == "https"
          destination:
            name: proxy-and-log-to-https
            type: StaticResponseHandler
            config:
              status: 200
              content: "secure"
"
line 1:0 no viable alternative at input ')'
[32m- Indicates the condition when fails to compile an DSL expression due to Syntax Error[0m
08:53:26.619 [ScalaTest-main-running-ConditionRouterConfigSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
    name: main-router
    type: ConditionRouter
    config:
      routes:
        - condition: nonexistant() == "https"
          destination:
            name: proxy-and-log-to-https
            type: StaticResponseHandler
            config:
              status: 200
              content: "secure"
"
08:53:26.628 [ScalaTest-main-running-ConditionRouterConfigSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
    name: main-router
    type: ConditionRouter
    config:
      routes:
        - condition: protocol() == "https"
          destination:
            name: proxy-and-log-to-https
            type: StaticResponseHandler
            config:
              status: 200
              content: "secure"
        - condition: path() == "bar"
          destination:
            name: proxy-and-log-to-https
            type: StaticResponseHandler
            config:
              status: 200
              content: "secure"
      fallback:
        name: proxy-and-log-to-https
        type: StaticResponseHandler
        config:
          status: 200
          content: "secure"
"
[32m- Indicates the condition when fails to compile an DSL expression due to unrecognised DSL function name[0m
[32m- Passes parentage attribute path to the builtins factory[0m
08:53:26.661 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}
        "
08:53:26.667 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
[32mServerConfigSchemaSpec:[0m
[32mStyx Server Configuration[0m
08:53:26.719 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.721 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.721 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.721 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.721 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.722 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.722 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.731 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.732 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.732 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.732 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.732 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.732 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.733 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.736 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
[32m- Validates a minimal server configuration[0m
08:53:26.738 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}
        "
08:53:26.742 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.742 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
[32m- Detects a missing mandatory 'proxy' configuration.[0m
08:53:26.745 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}
        "
08:53:26.747 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.747 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.747 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.747 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.748 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.748 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.748 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.748 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.751 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080

admin:
  connectors:
    http:
      port: 9000

        "
08:53:26.752 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.753 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.753 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.753 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.753 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.753 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.753 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.754 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.754 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.754 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.754 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.754 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.754 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
[32m- Detects a missing mandatory `admin' configuration.[0m
[32m- Detects a missing mandatory 'services` configuration.[0m
08:53:26.757 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
jvmRouteName: 'instance-01'
          "
08:53:26.760 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.760 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.761 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.761 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.761 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.761 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.762 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.762 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.763 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.763 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.763 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.764 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.764 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.764 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.764 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.764 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.765 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.766 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
08:53:26.767 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
jvmRouteName: 101
          "
08:53:26.772 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.773 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.773 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.774 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.774 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.774 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.774 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.774 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.792 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.793 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.794 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.794 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.794 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.794 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.795 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.795 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.795 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.796 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
[32m- Accepts 'jvmRouteName' field as a STRING[0m
08:53:26.799 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
request-logging:
  inbound:
    enabled: true
    longFormat: true
  outbound:
    enabled: true
    longFormat: false
          "
08:53:26.807 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.807 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.808 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.810 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.811 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.811 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.811 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.811 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.811 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.811 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.812 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.812 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.812 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.812 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.813 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.813 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.813 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.814 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
08:53:26.814 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='request-logging', subObjectSchema='RequestLoggingConfig'
08:53:26.814 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('request-logging.', schema='RequestLoggingConfig')
08:53:26.814 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='inbound', subObjectSchema='LogFormatConfig'
08:53:26.814 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('request-logging.inbound.', schema='LogFormatConfig')
08:53:26.815 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='outbound', subObjectSchema='LogFormatConfig'
08:53:26.815 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('request-logging.outbound.', schema='LogFormatConfig')
[32m- Accepts 'request-logging' field as an OBJECT[0m
08:53:26.817 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
retrypolicy:
  x: false
          "
08:53:26.821 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.821 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.822 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.822 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.822 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.822 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.822 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.822 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.822 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.823 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.823 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.823 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.823 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.826 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.826 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.826 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.827 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.827 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
08:53:26.827 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('retrypolicy.', schema='')
[32m- Accepts 'retrypolicy' field - but does not validate[0m
08:53:26.831 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
loadBalancing:
  x: false
          "
08:53:26.833 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.834 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.834 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.834 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.834 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.834 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.834 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.834 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.835 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.835 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.835 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.835 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.835 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.836 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.836 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.836 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.836 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.837 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
08:53:26.837 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('loadBalancing.', schema='')
[32m- Accepts 'loadBalancing' field - but does not validate[0m
08:53:26.839 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
url:
  encoding:
    unwiseCharactersToEncode: '43'
          "
08:53:26.841 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.841 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.842 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.842 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.842 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.842 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.842 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.842 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.842 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.843 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.843 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.843 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.843 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.843 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.844 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.844 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.844 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.844 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
08:53:26.845 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='url', subObjectSchema='UrlEncodingConfig'
08:53:26.845 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('url.', schema='UrlEncodingConfig')
08:53:26.845 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('url.encoding.', schema='unwiseCharactersToEncode')
[32m- Accepts 'url' field - as an OBJECT[0m
08:53:26.846 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
originRestrictionCookie: mycookie
          "
08:53:26.849 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.849 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.850 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.850 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.850 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.850 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.850 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.850 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.850 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.851 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.851 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.851 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.851 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.851 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.851 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.852 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.852 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.852 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
[32m- Accepts 'originRestrictionCookie' field - as a STRING[0m
08:53:26.854 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
styxHeaders:
  styxInfo:
    name: "X-Styx-Info"
    format: "xyz"
  originId:
    name: "X-Origin-Id"
  requestId:
    name: "X-Request-Id"
          "
08:53:26.857 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.857 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.857 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.857 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.857 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.858 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.858 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.858 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.858 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.858 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.859 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.859 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.859 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.859 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.859 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.859 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.859 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.860 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
08:53:26.860 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='styxHeaders', subObjectSchema='StyxHeadersConfig'
08:53:26.860 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('styxHeaders.', schema='StyxHeadersConfig')
08:53:26.860 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('styxHeaders.styxInfo.', schema='name, format')
08:53:26.860 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('styxHeaders.originId.', schema='name')
08:53:26.861 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('styxHeaders.requestId.', schema='name')
[32m- Accepts 'styxHeaders' field as an OBJECT[0m
[32mStyxHeaders Object[0m
08:53:26.866 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
styxHeaders:
  originId:
    name: "X-Origin-Id"
    format: "x"
          "
08:53:26.868 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.868 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.868 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.868 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.869 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.869 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.869 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.869 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.869 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.869 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.869 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.870 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.870 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.870 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.870 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.870 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.870 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.871 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
08:53:26.871 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='styxHeaders', subObjectSchema='StyxHeadersConfig'
08:53:26.871 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('styxHeaders.', schema='StyxHeadersConfig')
08:53:26.871 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('styxHeaders.originId.', schema='name')
08:53:26.872 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
styxHeaders:
  requestId:
    name: "X-Request-Id"
    format: "x"
          "
08:53:26.874 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.874 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.874 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.874 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.875 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.875 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.875 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.875 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.875 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.875 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.875 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.876 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.876 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.876 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.876 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.876 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.876 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.877 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
08:53:26.877 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='styxHeaders', subObjectSchema='StyxHeadersConfig'
08:53:26.877 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('styxHeaders.', schema='StyxHeadersConfig')
08:53:26.877 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('styxHeaders.requestId.', schema='name')
[32m- Aaccepts 'format' field for 'styxInfo' only[0m
08:53:26.879 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
styxHeaders:
  styxInfo:
    name: "X-Styx-Info"
          "
08:53:26.881 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.881 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.881 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.881 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.881 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.882 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.882 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.882 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.882 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.882 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.885 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.885 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.886 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.886 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.886 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.886 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.886 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.887 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
08:53:26.888 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='styxHeaders', subObjectSchema='StyxHeadersConfig'
08:53:26.888 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('styxHeaders.', schema='StyxHeadersConfig')
08:53:26.888 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('styxHeaders.styxInfo.', schema='name, format')
[32m- Accepts a missing optional 'format' in 'styxInfo' configuration[0m
08:53:26.890 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
userDefined:
  websiteName: hyper-super.com
  threadCount: 7
  pluginVersion: 3.5.1-134
          "
08:53:26.892 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.893 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.893 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.893 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.893 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.893 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.893 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.894 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.894 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.894 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.894 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.894 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.894 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.895 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.895 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.895 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.895 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.896 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
08:53:26.896 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('userDefined.', schema='')
[32m- Provides 'userDefined' as an opaque configuration block for custom attributes.[0m
[32mProxy Configuration[0m
08:53:26.897 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}
        "
08:53:26.899 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.900 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.900 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.900 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.900 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.900 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.900 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.900 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.901 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.901 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.901 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.901 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.901 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.901 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.902 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.902 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.902 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.902 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
[32m- Simultaneously accepts both 'http' and 'https' connectors[0m
08:53:26.904 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443
      cipherSuites:
       - TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
       - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
       - TLS_RSA_WITH_AES_256_CBC_SHA256

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}
        "
08:53:26.907 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.908 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.908 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.908 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.908 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.908 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.909 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.909 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.909 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.909 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.911 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.911 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.911 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.911 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.912 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.912 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.912 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.913 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
[32m- Accepts https.cipherSuites as a list of STRINGs[0m
08:53:26.914 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443
      protocols:
       - TLSv1.2

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}
        "
08:53:26.917 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.917 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.917 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.917 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.917 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.917 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.918 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.918 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.918 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.918 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.918 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.919 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.919 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.919 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.919 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.919 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.920 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.920 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
[32m- Accepts https.protocols as a list of STRINGs[0m
[32mPlugins configuration[0m
08:53:26.922 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
plugins:
  active: xyz
"
08:53:26.924 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.924 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.924 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.924 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.924 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.924 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.924 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.924 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.925 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.925 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.925 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.925 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.925 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.925 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.925 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.926 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.926 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.926 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
08:53:26.926 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('plugins.', schema='active, all')
[32m- Accepts plugins.active as string[0m
08:53:26.928 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
plugins:
  all: xyz
"
08:53:26.930 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.930 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.931 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.931 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.931 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.931 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.931 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.931 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.931 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.931 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.932 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.932 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.932 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.932 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.932 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.932 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.932 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.933 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
08:53:26.933 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('plugins.', schema='active, all')
[32m- Accepts an absent plugins.active field[0m
08:53:26.934 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
proxy:
  connectors:
    http:
      port: 8080
    https:
      port: 8443

admin:
  connectors:
    http:
      port: 9000

services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "${originsFile:classpath:conf/origins.yml}"}

    
plugins:
  all: xyz
"
08:53:26.937 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.i.c.yaml.PlaceholderResolver - At [services, factories, backendServiceRegistry, config, originsFile], replaced ${originsFile:classpath:conf/origins.yml} with classpath:conf/origins.yml
08:53:26.937 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('', schema='proxy, admin, services, url, request-logging, styxHeaders, include, retrypolicy, loadBalancing, plugins, jvmRouteName, originRestrictionCookie, responseInfoHeaderFormat, httpPipeline, logFormat, userDefined')
08:53:26.937 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='proxy', subObjectSchema='ProxyConnectorConfig'
08:53:26.937 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.', schema='ProxyConnectorConfig')
08:53:26.937 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.937 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.', schema='ServerConnectors')
08:53:26.938 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.938 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.http.', schema='HttpConnectorConfig')
08:53:26.938 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='https', subObjectSchema='HttpsConnectorConfig'
08:53:26.938 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('proxy.connectors.https.', schema='HttpsConnectorConfig')
08:53:26.938 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='admin', subObjectSchema='AdminConnectorConfig'
08:53:26.938 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.', schema='AdminConnectorConfig')
08:53:26.938 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='connectors', subObjectSchema='ServerConnectors'
08:53:26.938 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.', schema='ServerConnectors')
08:53:26.938 [ScalaTest-main-running-ServerConfigSchemaSpec] DEBUG c.h.s.c.validator.DocumentFormat - lazy object reference field='http', subObjectSchema='HttpConnectorConfig'
08:53:26.939 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('admin.connectors.http.', schema='HttpConnectorConfig')
08:53:26.939 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.', schema='factories')
08:53:26.939 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('services.factories.backendServiceRegistry.', schema='')
08:53:26.939 [ScalaTest-main-running-ServerConfigSchemaSpec] INFO  c.h.s.c.validator.DocumentFormat - validate object('plugins.', schema='active, all')
[32m- Accepts an plugins.all as an opaque object[0m
[32mFileBackedBackendServicesRegistrySpec:[0m
[32mA file backed backend services registry[0m
[32m  reading yaml content[0m
08:53:27.073 [pool-1-thread-1] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=shopping, path=/shop/, origins=[shopping:shopping-01:localhost:9094], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=50, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/version.txt], intervalMillis=5000, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}, BackendService{id=webapp, path=/, origins=[webapp:webapp-01:localhost:9090, webapp:webapp-02:localhost:9091], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=300, maxPendingConnectionsPerHost=50, connectTimeoutMillis=8000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/version.txt], intervalMillis=23456, timeoutMillis=2000, healthyThreshold=3, unhealthyThreshold=5}, stickySessionConfig=StickySessionConfig{enabled=true, timeoutSeconds=86400}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[]
08:53:27.085 [pool-1-thread-1] DEBUG c.h.s.i.FileBackedRegistry - Changes applied!
08:53:27.087 [pool-1-thread-1] INFO  c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reloaded. reason='Initial load', timestamp=NA, md5-hash=d6a6385907d6151e8879ef8d499451b5, File reloaded., file='/root/workspace/mikkokar/styx/437148287/components/proxy/target/test-classes/conf/origins/origins-for-jsontest.yml'
[32m  - should read backend services configured in the yaml file[0m
[32m  Reloading backend services[0m
08:53:27.206 [pool-2-thread-1] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=shopping, path=/shop/, origins=[shopping:shopping-01:localhost:9094], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=50, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[]
08:53:27.207 [pool-2-thread-1] DEBUG c.h.s.i.FileBackedRegistry - Changes applied!
08:53:27.207 [pool-2-thread-1] INFO  c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reloaded. reason='Initial load', timestamp=2018-10-10T06:53:27.18959Z, md5-hash=b358479584ca0b1471b7e2c512846280, File reloaded., file='/root/workspace/mikkokar/styx/437148287/components/proxy/target/test-classes/backends/generated/single.yaml'
08:53:27.248 [pool-3-thread-1] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=landing, path=/landing/, origins=[landing:landing-01:localhost:9091], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=50, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[]
08:53:27.249 [pool-3-thread-1] DEBUG c.h.s.i.FileBackedRegistry - Changes applied!
08:53:27.249 [pool-3-thread-1] INFO  c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reloaded. reason='Admin Interface', timestamp=2018-10-10T06:53:27.237591Z, md5-hash=350d6f48880e3248efece32065c1155f, File reloaded., file='/root/workspace/mikkokar/styx/437148287/components/proxy/target/test-classes/backends/generated/single.yaml'
[32m  - should reload the backend services when the registry is asked to do so[0m
08:53:27.271 [pool-4-thread-1] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=shopping, path=/shop/, origins=[shopping:shop-01:localhost:9094], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=50, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[]
08:53:27.271 [pool-4-thread-1] DEBUG c.h.s.i.FileBackedRegistry - Changes applied!
08:53:27.272 [pool-4-thread-1] INFO  c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reloaded. reason='Initial load', timestamp=2018-10-10T06:53:27.253592Z, md5-hash=b5dfb54a2ca72ff354eff45217c984f5, File reloaded., file='/root/workspace/mikkokar/styx/437148287/components/proxy/target/test-classes/backends/generated/single.yaml'
08:53:27.285 [pool-5-thread-1] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=landing, path=/landing/, origins=[landing:landing-01:localhost:9091], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=50, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[]
08:53:27.286 [pool-5-thread-1] DEBUG c.h.s.i.FileBackedRegistry - Changes applied!
08:53:27.286 [pool-5-thread-1] INFO  c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reloaded. reason='Admin Interface', timestamp=2018-10-10T06:53:27.277592Z, md5-hash=f613482ea4ea3a47531e8ae9268224a5, File reloaded., file='/root/workspace/mikkokar/styx/437148287/components/proxy/target/test-classes/backends/generated/single.yaml'
08:53:27.293 [pool-6-thread-1] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=landing, path=/landing/, origins=[landing:landing-01:localhost:9091], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=50, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[]
08:53:27.294 [pool-6-thread-1] DEBUG c.h.s.i.FileBackedRegistry - Changes applied!
08:53:27.294 [pool-6-thread-1] INFO  c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reloaded. reason='Admin Interface', timestamp=2018-10-10T06:53:27.285592Z, md5-hash=b5dfb54a2ca72ff354eff45217c984f5, File reloaded., file='/root/workspace/mikkokar/styx/437148287/components/proxy/target/test-classes/backends/generated/single.yaml'
[32m  - should reload multiple times if content changes[0m
08:53:27.311 [pool-7-thread-1] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=shopping, path=/shop/, origins=[shopping:shop-01:localhost:9094], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=50, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[Mock for ChangeListener, hashCode: 932462955]
08:53:27.313 [pool-7-thread-1] DEBUG c.h.s.i.FileBackedRegistry - Changes applied!
08:53:27.314 [pool-7-thread-1] INFO  c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reloaded. reason='Initial load', timestamp=2018-10-10T06:53:27.297593Z, md5-hash=b5dfb54a2ca72ff354eff45217c984f5, File reloaded., file='/root/workspace/mikkokar/styx/437148287/components/proxy/target/test-classes/backends/generated/single.yaml'
08:53:27.322 [pool-8-thread-1] INFO  c.h.s.i.FileBackedRegistry - Not reloading /root/workspace/mikkokar/styx/437148287/components/proxy/target/test-classes/backends/generated/single.yaml as content did not change
08:53:27.322 [pool-8-thread-1] INFO  c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reloaded. reason='Admin Interface', timestamp=2018-10-10T06:53:27.317593Z, md5-hash=b5dfb54a2ca72ff354eff45217c984f5, Identical file content., file='/root/workspace/mikkokar/styx/437148287/components/proxy/target/test-classes/backends/generated/single.yaml'
[32m  - should not reload the backend services if content remains the same[0m
[32mStaticResponseHandlerSpec:[0m
[32m- builds static response handler[0m
[32mHttpInterceptorPipelineSpec:[0m
08:53:27.383 [ScalaTest-main-running-ProxyToBackendSpec] DEBUG i.n.u.internal.NativeLibraryLoader - -Dio.netty.native.workdir: /tmp (io.netty.tmpdir)
[32mProxyToBackendSpec:[0m
08:53:27.397 [ScalaTest-main-running-ProxyToBackendSpec] DEBUG i.n.u.internal.NativeLibraryLoader - Unable to load the library 'netty_transport_native_epoll', trying other loading mechanism.
java.lang.UnsatisfiedLinkError: no netty_transport_native_epoll in java.library.path
	at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1867) ~[na:1.8.0_121]
	at java.lang.Runtime.loadLibrary0(Runtime.java:870) ~[na:1.8.0_121]
	at java.lang.System.loadLibrary(System.java:1122) ~[na:1.8.0_121]
	at io.netty.util.internal.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:38) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at io.netty.util.internal.NativeLibraryLoader$1.run(NativeLibraryLoader.java:222) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.security.AccessController.doPrivileged(Native Method) ~[na:1.8.0_121]
	at io.netty.util.internal.NativeLibraryLoader.loadLibraryByHelper(NativeLibraryLoader.java:214) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.internal.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:202) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.internal.NativeLibraryLoader.load(NativeLibraryLoader.java:118) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.Native.loadNativeLibrary(Native.java:199) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.Native.<clinit>(Native.java:61) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.Epoll.<clinit>(Epoll.java:33) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.eventloop.PlatformAwareClientEventLoopGroupFactory.<init>(PlatformAwareClientEventLoopGroupFactory.java:43) [styx-client-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.client.netty.connectionpool.NettyConnectionFactory.<init>(NettyConnectionFactory.java:62) [styx-client-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.client.netty.connectionpool.NettyConnectionFactory.<init>(NettyConnectionFactory.java:51) [styx-client-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.client.netty.connectionpool.NettyConnectionFactory$Builder.build(NettyConnectionFactory.java:182) [styx-client-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.ProxyToBackend$ConfigFactory.build(ProxyToBackend.java:110) [classes/:na]
	at com.hotels.styx.routing.handlers.ProxyToBackendSpec$$anonfun$1.apply$mcV$sp(ProxyToBackendSpec.scala:56) [test-classes/:na]
	at com.hotels.styx.routing.handlers.ProxyToBackendSpec$$anonfun$1.apply(ProxyToBackendSpec.scala:55) [test-classes/:na]
	at com.hotels.styx.routing.handlers.ProxyToBackendSpec$$anonfun$1.apply(ProxyToBackendSpec.scala:55) [test-classes/:na]
	at org.scalatest.Transformer$$anonfun$apply$1.apply$mcV$sp(Transformer.scala:22) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.OutcomeOf$class.outcomeOf(OutcomeOf.scala:85) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Transformer.apply(Transformer.scala:22) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Transformer.apply(Transformer.scala:20) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anon$1.apply(FunSpecLike.scala:422) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.withFixture(Suite.scala:1122) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpec.withFixture(FunSpec.scala:1626) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$class.invokeWithFixture$1(FunSpecLike.scala:419) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anonfun$runTest$1.apply(FunSpecLike.scala:431) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anonfun$runTest$1.apply(FunSpecLike.scala:431) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$class.runTest(FunSpecLike.scala:431) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpec.runTest(FunSpec.scala:1626) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anonfun$runTests$1.apply(FunSpecLike.scala:464) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anonfun$runTests$1.apply(FunSpecLike.scala:464) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:413) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:401) [scalatest_2.11-2.2.4.jar:na]
	at scala.collection.immutable.List.foreach(List.scala:381) [scala-library-2.11.2.jar:na]
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.org$scalatest$SuperEngine$$runTestsInBranch(Engine.scala:396) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:483) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$class.runTests(FunSpecLike.scala:464) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpec.runTests(FunSpec.scala:1626) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.run(Suite.scala:1424) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpec.org$scalatest$FunSpecLike$$super$run(FunSpec.scala:1626) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anonfun$run$1.apply(FunSpecLike.scala:468) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anonfun$run$1.apply(FunSpecLike.scala:468) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.runImpl(Engine.scala:545) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$class.run(FunSpecLike.scala:468) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpec.run(FunSpec.scala:1626) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.callExecuteOnSuite$1(Suite.scala:1492) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$$anonfun$runNestedSuites$1.apply(Suite.scala:1528) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$$anonfun$runNestedSuites$1.apply(Suite.scala:1526) [scalatest_2.11-2.2.4.jar:na]
	at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:33) [scala-library-2.11.2.jar:na]
	at scala.collection.mutable.ArrayOps$ofRef.foreach(ArrayOps.scala:186) [scala-library-2.11.2.jar:na]
	at org.scalatest.Suite$class.runNestedSuites(Suite.scala:1526) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.DiscoverySuite.runNestedSuites(DiscoverySuite.scala:29) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.run(Suite.scala:1421) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.DiscoverySuite.run(DiscoverySuite.scala:29) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.SuiteRunner.run(SuiteRunner.scala:55) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$doRunRunRunDaDoRunRun$3.apply(Runner.scala:2563) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$doRunRunRunDaDoRunRun$3.apply(Runner.scala:2557) [scalatest_2.11-2.2.4.jar:na]
	at scala.collection.immutable.List.foreach(List.scala:381) [scala-library-2.11.2.jar:na]
	at org.scalatest.tools.Runner$.doRunRunRunDaDoRunRun(Runner.scala:2557) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$runOptionallyWithPassFailReporter$2.apply(Runner.scala:1044) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$runOptionallyWithPassFailReporter$2.apply(Runner.scala:1043) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$.withClassLoaderAndDispatchReporter(Runner.scala:2722) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$.runOptionallyWithPassFailReporter(Runner.scala:1043) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$.main(Runner.scala:860) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner.main(Runner.scala) [scalatest_2.11-2.2.4.jar:na]
08:53:27.401 [ScalaTest-main-running-ProxyToBackendSpec] DEBUG i.n.u.internal.NativeLibraryLoader - netty_transport_native_epoll cannot be loaded from java.libary.path, now trying export to -Dio.netty.native.workdir: /tmp
java.lang.UnsatisfiedLinkError: no netty_transport_native_epoll in java.library.path
	at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1867) ~[na:1.8.0_121]
	at java.lang.Runtime.loadLibrary0(Runtime.java:870) ~[na:1.8.0_121]
	at java.lang.System.loadLibrary(System.java:1122) ~[na:1.8.0_121]
	at io.netty.util.internal.NativeLibraryUtil.loadLibrary(NativeLibraryUtil.java:38) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.internal.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:209) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.internal.NativeLibraryLoader.load(NativeLibraryLoader.java:118) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.Native.loadNativeLibrary(Native.java:199) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.Native.<clinit>(Native.java:61) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.Epoll.<clinit>(Epoll.java:33) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.eventloop.PlatformAwareClientEventLoopGroupFactory.<init>(PlatformAwareClientEventLoopGroupFactory.java:43) [styx-client-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.client.netty.connectionpool.NettyConnectionFactory.<init>(NettyConnectionFactory.java:62) [styx-client-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.client.netty.connectionpool.NettyConnectionFactory.<init>(NettyConnectionFactory.java:51) [styx-client-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.client.netty.connectionpool.NettyConnectionFactory$Builder.build(NettyConnectionFactory.java:182) [styx-client-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.ProxyToBackend$ConfigFactory.build(ProxyToBackend.java:110) [classes/:na]
	at com.hotels.styx.routing.handlers.ProxyToBackendSpec$$anonfun$1.apply$mcV$sp(ProxyToBackendSpec.scala:56) [test-classes/:na]
	at com.hotels.styx.routing.handlers.ProxyToBackendSpec$$anonfun$1.apply(ProxyToBackendSpec.scala:55) [test-classes/:na]
	at com.hotels.styx.routing.handlers.ProxyToBackendSpec$$anonfun$1.apply(ProxyToBackendSpec.scala:55) [test-classes/:na]
	at org.scalatest.Transformer$$anonfun$apply$1.apply$mcV$sp(Transformer.scala:22) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.OutcomeOf$class.outcomeOf(OutcomeOf.scala:85) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Transformer.apply(Transformer.scala:22) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Transformer.apply(Transformer.scala:20) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anon$1.apply(FunSpecLike.scala:422) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.withFixture(Suite.scala:1122) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpec.withFixture(FunSpec.scala:1626) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$class.invokeWithFixture$1(FunSpecLike.scala:419) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anonfun$runTest$1.apply(FunSpecLike.scala:431) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anonfun$runTest$1.apply(FunSpecLike.scala:431) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$class.runTest(FunSpecLike.scala:431) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpec.runTest(FunSpec.scala:1626) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anonfun$runTests$1.apply(FunSpecLike.scala:464) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anonfun$runTests$1.apply(FunSpecLike.scala:464) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:413) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:401) [scalatest_2.11-2.2.4.jar:na]
	at scala.collection.immutable.List.foreach(List.scala:381) [scala-library-2.11.2.jar:na]
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.org$scalatest$SuperEngine$$runTestsInBranch(Engine.scala:396) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:483) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$class.runTests(FunSpecLike.scala:464) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpec.runTests(FunSpec.scala:1626) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.run(Suite.scala:1424) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpec.org$scalatest$FunSpecLike$$super$run(FunSpec.scala:1626) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anonfun$run$1.apply(FunSpecLike.scala:468) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$$anonfun$run$1.apply(FunSpecLike.scala:468) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.SuperEngine.runImpl(Engine.scala:545) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpecLike$class.run(FunSpecLike.scala:468) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.FunSpec.run(FunSpec.scala:1626) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.callExecuteOnSuite$1(Suite.scala:1492) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$$anonfun$runNestedSuites$1.apply(Suite.scala:1528) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$$anonfun$runNestedSuites$1.apply(Suite.scala:1526) [scalatest_2.11-2.2.4.jar:na]
	at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:33) [scala-library-2.11.2.jar:na]
	at scala.collection.mutable.ArrayOps$ofRef.foreach(ArrayOps.scala:186) [scala-library-2.11.2.jar:na]
	at org.scalatest.Suite$class.runNestedSuites(Suite.scala:1526) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.DiscoverySuite.runNestedSuites(DiscoverySuite.scala:29) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.Suite$class.run(Suite.scala:1421) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.DiscoverySuite.run(DiscoverySuite.scala:29) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.SuiteRunner.run(SuiteRunner.scala:55) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$doRunRunRunDaDoRunRun$3.apply(Runner.scala:2563) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$doRunRunRunDaDoRunRun$3.apply(Runner.scala:2557) [scalatest_2.11-2.2.4.jar:na]
	at scala.collection.immutable.List.foreach(List.scala:381) [scala-library-2.11.2.jar:na]
	at org.scalatest.tools.Runner$.doRunRunRunDaDoRunRun(Runner.scala:2557) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$runOptionallyWithPassFailReporter$2.apply(Runner.scala:1044) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$$anonfun$runOptionallyWithPassFailReporter$2.apply(Runner.scala:1043) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$.withClassLoaderAndDispatchReporter(Runner.scala:2722) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$.runOptionallyWithPassFailReporter(Runner.scala:1043) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner$.main(Runner.scala:860) [scalatest_2.11-2.2.4.jar:na]
	at org.scalatest.tools.Runner.main(Runner.scala) [scalatest_2.11-2.2.4.jar:na]
08:53:27.429 [ScalaTest-main-running-ProxyToBackendSpec] DEBUG io.netty.util.NetUtil - -Djava.net.preferIPv4Stack: false
08:53:27.429 [ScalaTest-main-running-ProxyToBackendSpec] DEBUG io.netty.util.NetUtil - -Djava.net.preferIPv6Addresses: false
08:53:27.433 [ScalaTest-main-running-ProxyToBackendSpec] DEBUG io.netty.util.NetUtil - Loopback interface: lo (lo, 0:0:0:0:0:0:0:1%lo)
08:53:27.435 [ScalaTest-main-running-ProxyToBackendSpec] DEBUG io.netty.util.NetUtil - /proc/sys/net/core/somaxconn: 128
08:53:27.444 [ScalaTest-main-running-ProxyToBackendSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:27.459 [ScalaTest-main-running-ProxyToBackendSpec] DEBUG i.n.c.MultithreadEventLoopGroup - -Dio.netty.eventLoopThreads: 32
08:53:27.522 [ScalaTest-main-running-ProxyToBackendSpec] DEBUG i.n.util.internal.PlatformDependent - org.jctools-core.MpscChunkedArrayQueue: available
08:53:27.685 [ScalaTest-main-running-ProxyToBackendSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=ba:ba1
[32m- builds ProxyToBackend handler[0m
08:53:27.706 [ScalaTest-main-running-ProxyToBackendSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
    name: myProxy
    type: ProxyToBackend
    config:
      na: na
"
[32m- throws for missing mandatory 'backend' attribute[0m
08:53:27.710 [ScalaTest-main-running-ProxyToBackendSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
    name: ProxyToBackend
    type: ProxyToBackend
    config:
      backend:
        id: "ba"
        connectionPool:
          maxConnectionsPerHost: 45
          maxPendingConnectionsPerHost: 15
        responseTimeoutMillis: 60000
"
[32m- throws for a missing mandatory backend.origins attribute[0m
08:53:27.716 [ScalaTest-main-running-ConfigVersionResolverSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
httpPipeline:
  pipeline:
    - plugA
    - plugB
  handler:
    name: MyHandler
    type: ProxyToBackend
    config:
      bar: 1
      "
08:53:27.720 [ScalaTest-main-running-ConfigVersionResolverSpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
---
services:
  factories:
    backendServiceRegistry:
      class: "com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory"
      config: {originsFile: "/a/b/origins.conf"}

      "
08:53:27.727 [ScalaTest-main-running-BackendServiceProxySpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
  type: BackendServiceProxy
  config:
    backendProvider: backendServicesRegistry
      "
[32mConfigVersionResolverSpec:[0m
[32m- returns v2 when 'httpPipeline' is present[0m
[32m- returns v1 when 'httpPipeline' is absent[0m
[33m- errors when 'services.factories.backendServicesRegistry' attribute is absent in v1 configuration !!! IGNORED !!![0m
[32mBackendServiceProxySpec:[0m
08:53:27.778 [ScalaTest-main-running-BackendServiceProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=hwa, path=/, origins=[generic-app:anonymous-origin:localhost:0], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=50, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}, BackendService{id=la, path=/lp/x, origins=[generic-app:anonymous-origin:localhost:1], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=50, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}, BackendService{id=ba, path=/ba/x, origins=[generic-app:anonymous-origin:localhost:2], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=50, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@11ce2e22]
08:53:27.785 [ScalaTest-main-running-BackendServiceProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:27.790 [ScalaTest-main-running-BackendServiceProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:27.818 [ScalaTest-main-running-BackendServiceProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=hwa:anonymous-origin
08:53:27.821 [ScalaTest-main-running-BackendServiceProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:27.821 [ScalaTest-main-running-BackendServiceProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:27.823 [ScalaTest-main-running-BackendServiceProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:27.824 [ScalaTest-main-running-BackendServiceProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=la:anonymous-origin
08:53:27.827 [ScalaTest-main-running-BackendServiceProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/lp/x current routes=[/lp/x, /]
08:53:27.827 [ScalaTest-main-running-BackendServiceProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:27.829 [ScalaTest-main-running-BackendServiceProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:27.830 [ScalaTest-main-running-BackendServiceProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=ba:anonymous-origin
08:53:27.831 [ScalaTest-main-running-BackendServiceProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ba/x current routes=[/ba/x, /lp/x, /]
08:53:27.838 [ScalaTest-main-running-BackendServiceProxySpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
  type: BackendServiceProxy
  config:
    foo: bar
      "
[32m- builds a backend service proxy from the configuration [0m
[32m- errors when backendProvider attribute is not specified[0m
08:53:27.841 [ScalaTest-main-running-BackendServiceProxySpec] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="
config:
  type: BackendServiceProxy
  config:
    backendProvider: bar
      "
[32m- errors when backendProvider does not exists[0m
[36mRun completed in 3 seconds, 660 milliseconds.[0m
[36mTotal number of tests run: 52[0m
[36mSuites: completed 12, aborted 0[0m
[36mTests: succeeded 52, failed 0, canceled 0, ignored 1, pending 0[0m
[32mAll tests passed.[0m
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-proxy ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/proxy/target/styx-proxy-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-proxy/0.9-SNAPSHOT/styx-proxy-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/components/proxy/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-proxy/0.9-SNAPSHOT/styx-proxy-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - Support - Test API 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-test-api ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-test-api ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-test-api ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-test-api ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/support/test-api/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-test-api ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-test-api ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/support/test-api/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-test-api ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-test-api ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-test-api ---
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-test-api ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/support/test-api/target/styx-test-api-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-test-api/0.9-SNAPSHOT/styx-test-api-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/support/test-api/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-test-api/0.9-SNAPSHOT/styx-test-api-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - System Tests 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-tests ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-tests ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-tests ---
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-tests ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/system-tests/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-tests/0.9-SNAPSHOT/styx-tests-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - System Tests - Test Support 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-e2e-testsupport ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-e2e-testsupport ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-e2e-testsupport ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-e2e-testsupport ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-e2e-testsupport ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-e2e-testsupport ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/system-tests/e2e-testsupport/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-e2e-testsupport ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-e2e-testsupport ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-e2e-testsupport ---
[INFO] 
[INFO] --- maven-dependency-plugin:2.8:copy-dependencies (copy-dependencies) @ styx-e2e-testsupport ---
[INFO] Copying styx-proxy-0.9-SNAPSHOT.jar to /root/workspace/mikkokar/styx/437148287/system-tests/e2e-testsupport/target/styx/lib/styx-proxy-0.9-SNAPSHOT.jar
[INFO] Copying styx-client-0.9-SNAPSHOT.jar to /root/workspace/mikkokar/styx/437148287/system-tests/e2e-testsupport/target/styx/lib/styx-client-0.9-SNAPSHOT.jar
[INFO] Copying styx-api-0.9-SNAPSHOT.jar to /root/workspace/mikkokar/styx/437148287/system-tests/e2e-testsupport/target/styx/lib/styx-api-0.9-SNAPSHOT.jar
[INFO] Copying styx-server-0.9-SNAPSHOT.jar to /root/workspace/mikkokar/styx/437148287/system-tests/e2e-testsupport/target/styx/lib/styx-server-0.9-SNAPSHOT.jar
[INFO] jackson-dataformat-yaml-2.5.1.jar already exists in destination.
[INFO] jsonassert-1.2.3.jar already exists in destination.
[INFO] HdrHistogram-2.1.4.jar already exists in destination.
[INFO] hamcrest-all-1.3.jar already exists in destination.
[INFO] metrics-healthchecks-3.2.6.jar already exists in destination.
[INFO] java-uuid-generator-3.1.5.jar already exists in destination.
[INFO] rxjava-1.1.6.jar already exists in destination.
[INFO] styx-api-testsupport-0.9-SNAPSHOT.jar already exists in destination.
[INFO] wiremock-1.54.jar already exists in destination.
[INFO] commons-lang-2.6.jar already exists in destination.
[INFO] metrics-json-3.2.6.jar already exists in destination.
[INFO] json-smart-1.1.1.jar already exists in destination.
[INFO] netty-all-4.1.15.Final.jar already exists in destination.
[INFO] metrics-jvm-3.2.6.jar already exists in destination.
[INFO] rxscala_2.11-0.24.1.jar already exists in destination.
[INFO] metrics-graphite-3.2.6.jar already exists in destination.
[INFO] metrics-core-3.2.6.jar already exists in destination.
[INFO] httpcore-4.3.2.jar already exists in destination.
[INFO] jetty-util-6.1.26.jar already exists in destination.
[INFO] jopt-simple-4.7.jar already exists in destination.
[INFO] logback-core-1.1.2.jar already exists in destination.
[INFO] commons-compiler-2.6.1.jar already exists in destination.
[INFO] scala-library-2.11.2.jar already exists in destination.
[INFO] slf4j-api-1.6.1.jar already exists in destination.
[INFO] json-path-0.8.1.jar already exists in destination.
[INFO] servlet-api-2.5-20081211.jar already exists in destination.
[INFO] netty-tcnative-boringssl-static-2.0.6.Final-linux-x86_64.jar already exists in destination.
[INFO] jackson-databind-2.7.5.jar already exists in destination.
[INFO] xmlunit-1.5.jar already exists in destination.
[INFO] jetty-6.1.26.jar already exists in destination.
[INFO] guava-18.0.jar already exists in destination.
[INFO] jul-to-slf4j-1.6.1.jar already exists in destination.
[INFO] commons-logging-1.1.3.jar already exists in destination.
[INFO] janino-2.6.1.jar already exists in destination.
[INFO] jackson-core-2.7.5.jar already exists in destination.
[INFO] antlr4-runtime-4.5.1-1.jar already exists in destination.
[INFO] snakeyaml-1.6.jar already exists in destination.
[INFO] logback-classic-1.1.2.jar already exists in destination.
[INFO] commons-codec-1.6.jar already exists in destination.
[INFO] json-20090211.jar already exists in destination.
[INFO] httpclient-4.3.5.jar already exists in destination.
[INFO] styx-common-0.9-SNAPSHOT.jar already exists in destination.
[INFO] jackson-annotations-2.7.5.jar already exists in destination.
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-e2e-testsupport ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/system-tests/e2e-testsupport/target/styx-e2e-testsupport-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-e2e-testsupport/0.9-SNAPSHOT/styx-e2e-testsupport-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/system-tests/e2e-testsupport/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-e2e-testsupport/0.9-SNAPSHOT/styx-e2e-testsupport-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - Origins Starter Application 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-origins-starter-app ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-origins-starter-app ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-origins-starter-app ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-origins-starter-app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/support/origins-starter-app/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-origins-starter-app ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-origins-starter-app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/support/origins-starter-app/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-origins-starter-app ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-origins-starter-app ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-origins-starter-app ---
[INFO] 
[INFO] --- maven-dependency-plugin:2.8:copy-dependencies (copy-dependencies) @ styx-origins-starter-app ---
[INFO] Copying styx-proxy-0.9-SNAPSHOT.jar to /root/workspace/mikkokar/styx/437148287/support/origins-starter-app/target/styx/lib/styx-proxy-0.9-SNAPSHOT.jar
[INFO] Copying styx-client-0.9-SNAPSHOT.jar to /root/workspace/mikkokar/styx/437148287/support/origins-starter-app/target/styx/lib/styx-client-0.9-SNAPSHOT.jar
[INFO] Copying styx-api-0.9-SNAPSHOT.jar to /root/workspace/mikkokar/styx/437148287/support/origins-starter-app/target/styx/lib/styx-api-0.9-SNAPSHOT.jar
[INFO] Copying styx-server-0.9-SNAPSHOT.jar to /root/workspace/mikkokar/styx/437148287/support/origins-starter-app/target/styx/lib/styx-server-0.9-SNAPSHOT.jar
[INFO] jackson-dataformat-yaml-2.5.1.jar already exists in destination.
[INFO] HdrHistogram-2.1.4.jar already exists in destination.
[INFO] hamcrest-all-1.3.jar already exists in destination.
[INFO] metrics-healthchecks-3.2.6.jar already exists in destination.
[INFO] java-uuid-generator-3.1.5.jar already exists in destination.
[INFO] rxjava-1.1.6.jar already exists in destination.
[INFO] metrics-json-3.2.6.jar already exists in destination.
[INFO] snakeyaml-1.12.jar already exists in destination.
[INFO] netty-all-4.1.15.Final.jar already exists in destination.
[INFO] metrics-jvm-3.2.6.jar already exists in destination.
[INFO] rxscala_2.11-0.24.1.jar already exists in destination.
[INFO] metrics-graphite-3.2.6.jar already exists in destination.
[INFO] metrics-core-3.2.6.jar already exists in destination.
[INFO] logback-core-1.1.2.jar already exists in destination.
[INFO] commons-compiler-2.6.1.jar already exists in destination.
[INFO] scala-library-2.11.2.jar already exists in destination.
[INFO] slf4j-api-1.6.1.jar already exists in destination.
[INFO] netty-tcnative-boringssl-static-2.0.6.Final-linux-x86_64.jar already exists in destination.
[INFO] jackson-databind-2.7.5.jar already exists in destination.
[INFO] guava-18.0.jar already exists in destination.
[INFO] styx-e2e-testsupport-0.9-SNAPSHOT.jar already exists in destination.
[INFO] jul-to-slf4j-1.6.1.jar already exists in destination.
[INFO] janino-2.6.1.jar already exists in destination.
[INFO] jackson-core-2.7.5.jar already exists in destination.
[INFO] antlr4-runtime-4.5.1-1.jar already exists in destination.
[INFO] logback-classic-1.1.2.jar already exists in destination.
[INFO] styx-common-0.9-SNAPSHOT.jar already exists in destination.
[INFO] jackson-annotations-2.7.5.jar already exists in destination.
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-origins-starter-app ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/support/origins-starter-app/target/styx-origins-starter-app-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-origins-starter-app/0.9-SNAPSHOT/styx-origins-starter-app-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/support/origins-starter-app/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-origins-starter-app/0.9-SNAPSHOT/styx-origins-starter-app-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - System Tests - Test Plugin - Dependencies 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-test-plugin-dependencies ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-test-plugin-dependencies ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-test-plugin-dependencies ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-test-plugin-dependencies ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/system-tests/example-styx-plugin-dependencies/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-test-plugin-dependencies ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-test-plugin-dependencies ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/system-tests/example-styx-plugin-dependencies/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-test-plugin-dependencies ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-test-plugin-dependencies ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-test-plugin-dependencies ---
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-test-plugin-dependencies ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/system-tests/example-styx-plugin-dependencies/target/styx-test-plugin-dependencies-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-test-plugin-dependencies/0.9-SNAPSHOT/styx-test-plugin-dependencies-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/system-tests/example-styx-plugin-dependencies/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-test-plugin-dependencies/0.9-SNAPSHOT/styx-test-plugin-dependencies-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - System Tests - Test Plugin 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-test-plugin ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-test-plugin ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-test-plugin ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-test-plugin ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/system-tests/example-styx-plugin/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-test-plugin ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-test-plugin ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/system-tests/example-styx-plugin/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-test-plugin ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-test-plugin ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-test-plugin ---
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-test-plugin ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/system-tests/example-styx-plugin/target/styx-test-plugin-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-test-plugin/0.9-SNAPSHOT/styx-test-plugin-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/system-tests/example-styx-plugin/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-test-plugin/0.9-SNAPSHOT/styx-test-plugin-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - System Tests - Backend Provider 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-backend-provider ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-backend-provider ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-backend-provider ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-backend-provider ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/system-tests/example-backend-provider/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-backend-provider ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-backend-provider ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/system-tests/example-backend-provider/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-backend-provider ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-backend-provider ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-backend-provider ---
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-backend-provider ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/system-tests/example-backend-provider/target/styx-backend-provider-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-backend-provider/0.9-SNAPSHOT/styx-backend-provider-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/system-tests/example-backend-provider/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-backend-provider/0.9-SNAPSHOT/styx-backend-provider-0.9-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Styx - System Tests - End To End Tests 0.9-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-environment) @ styx-e2e-suite ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-dependencies) @ styx-e2e-suite ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- jacoco-maven-plugin:0.7.5.201505241946:prepare-agent (prepare-agent) @ styx-e2e-suite ---
[INFO] Skipping JaCoCo execution because property jacoco.skip is set.
[INFO] argLine set to empty
[INFO] 
[INFO] --- license-maven-plugin:3.0:format (default) @ styx-e2e-suite ---
[INFO] 
[INFO] --- maven-dependency-plugin:2.10:copy-dependencies (copy-dependencies) @ styx-e2e-suite ---
[INFO] Copying styx-api-testsupport-0.9-SNAPSHOT.jar to /root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/plugins/styx-api-testsupport.jar
[INFO] Copying styx-backend-provider-0.9-SNAPSHOT.jar to /root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/plugins/styx-backend-provider.jar
[INFO] Copying styx-testsupport-0.9-SNAPSHOT.jar to /root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/plugins/styx-testsupport.jar
[INFO] com.github.tomakehurst:wiremock:jar:1.54 already exists in destination.
[INFO] com.typesafe.akka:akka-testkit_2.11:jar:2.4.8 already exists in destination.
[INFO] com.typesafe.akka:akka-actor_2.11:jar:2.4.8 already exists in destination.
[INFO] org.scalacheck:scalacheck_2.11:jar:1.11.4 already exists in destination.
[INFO] org.testng:testng:jar:6.8 already exists in destination.
[INFO] org.scalatest:scalatest_2.11:jar:2.2.4 already exists in destination.
[INFO] org.apache.ant:ant:jar:1.8.3 already exists in destination.
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ styx-e2e-suite ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/src/main/resources
[INFO] 
[INFO] --- scala-maven-plugin:3.1.3:add-source (scala-compile-first) @ styx-e2e-suite ---
[INFO] Add Source directory: /root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/src/main/scala
[INFO] Add Test Source directory: /root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/src/test/scala
[INFO] 
[INFO] --- scala-maven-plugin:3.1.3:compile (scala-compile-first) @ styx-e2e-suite ---
[WARNING]  Expected all dependencies to require Scala version: 2.11.4
[WARNING]  com.fasterxml.jackson.module:jackson-module-scala_2.11:2.7.3 requires scala version: 2.11.8
[WARNING] Multiple versions of scala libraries detected!
[WARNING] No source files found.
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (java-compile) @ styx-e2e-suite ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ styx-e2e-suite ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 12 resources
[INFO] 
[INFO] --- scala-maven-plugin:3.1.3:testCompile (scala-test-compile) @ styx-e2e-suite ---
[WARNING]  Expected all dependencies to require Scala version: 2.11.4
[WARNING]  com.fasterxml.jackson.module:jackson-module-scala_2.11:2.7.3 requires scala version: 2.11.8
[WARNING] Multiple versions of scala libraries detected!
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (java-test-compile) @ styx-e2e-suite ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19:test (default-test) @ styx-e2e-suite ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- scalatest-maven-plugin:1.0:test (test) @ styx-e2e-suite ---
[36mDiscovery starting.[0m
clazz.getResource(/conf/logback/logback.xml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/logback/logback.xml
08:53:34.558 [ForkJoinPool-2-worker-15] DEBUG c.h.s.i.c.ConfigurationParser - Parsing configuration in format=YAML from source="originRestrictionCookie: "originRestrictionCookie"
"
08:53:34.790 [ForkJoinPool-2-worker-15] DEBUG com.hotels.styx.StyxServer - Real -Dio.netty.leakDetectionLevel = ADVANCED
08:53:34.796 [ForkJoinPool-2-worker-15] DEBUG i.n.u.i.l.InternalLoggerFactory - Using SLF4J as the default logging framework
08:53:34.798 [ForkJoinPool-2-worker-15] DEBUG io.netty.util.ResourceLeakDetector - -Dio.netty.leakDetection.level: advanced
08:53:34.798 [ForkJoinPool-2-worker-15] DEBUG io.netty.util.ResourceLeakDetector - -Dio.netty.leakDetection.maxRecords: 4
08:53:34.798 [ForkJoinPool-2-worker-15] DEBUG com.hotels.styx.StyxServer - Real resource leak detection level = ADVANCED
Oct 10, 2018 8:53:35 AM com.hotels.styx.infrastructure.logging.LOGBackConfigurer initLogging
INFO: Initializing LOGBack from [/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/logback/logback.xml]. If you are watching the console output, it may stop after this point, if configured to only write to file.
08:53:35.213 [ForkJoinPool-2-worker-15] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:35.487 [ForkJoinPool-2-worker-15] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:35.533 [ForkJoinPool-2-worker-15] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:35.593 [ForkJoinPool-2-worker-15] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:35.601 [ForkJoinPool-2-worker-15] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@1a7b8563
08:53:35.726 [ForkJoinPool-2-worker-15] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:35.814 [ForkJoinPool-2-worker-15] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:35.837 [ForkJoinPool-2-worker-15] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:35.837 [ForkJoinPool-2-worker-15] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:35.850 [ForkJoinPool-2-worker-15] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:35.865 [ForkJoinPool-2-worker-15] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:35.866 [ForkJoinPool-2-worker-15] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:35.916 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35535
08:53:35.920 [ForkJoinPool-2-worker-15] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:35.922 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:42585
08:53:35.927 [ForkJoinPool-2-worker-15] INFO  com.hotels.styx.StyxServer - Started styx server in 65ms
Creating file /tmp/1539154415937-0/big_file.dat of size 52428800 bytes.
08:53:36.681 [ForkJoinPool-2-worker-29] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:36.687 [MockServer STARTING] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:36.691 [MockServer-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:39111
08:53:36.693 [MockServer STARTING] INFO  com.hotels.styx.MockServer - mock server started on port 39111
08:53:36.728 [ForkJoinPool-2-worker-15] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=myapp, path=/download, origins=[myapp:localhost:39111:localhost:39111], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@32b74ab6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@fe786d9, com.hotels.styx.admin.dashboard.DashboardDataSupplier@49e674ca, com.hotels.styx.admin.dashboard.DashboardData$Downstream@769a3fea]
08:53:36.743 [ForkJoinPool-2-worker-15] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:36.754 [ForkJoinPool-2-worker-15] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:36.824 [ForkJoinPool-2-worker-15] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=myapp:localhost:39111
08:53:36.843 [ForkJoinPool-2-worker-15] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:36.847 [ForkJoinPool-2-worker-15] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:36.855 [ForkJoinPool-2-worker-15] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/download current routes=[/download]
08:53:36.870 [ForkJoinPool-2-worker-15] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=myapp, path=/download, origins=[myapp:localhost:39111:localhost:39111], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:36.913 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/conf/origins/origins-correct.yml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/origins/origins-correct.yml
clazz.getResource(/conf/origins/origins-duplicate-path.yml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/origins/origins-duplicate-path.yml
08:53:36.918 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
2018-10-10 08:53:37.532:INFO::Logging to STDERR via org.mortbay.log.StdErrLog
server ports: 44061 44061
08:53:38.127 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 38569 38569
08:53:38.207 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:38.210 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
server ports: 41919 41919
08:53:38.251 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/ssl/testCredentials.crt) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt
clazz.getResource(/ssl/testCredentials.key) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key
08:53:38.263 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:38.330 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:38.343 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:38.351 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:38.352 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:38.355 [mock-admin-generic-app-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:34895
08:53:38.363 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:38.366 [mock-stub-generic-app-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:40643
08:53:38.556 [mock-admin-generic-app-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 104, 34, 32, 58, 32, 34, 47, 115, 101, 99, 117, 114, 101, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 10, 32, 32, 125, 10, 125]
08:53:38.588 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 41213 41213
08:53:38.650 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:38.651 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
server ports: 41579 41579
08:53:38.764 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/ssl/testCredentials.crt) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt
clazz.getResource(/ssl/testCredentials.key) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key
08:53:38.767 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:38.768 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:38.770 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:38.775 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:38.794 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:38.798 [mock-admin-generic-app-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:46333
08:53:38.801 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:38.804 [mock-stub-generic-app-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:38675
08:53:38.823 [mock-admin-generic-app-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 104, 34, 32, 58, 32, 34, 47, 115, 101, 99, 117, 114, 101, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 10, 32, 32, 125, 10, 125]
08:53:38.833 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:38.835 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:38.836 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:38.839 [Netty test origin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.support.NettyHttpServerConnector bound successfully on port 32833 socket port /0:0:0:0:0:0:0:0%0:32833
08:53:38.845 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 35073 35073
08:53:38.896 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/conf/logback/logback-debug-stdout.xml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/logback/logback-debug-stdout.xml
08:53:38.899 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:38.903 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:38.904 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:38.911 [mock-admin-appA-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:40237
08:53:38.914 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:38.917 [mock-stub-appA-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:38715
08:53:38.933 [mock-admin-appA-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 116, 101, 114, 110, 34, 32, 58, 32, 34, 47, 46, 42, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 44, 10, 32, 32, 32, 32, 34, 98, 111, 100, 121, 34, 32, 58, 32, 34, 72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33, 34, 44, 10, 32, 32, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 83, 116, 117, 98, 45, 79, 114, 105, 103, 105, 110, 45, 73, 110, 102, 111, 34, 32, 58, 32, 34, 97, 112, 112, 65, 45, 48, 49, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
08:53:38.941 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:38.946 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:38.947 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:38.949 [mock-admin-appB-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:36685
08:53:38.951 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:38.955 [mock-stub-appB-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:37575
08:53:38.971 [mock-admin-appB-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 116, 101, 114, 110, 34, 32, 58, 32, 34, 47, 46, 42, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 44, 10, 32, 32, 32, 32, 34, 98, 111, 100, 121, 34, 32, 58, 32, 34, 72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33, 34, 44, 10, 32, 32, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 83, 116, 117, 98, 45, 79, 114, 105, 103, 105, 110, 45, 73, 110, 102, 111, 34, 32, 58, 32, 34, 97, 112, 112, 66, 45, 48, 49, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
08:53:38.982 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 45679 45679
08:53:39.051 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 38345 38345
server ports: 35901 35901
08:53:39.204 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 44623 44623
server ports: 40011 40011
server ports: 46183 46183
08:53:39.314 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 37543 37543
08:53:39.360 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 40531 40531
08:53:39.401 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:39.404 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 33531 33531
08:53:39.454 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 41871 41871
08:53:39.545 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 33935 33935
server ports: 34809 34809
clazz.getResource(/conf/logback/logback-debug-stdout.xml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/logback/logback-debug-stdout.xml
08:53:39.769 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:39.771 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:39.771 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:39.775 [Netty test origin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.support.NettyHttpServerConnector bound successfully on port 42583 socket port /0:0:0:0:0:0:0:0%0:42583
08:53:39.778 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 38073 38073
Updating origins configuration to /tmp/1539154419779-0/origins.yml
---
- id: "appv1"
  path: "/app01/"
  connectionPool:
    maxConnectionsPerHost: 45
    maxPendingConnectionsPerHost: 15
    socketTimeoutMillis: 120000
    connectTimeoutMillis: 1000
    pendingConnectionTimeoutMillis: 8000
  healthCheck:
    uri: "/version.txt"
    intervalMillis: 5000
  responseTimeoutMillis: 60000
  origins:
  - { id: "app1", host: "localhost:38073" }

08:53:39.860 [ScalaTest-main] INFO  c.h.s.i.logging.LOGBackConfigurer - Initializing LOGBack from [/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/logback/logback.xml]. If you are watching the console output, it may stop after this point, if configured to only write to file.
08:53:39.906 [ScalaTest-main] INFO  c.h.s.s.ServiceProvision - Service Factory Config type
08:53:39.935 [ScalaTest-main] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:39.939 [ScalaTest-main] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:39.939 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:39.942 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:39.943 [ScalaTest-main] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@ec2bf82
08:53:39.945 [ScalaTest-main] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:39.963 [ScalaTest-main] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:39.966 [ScalaTest-main] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:39.966 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:39.968 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:39.970 [ScalaTest-main] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:39.971 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:39.975 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44503
08:53:39.978 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:39.981 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:37947
08:53:40.059 [pool-77-thread-1] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appv1, path=/app01/, origins=[appv1:app1:localhost:38073], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=45, maxPendingConnectionsPerHost=15, connectTimeoutMillis=1000, socketTimeoutMillis=120000, pendingConnectionTimeoutMillis=8000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/version.txt], intervalMillis=5000, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@6103803b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@69e43c80, com.hotels.styx.admin.dashboard.DashboardDataSupplier@369351d9, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6f1a2430]
08:53:40.061 [pool-77-thread-1] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:40.062 [pool-77-thread-1] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:40.099 [pool-77-thread-1] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appv1:app1
08:53:40.101 [pool-77-thread-1] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={"proxy":{"connectors":{"http":{"port":0}}},"admin":{"connectors":{"http":{"port":0}}},"services":{"factories":{"backendServiceRegistry":{"class":"com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$Factory","config":{"originsFile":"/tmp/1539154419779-0/origins.yml","monitor":{"enabled":true}}}}}}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:40.101 [pool-77-thread-1] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:53:40.102 [pool-77-thread-1] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/app01/ current routes=[/app01/]
08:53:40.105 [pool-77-thread-1] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appv1, path=/app01/, origins=[appv1:app1:localhost:38073], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=45, maxPendingConnectionsPerHost=15, connectTimeoutMillis=1000, socketTimeoutMillis=120000, pendingConnectionTimeoutMillis=8000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/version.txt], intervalMillis=5000, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:40.111 [pool-77-thread-1] INFO  c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reloaded. reason='Initial load', timestamp=2018-10-10T06:53:39.813871Z, md5-hash=567563134b33010f968a1b4cf685c1a1, File reloaded., file='/tmp/1539154419779-0/origins.yml'
08:53:40.112 [ScalaTest-main] INFO  com.hotels.styx.StyxServer - Started styx server in 142ms
08:53:40.115 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:40.129 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.130 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.136 [Netty test origin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.support.NettyHttpServerConnector bound successfully on port 43381 socket port /0:0:0:0:0:0:0:0%0:43381
08:53:40.138 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 41067 41067
08:53:40.183 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 37711 37711
08:53:40.223 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 42703 42703
08:53:40.310 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/ssl/testCredentials.crt) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt
clazz.getResource(/ssl/testCredentials.key) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key
08:53:40.313 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.317 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.318 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.346 [mock-admin-generic-app-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:45551
08:53:40.347 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.356 [mock-stub-generic-app-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44097
08:53:40.373 [mock-admin-generic-app-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 104, 34, 32, 58, 32, 34, 47, 115, 101, 99, 117, 114, 101, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 10, 32, 32, 125, 10, 125]
08:53:40.384 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.385 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.390 [Netty test origin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.support.NettyHttpServerConnector bound successfully on port 45705 socket port /0:0:0:0:0:0:0:0%0:45705
08:53:40.392 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:40.394 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.395 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.412 [Netty test origin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.support.NettyHttpServerConnector bound successfully on port 42267 socket port /0:0:0:0:0:0:0:0%0:42267
server ports: 35845 35845
08:53:40.470 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:40.471 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.473 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:40.474 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.475 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.485 [Netty test origin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.support.NettyHttpServerConnector bound successfully on port 33783 socket port /0:0:0:0:0:0:0:0%0:33783
08:53:40.496 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:40.498 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.498 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.504 [Netty test origin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.support.NettyHttpServerConnector bound successfully on port 41973 socket port /0:0:0:0:0:0:0:0%0:41973
clazz.getResource(/conf/logback/logback-suppress-errors.xml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/logback/logback-suppress-errors.xml
08:53:40.507 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 36029 36029
08:53:40.573 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/conf/logback/logback-debug-stdout.xml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/logback/logback-debug-stdout.xml
clazz.getResource(/ssl/testCredentials.crt) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt
clazz.getResource(/ssl/testCredentials.key) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key
clazz.getResource(/ssl/protocolsSpec/keystore) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/protocolsSpec/keystore
clazz.getResource(/ssl/protocolsSpec/truststore) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/protocolsSpec/truststore
server ports: 45849 45849
08:53:40.620 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.625 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.626 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.630 [mock-admin-app-ssl-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44915
08:53:40.631 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.634 [mock-stub-app-ssl-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:38481
08:53:40.648 [mock-admin-app-ssl-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 116, 101, 114, 110, 34, 32, 58, 32, 34, 47, 46, 42, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 44, 10, 32, 32, 32, 32, 34, 98, 111, 100, 121, 34, 32, 58, 32, 34, 72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33, 34, 44, 10, 32, 32, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 83, 116, 117, 98, 45, 79, 114, 105, 103, 105, 110, 45, 73, 110, 102, 111, 34, 32, 58, 32, 34, 104, 116, 116, 112, 115, 79, 114, 105, 103, 105, 110, 87, 105, 116, 104, 111, 117, 116, 67, 101, 114, 116, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
08:53:40.657 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.661 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.662 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.666 [mock-admin-app-ssl-02-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:33319
08:53:40.667 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.669 [mock-stub-app-ssl-02-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:40063
08:53:40.685 [mock-admin-app-ssl-02-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 116, 101, 114, 110, 34, 32, 58, 32, 34, 47, 46, 42, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 44, 10, 32, 32, 32, 32, 34, 98, 111, 100, 121, 34, 32, 58, 32, 34, 72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33, 34, 44, 10, 32, 32, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 83, 116, 117, 98, 45, 79, 114, 105, 103, 105, 110, 45, 73, 110, 102, 111, 34, 32, 58, 32, 34, 104, 116, 116, 112, 115, 79, 114, 105, 103, 105, 110, 87, 105, 116, 104, 67, 101, 114, 116, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
httpOrigin: 45849
httpsOriginWithCert: 40063
httpsOriginWithoutCert: 38481
08:53:40.715 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:40.717 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
server ports: 42515 42515
08:53:40.746 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:40.747 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.749 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 37629 37629
08:53:40.775 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/conf/origins/origins-correct.yml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/origins/origins-correct.yml
clazz.getResource(/conf/origins/origins-incorrect.yml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/origins/origins-incorrect.yml
08:53:40.778 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 46187 46187
08:53:40.822 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/conf/logback/logback-debug-stdout.xml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/logback/logback-debug-stdout.xml
08:53:40.825 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.829 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.830 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.835 [mock-admin-appTls11-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:41645
08:53:40.836 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.839 [mock-stub-appTls11-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:42657
08:53:40.858 [mock-admin-appTls11-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 116, 101, 114, 110, 34, 32, 58, 32, 34, 47, 46, 42, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 44, 10, 32, 32, 32, 32, 34, 98, 111, 100, 121, 34, 32, 58, 32, 34, 72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33, 34, 44, 10, 32, 32, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 83, 116, 117, 98, 45, 79, 114, 105, 103, 105, 110, 45, 73, 110, 102, 111, 34, 32, 58, 32, 34, 65, 112, 112, 32, 84, 76, 83, 32, 118, 49, 46, 49, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
08:53:40.870 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.875 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.876 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.882 [mock-admin-appTls11B-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:40625
08:53:40.883 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.896 [mock-stub-appTls11B-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:41819
08:53:40.915 [mock-admin-appTls11B-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 116, 101, 114, 110, 34, 32, 58, 32, 34, 47, 46, 42, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 44, 10, 32, 32, 32, 32, 34, 98, 111, 100, 121, 34, 32, 58, 32, 34, 72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33, 34, 44, 10, 32, 32, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 83, 116, 117, 98, 45, 79, 114, 105, 103, 105, 110, 45, 73, 110, 102, 111, 34, 32, 58, 32, 34, 65, 112, 112, 32, 84, 76, 83, 32, 118, 49, 46, 50, 32, 66, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
08:53:40.922 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.927 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.928 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.931 [mock-admin-appTlsDefault-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:36481
08:53:40.931 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.934 [mock-stub-appTlsDefault-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:43951
08:53:40.947 [mock-admin-appTlsDefault-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 116, 101, 114, 110, 34, 32, 58, 32, 34, 47, 46, 42, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 44, 10, 32, 32, 32, 32, 34, 98, 111, 100, 121, 34, 32, 58, 32, 34, 72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33, 34, 44, 10, 32, 32, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 83, 116, 117, 98, 45, 79, 114, 105, 103, 105, 110, 45, 73, 110, 102, 111, 34, 32, 58, 32, 34, 65, 112, 112, 32, 84, 76, 83, 32, 118, 49, 46, 49, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
08:53:40.954 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.959 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.960 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.962 [mock-admin-appTls12-02-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:45189
08:53:40.963 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.965 [mock-stub-appTls12-02-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:36671
08:53:40.977 [mock-admin-appTls12-02-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 116, 101, 114, 110, 34, 32, 58, 32, 34, 47, 46, 42, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 44, 10, 32, 32, 32, 32, 34, 98, 111, 100, 121, 34, 32, 58, 32, 34, 72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33, 34, 44, 10, 32, 32, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 83, 116, 117, 98, 45, 79, 114, 105, 103, 105, 110, 45, 73, 110, 102, 111, 34, 32, 58, 32, 34, 65, 112, 112, 32, 84, 76, 83, 32, 118, 49, 46, 50, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
08:53:40.987 [pool-143-thread-1] INFO  c.h.s.i.FileBackedRegistry - Not reloading /tmp/1539154419779-0/origins.yml as content did not change
08:53:40.988 [pool-143-thread-1] INFO  c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reloaded. reason='File Monitor', timestamp=2018-10-10T06:53:39.813871Z, md5-hash=567563134b33010f968a1b4cf685c1a1, Identical file content., file='/tmp/1539154419779-0/origins.yml'
08:53:40.988 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:40.990 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:40.990 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:40.993 [Netty test origin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.support.NettyHttpServerConnector bound successfully on port 40369 socket port /0:0:0:0:0:0:0:0%0:40369
08:53:40.995 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 45169 45169
08:53:41.026 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/conf/origins/origins-incorrect.yml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/origins/origins-incorrect.yml
08:53:41.029 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 45035 45035
08:53:41.066 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:41.068 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:41.069 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:41.072 [Netty test origin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.support.NettyHttpServerConnector bound successfully on port 44535 socket port /0:0:0:0:0:0:0:0%0:44535
08:53:41.074 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:41.075 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:41.078 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:41.080 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:41.080 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:41.083 [Netty test origin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.support.NettyHttpServerConnector bound successfully on port 35465 socket port /0:0:0:0:0:0:0:0%0:35465
08:53:41.086 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:41.088 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/ssl/testCredentials.crt) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt
clazz.getResource(/ssl/testCredentials.key) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key
08:53:41.091 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:41.092 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:41.096 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:41.097 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:41.100 [mock-admin-generic-app-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:34395
08:53:41.100 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:41.103 [mock-stub-generic-app-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35499
08:53:41.117 [mock-admin-generic-app-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 104, 34, 32, 58, 32, 34, 47, 115, 101, 99, 117, 114, 101, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 10, 32, 32, 125, 10, 125]
08:53:41.125 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/ssl/testCredentials.crt) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt
clazz.getResource(/ssl/testCredentials.key) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key
server ports: 34047 34047
08:53:41.170 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/ssl/testCredentials.crt) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt
clazz.getResource(/ssl/testCredentials.key) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key
server ports: 42743 42743
08:53:41.210 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 42401 42401
server ports: 35293 35293
server ports: 44473 44473
server ports: 37601 37601
08:53:41.357 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:41.358 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:41.359 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:41.360 [Netty test origin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.support.NettyHttpServerConnector bound successfully on port 46557 socket port /0:0:0:0:0:0:0:0%0:46557
08:53:41.361 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:41.362 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:41.363 [Netty test origin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.support.NettyHttpServerConnector bound successfully on port 34463 socket port /0:0:0:0:0:0:0:0%0:34463
08:53:41.366 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:41.368 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
clazz.getResource(/conf/logback/logback-debug-stdout.xml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/logback/logback-debug-stdout.xml
08:53:41.371 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/conf/logback/logback-debug-stdout.xml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/logback/logback-debug-stdout.xml
server ports: 45221 45221
08:53:41.407 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:41.412 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:41.412 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:41.414 [mock-admin-httpsApp-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:32869
08:53:41.415 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:41.416 [mock-stub-httpsApp-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35971
08:53:41.427 [mock-admin-httpsApp-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 116, 101, 114, 110, 34, 32, 58, 32, 34, 47, 46, 42, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 44, 10, 32, 32, 32, 32, 34, 98, 111, 100, 121, 34, 32, 58, 32, 34, 72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33, 34, 44, 10, 32, 32, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 83, 116, 117, 98, 45, 79, 114, 105, 103, 105, 110, 45, 73, 110, 102, 111, 34, 32, 58, 32, 34, 104, 116, 116, 112, 115, 65, 112, 112, 45, 48, 49, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
08:53:41.544 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 39089 39089
08:53:41.581 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 37307 37307
server ports: 43103 43103
server ports: 44485 44485
08:53:41.644 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 41851 41851
server ports: 44441 44441
server ports: 45673 45673
08:53:41.699 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:41.700 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
server ports: 39087 39087
08:53:41.723 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
clazz.getResource(/conf/logback/logback-debug-stdout.xml) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/logback/logback-debug-stdout.xml
clazz.getResource(/ssl/testCredentials.crt) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt
clazz.getResource(/ssl/testCredentials.key) -> file:/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key
server ports: 37759 37759
08:53:41.760 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:41.764 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:41.765 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:41.766 [mock-admin-app-ssl-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35115
08:53:41.767 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:41.768 [mock-stub-app-ssl-01-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35771
08:53:41.778 [mock-admin-app-ssl-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/mappings/new
[123, 10, 32, 32, 34, 114, 101, 113, 117, 101, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 117, 114, 108, 80, 97, 116, 116, 101, 114, 110, 34, 32, 58, 32, 34, 47, 46, 42, 34, 44, 10, 32, 32, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 32, 32, 125, 44, 10, 32, 32, 34, 114, 101, 115, 112, 111, 110, 115, 101, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 115, 116, 97, 116, 117, 115, 34, 32, 58, 32, 50, 48, 48, 44, 10, 32, 32, 32, 32, 34, 98, 111, 100, 121, 34, 32, 58, 32, 34, 72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33, 34, 44, 10, 32, 32, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 83, 116, 117, 98, 45, 79, 114, 105, 103, 105, 110, 45, 73, 110, 102, 111, 34, 32, 58, 32, 34, 104, 116, 116, 112, 115, 79, 114, 105, 103, 105, 110, 87, 105, 116, 104, 111, 117, 116, 67, 101, 114, 116, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
httpOrigin: 37759
httpsOriginWithoutCert: 35771
08:53:41.787 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:41.788 [ScalaTest-main] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:41.789 [ScalaTest-main] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:41.791 [Netty test origin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.support.NettyHttpServerConnector bound successfully on port 33171 socket port /0:0:0:0:0:0:0:0%0:33171
server ports: 43795 43795
08:53:41.831 [ScalaTest-main] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
server ports: 42113 42113
[36mDiscovery completed in 9 seconds, 591 milliseconds.[0m
[36mRun starting. Expected test count is: 160[0m
[32mLongDownloadsSpec:[0m
[32mStyx[0m
[33m- should deal with cancelled downloads !!! IGNORED !!![0m
[33m- should proxy multiple requests !!! IGNORED !!![0m
08:53:42.049 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] INFO  c.h.s.i.logging.LOGBackConfigurer - Initializing LOGBack from [/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/logback/logback.xml]. If you are watching the console output, it may stop after this point, if configured to only write to file.
08:53:42.065 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:42.070 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:42.070 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.082 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.083 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@77a281fc
08:53:42.085 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:42.090 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:42.094 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:42.095 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.118 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.124 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:42.124 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:42.127 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:41689
08:53:42.130 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:42.131 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:32805
08:53:42.140 [pool-207-thread-1] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app, path=/, origins=[app:app2:localhost:9091, app:app1:localhost:9090], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=45, maxPendingConnectionsPerHost=15, connectTimeoutMillis=1000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=8000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/version.txt], intervalMillis=5000, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@12d020d2, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1c17dcf8, com.hotels.styx.admin.dashboard.DashboardDataSupplier@18284ba2, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5d2ad6c3]
08:53:42.141 [pool-207-thread-1] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:42.142 [pool-207-thread-1] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:42.145 [pool-207-thread-1] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app1
08:53:42.148 [pool-207-thread-1] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app2
08:53:42.153 [pool-207-thread-1] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:42.157 [pool-207-thread-1] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:42.160 [pool-207-thread-1] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:42.163 [pool-207-thread-1] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app, path=/, origins=[app:app2:localhost:9091, app:app1:localhost:9090], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=45, maxPendingConnectionsPerHost=15, connectTimeoutMillis=1000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=8000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/version.txt], intervalMillis=5000, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:42.168 [pool-207-thread-1] INFO  c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reloaded. reason='Initial load', timestamp=2018-10-10T06:53:42.013919Z, md5-hash=c91129cc1d98aaf26ab602dd2883188e, File reloaded., file='/tmp/1539154416914-0/origins.yml'
08:53:42.168 [ScalaTest-main-running-OriginsPathDuplicationOnReloadSpec] INFO  com.hotels.styx.StyxServer - Started styx server in 48ms
[32mOriginsPathDuplicationOnReloadSpec:[0m
08:53:42.239 [pool-211-thread-1] ERROR c.h.s.p.b.f.FileBackedBackendServicesRegistry - Duplicate path '/' used for applications: 'app', 'appB'
08:53:42.248 [pool-211-thread-1] ERROR c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reload failed. reason='Admin Interface', timestamp=2018-10-10T06:53:42.185923Z, md5-hash=8816aee3b5ee6ab3f4c1b605651ad04d, Reload failure., file='/tmp/1539154416914-0/origins.yml'
java.lang.IllegalStateException: Resource constraint failure
	at com.google.common.base.Preconditions.checkState(Preconditions.java:173) ~[guava-18.0.jar:na]
	at com.hotels.styx.api.extension.service.spi.AbstractRegistry.set(AbstractRegistry.java:96) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.updateResources(FileBackedRegistry.java:139) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.lambda$reload$1(FileBackedRegistry.java:95) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
08:53:42.252 [pool-211-thread-1] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=39670aeb-cc59-11e8-9327-0242ac1147ce cause=java.lang.RuntimeException: java.lang.IllegalStateException: Resource constraint failure, state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=POST, uri=http://localhost:32805/admin/tasks/origins/reload, headers=[Host=localhost:32805], id=39670aeb-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:53:42.307 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
[32m- Responds with INTERNAL_SERVER_ERROR when the backend-services have a duplicate path[0m
08:53:42.331 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:42.331 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:42.332 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:42.342 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mPluginPipelineSpec:[0m
08:53:42.399 [ScalaTest-main-running-DiscoverySuite] INFO  testgrp.TestPluginModule - Example-Dependency-Available
08:53:42.401 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:42.406 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin PluginA instrumented
08:53:42.407 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:42.408 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.410 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.411 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@2a389173
08:53:42.413 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:42.420 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:42.427 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:42.427 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.428 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.431 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:42.432 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:42.433 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35967
08:53:42.436 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:42.437 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:41869
08:53:42.438 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
Styx http port is: [35967]
Styx https port is: [-1]
08:53:42.440 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app1, path=/, origins=[app1:generic-app-01:localhost:44061], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@2a22ad2b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48c3205a, com.hotels.styx.admin.dashboard.DashboardDataSupplier@121c54fa, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4390f46e]
08:53:42.441 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:42.442 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:42.443 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app1:generic-app-01
08:53:42.444 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:42.445 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:53:42.445 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:42.446 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app1, path=/, origins=[app1:generic-app-01:localhost:44061], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mplugins [0m
[32m- Styx loads the plugins during startup.[0m
[32m- Styx exposes the plugin configuration directory[0m
Styx http port was: [35967]
Styx https port was: [-1]
08:53:42.734 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:42.743 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:42.744 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:42.745 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:42.745 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mResubscribingPluginSpec:[0m
08:53:42.768 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
[33m- Styx as a plugin container !!! IGNORED !!![0m
08:53:42.770 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:42.771 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.773 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.773 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@6a2eea2a
08:53:42.774 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:42.779 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:42.781 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:42.781 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.781 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.783 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:42.783 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:42.786 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:46083
08:53:42.789 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:42.791 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:37373
08:53:42.792 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 9ms
Styx http port is: [46083]
Styx https port is: [-1]
08:53:42.795 [ScalaTest-main-running-VersionPresentInResponseHeaderSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41919], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@3d36dff4, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7abe27bf, com.hotels.styx.admin.dashboard.DashboardDataSupplier@5b94ccbc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@38a1c423]
08:53:42.796 [ScalaTest-main-running-VersionPresentInResponseHeaderSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:42.796 [ScalaTest-main-running-VersionPresentInResponseHeaderSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:42.797 [ScalaTest-main-running-VersionPresentInResponseHeaderSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=default-app:generic-app-01
08:53:42.801 [ScalaTest-main-running-VersionPresentInResponseHeaderSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:42.801 [ScalaTest-main-running-VersionPresentInResponseHeaderSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:53:42.801 [ScalaTest-main-running-VersionPresentInResponseHeaderSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
[32mVersionPresentInResponseHeaderSpec:[0m
08:53:42.803 [ScalaTest-main-running-VersionPresentInResponseHeaderSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41919], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx Info response header configured to contain version[0m
[32m- should respond with version in response header[0m
Styx http port was: [46083]
Styx https port was: [-1]
08:53:42.889 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:42.895 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:42.895 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:42.896 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:42.896 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mTls12Spec:[0m
08:53:42.928 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:42.930 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpsConnectorConfig{port=0, sslProvider=JDK, certificateFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt, certificateKeyFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key, sessionTimeoutMillis=300000, sessionCacheSize=0, cipherSuites=[], protocols=TLSv1.2}] name=Proxy
08:53:42.931 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.969 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.970 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@3db64bd4
08:53:42.971 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:42.979 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:42.979 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:42.980 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.980 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:42.981 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:42.981 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:42.984 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:43473
08:53:42.986 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:42.987 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:45293
08:53:42.988 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 7ms
Styx http port is: [-1]
Styx https port is: [43473]
08:53:42.990 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=https-app, path=/secure, origins=[https-app:generic-app:localhost:40643], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@22bd2039, protocols=[], cipherSuites=[]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@705f83a7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3bb8aabc, com.hotels.styx.admin.dashboard.DashboardDataSupplier@6e1d4137, com.hotels.styx.admin.dashboard.DashboardData$Downstream@256a1825]
08:53:42.991 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:42.992 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:42.992 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=https-app:generic-app
08:53:42.993 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={"proxy":{"connectors":{"https":{"port":0,"sslProvider":"JDK","certificateFile":"/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt","certificateKeyFile":"/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key","protocols":["TLSv1.2"]}}},"admin":{"connectors":{"http":{"port":0}}}}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:42.993 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:53:42.993 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/secure current routes=[/secure]
08:53:42.994 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=https-app, path=/secure, origins=[https-app:generic-app:localhost:40643], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@22bd2039, protocols=[], cipherSuites=[]}}], removed=[], updated=[]}
[32mTLS protocol restriction[0m
08:53:43.482 [mock-stub-generic-app-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - generic-app received: https://localhost:43473/secure
[]
[32m- Accepts TLS 1.2 only[0m
08:53:43.528 [Proxy-Worker-1-Thread] INFO  c.h.s.s.n.c.HttpPipelineHandler - SSL handshake failure from incoming connection cause="Client requested protocol TLSv1.1 not enabled or not supported", serverAddress=/127.0.0.1:43473, clientAddress=/127.0.0.1:60718
[32m- Refuses TLS 1.1 when TLS 1.2 is required[0m
08:53:43.532 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:43.533 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:43.534 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:43.534 [simple-netty-http-client-Client-Worker-0-Thread] WARN  c.h.s.c.n.c.FlowControllingHttpContentProducer - message="Inappropriate event=ChannelInactiveEvent", prefix=localhost/127.0.0.1:43473 -> /127.0.0.1:60718, Request(method=GET, url=https://localhost:43473/secure, id=1ea7a8a6-b953-4a93-9aee-fff63c53ce00), state=TERMINATED, receivedChunks=0, receivedBytes=0, emittedChunks=0, emittedBytes=0
08:53:43.536 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [-1]
Styx https port was: [43473]
08:53:43.536 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:43.549 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:43.550 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:43.555 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:43.556 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mLoggingSpec:[0m
08:53:43.585 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:43.587 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin bad-plugin instrumented
08:53:43.588 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:43.588 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:43.590 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:43.591 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@2bc9a775
08:53:43.592 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:43.598 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:43.599 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:43.600 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:43.600 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:43.602 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:43.602 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:43.606 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:33363
08:53:43.609 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:43.610 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:45529
08:53:43.612 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 11ms
Styx http port is: [33363]
Styx https port is: [-1]
08:53:43.614 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:41213], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@de88ac6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5bca7664, com.hotels.styx.admin.dashboard.DashboardDataSupplier@105b693d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3fae596]
08:53:43.615 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:43.615 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:43.616 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:generic-app-01
08:53:43.617 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:43.618 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:43.618 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:53:43.619 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:41213], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx request error logging[0m
08:53:43.650 [Proxy-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=3a43af51-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.api.plugins.spi.PluginException: bad-plugin: Throw exception at Request, state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:33363/foobar, headers=[X-Throw-At=Request, Host=localhost:33363], id=3a43af51-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:53:43.660 [Proxy-Worker-0-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="500 Internal Server Error" during request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:33363/foobar, headers=[X-Throw-At=Request, Host=localhost:33363], id=3a43af51-cc59-11e8-9327-0242ac1147ce}, clientAddress=/127.0.0.1:45952
com.hotels.styx.api.plugins.spi.PluginException: bad-plugin: Throw exception at Request
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.intercept(InstrumentedPlugin.java:96) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline.handle(StandardHttpPipeline.java:54) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.HttpInterceptorPipeline.handle(HttpInterceptorPipeline.java:59) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:91) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.RequestEnrichingInterceptor.intercept(RequestEnrichingInterceptor.java:47) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.HopByHopHeadersRemovingInterceptor.intercept(HopByHopHeadersRemovingInterceptor.java:38) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.ViaHeaderAppendingInterceptor.intercept(ViaHeaderAppendingInterceptor.java:43) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.UnexpectedRequestContentLengthRemover.intercept(UnexpectedRequestContentLengthRemover.java:33) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.ConfigurationContextResolverInterceptor.intercept(ConfigurationContextResolverInterceptor.java:42) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline.handle(StandardHttpPipeline.java:54) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.HttpInterceptorPipeline.handle(HttpInterceptorPipeline.java:59) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.connectors.HttpPipelineHandler.onLegitimateRequest(HttpPipelineHandler.java:257) [styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.connectors.HttpPipelineHandler.lambda$createStateMachine$0(HttpPipelineHandler.java:144) [styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine$StateEventHandler.lambda$new$0(StateMachine.java:134) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine.handle(StateMachine.java:73) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.FsmEventProcessor.submit(FsmEventProcessor.java:49) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.QueueDrainingEventProcessor.submit(QueueDrainingEventProcessor.java:55) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.connectors.HttpPipelineHandler.channelRead0(HttpPipelineHandler.java:209) [styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.connectors.HttpPipelineHandler.channelRead0(HttpPipelineHandler.java:93) [styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: java.lang.RuntimeException: Throw exception at Request
	at com.hotels.styx.proxy.LoggingSpec$BadPlugin.intercept(LoggingSpec.scala:143) ~[test-classes/:na]
	at com.hotels.styx.proxy.plugin.NamedPlugin.intercept(NamedPlugin.java:93) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.intercept(InstrumentedPlugin.java:91) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	... 76 common frames omitted
[32m- Should include request and cause when plugin request processing fails[0m
[32mStyx response error logging[0m
08:53:43.808 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=3a503272-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.api.plugins.spi.PluginException: bad-plugin: Throw exception at Response, state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:33363/foobar, headers=[X-Throw-At=Response, Host=localhost:33363], id=3a503272-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:53:43.822 [Proxy-Worker-1-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="500 Internal Server Error" during request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:33363/foobar, headers=[X-Throw-At=Response, Host=localhost:33363], id=3a503272-cc59-11e8-9327-0242ac1147ce}, clientAddress=/127.0.0.1:45954
com.hotels.styx.api.plugins.spi.PluginException: bad-plugin: Throw exception at Response
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.recordAndWrapError(InstrumentedPlugin.java:112) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.lambda$intercept$3(InstrumentedPlugin.java:93) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onError(OperatorOnErrorResumeNextViaFunction.java:140) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onError(OperatorDoOnEach.java:72) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onError(OperatorMap.java:85) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:70) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.observers.SafeSubscriber.onNext(SafeSubscriber.java:139) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onNext(OperatorOnErrorResumeNextViaFunction.java:154) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.observers.Subscribers$5.onNext(Subscribers.java:235) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.observers.Subscribers$5.onNext(Subscribers.java:235) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.emitScalar(OperatorMerge.java:393) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.tryEmit(OperatorMerge.java:355) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:840) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at com.hotels.styx.client.netty.connectionpool.NettyToStyxResponsePropagator.channelRead0(NettyToStyxResponsePropagator.java:143) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.connectionpool.RequestsToOriginMetricsCollector.channelRead(RequestsToOriginMetricsCollector.java:69) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:297) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:413) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.connectionpool.TimeToFirstByteHandler.channelRead(TimeToFirstByteHandler.java:54) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: java.lang.RuntimeException: Throw exception at Response
	at com.hotels.styx.proxy.LoggingSpec$BadPlugin$$anonfun$intercept$1.apply(LoggingSpec.scala:146) ~[test-classes/:na]
	at com.hotels.styx.proxy.LoggingSpec$BadPlugin$$anonfun$intercept$1.apply(LoggingSpec.scala:146) ~[test-classes/:na]
	at scala.compat.java8.functionConverterImpls.AsJavaFunction.apply(FunctionConverters.scala:262) ~[scala-java8-compat_2.11-0.8.0.jar:na]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:66) ~[rxjava-1.1.6.jar:1.1.6]
	... 57 common frames omitted
Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: com.hotels.styx.api.HttpResponse.class
	at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:109) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:70) ~[rxjava-1.1.6.jar:1.1.6]
	... 57 common frames omitted
[32m- Should include request and cause, when plugin response processing fails[0m
Styx http port was: [33363]
Styx https port was: [-1]
08:53:43.934 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:43.939 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:43.939 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:43.940 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:43.940 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
08:53:43.954 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
[32mProxySpec:[0m
08:53:43.956 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:43.956 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:43.957 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:43.958 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@59532566
08:53:43.959 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:43.963 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:43.964 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:43.964 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:43.965 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:43.966 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:43.966 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:43.969 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:45485
08:53:43.971 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:43.973 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:41547
08:53:43.974 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
Styx http port is: [45485]
Styx https port is: [-1]
08:53:43.976 [MockServer STARTING] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:43.978 [MockServer-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:34689
08:53:43.982 [MockServer STARTING] INFO  com.hotels.styx.MockServer - mock server started on port 34689
[32mStandard behaviour[0m
08:53:43.984 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf]
08:53:43.985 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:43.986 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:43.987 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=default-app:generic-app-01
08:53:43.988 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:43.988 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:43.988 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:43.990 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:43.994 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52]
08:53:44.001 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=default-app:generic-app-01
08:53:44.003 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:53:44.004 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b]
08:53:44.006 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.006 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.007 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:generic-app-01
08:53:44.008 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.008 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.009 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:44.010 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32m- should respond with response from origin + expected enhancements[0m
[32mAdvertising http 1.1[0m
08:53:44.071 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e]
08:53:44.072 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=app-1:generic-app-01
08:53:44.074 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:53:44.077 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49]
08:53:44.077 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.078 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.079 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=default-app:generic-app-01
08:53:44.080 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.080 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.081 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:44.082 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:44.088 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217]
08:53:44.089 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=default-app:generic-app-01
08:53:44.090 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:53:44.093 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7]
08:53:44.094 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.094 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.095 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:generic-app-01
08:53:44.096 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.097 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.097 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:44.098 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:44.105 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=http10, path=/http10, origins=[http10:localhost:34689:localhost:34689], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f]
08:53:44.106 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.106 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.107 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=http10:localhost:34689
08:53:44.108 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.109 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.109 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/http10 current routes=[/http10, /]
08:53:44.111 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=http10, path=/http10, origins=[http10:localhost:34689:localhost:34689], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32m- should advertise HTTP/1.1 when proxies HTTP/1.0 request.[0m
[32mHandling responses without body[0m
08:53:44.148 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=http10, path=/http10, origins=[http10:localhost:34689:localhost:34689], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}, BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004]
08:53:44.150 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=http10:localhost:34689
08:53:44.152 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=app-1:generic-app-01
08:53:44.153 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=http10, path=/http10, origins=[http10:localhost:34689:localhost:34689], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}, BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:53:44.157 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783]
08:53:44.158 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.159 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.160 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=default-app:generic-app-01
08:53:44.161 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.162 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.162 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:44.163 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:44.171 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
[32m- should respond to HEAD with bodiless response[0m
08:53:44.209 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf]
08:53:44.209 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=default-app:generic-app-01
08:53:44.211 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:53:44.214 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b]
08:53:44.214 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.215 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.216 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=default-app:generic-app-01
08:53:44.217 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.217 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.217 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:44.218 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:44.271 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/204, headers=[Host=localhost:45485, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=3a9ec7a7-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=3a9ec7a7-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.client.BadHttpResponseException exceptionMessage="Bad HTTP Response received from origin. origin=default-app:generic-app-01:localhost:41579."
08:53:44.279 [Styx-Client-Worker-0-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Error proxying request. request=HttpRequest{version=HTTP/1.1, method=GET, uri=/204, headers=[Host=localhost:45485], id=3a9ec7a7-cc59-11e8-9327-0242ac1147ce} response=HttpResponse{version=HTTP/1.1, status=204 No Content, headers=[Server=Jetty(6.1.26), X-Styx-Origin-Id=generic-app-01, Content-Length=0, Via=1.1 styx]} cause={}
com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=default-app:generic-app-01:localhost:41579.
	at com.hotels.styx.client.netty.connectionpool.NettyToStyxResponsePropagator.channelRead0(NettyToStyxResponsePropagator.java:129) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.connectionpool.RequestsToOriginMetricsCollector.channelRead(RequestsToOriginMetricsCollector.java:69) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.connectionpool.TimeToFirstByteHandler.channelRead(TimeToFirstByteHandler.java:54) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: java.lang.IllegalArgumentException: invalid version format: 0
	at io.netty.handler.codec.http.HttpVersion.<init>(HttpVersion.java:121) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpVersion.valueOf(HttpVersion.java:76) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpResponseDecoder.createMessage(HttpResponseDecoder.java:118) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.decode(HttpObjectDecoder.java:219) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpClientCodec$Decoder.decode(HttpClientCodec.java:202) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 18 common frames omitted
08:53:44.284 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cee53dc]
[32m- should remove body from the 204 No Content responses[0m
08:53:44.285 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=default-app:generic-app-01
08:53:44.287 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
[33m- should remove body from the 304 Not Modified responses !!! IGNORED !!![0m
[32m  backend services unavailable[0m
08:53:44.289 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cee53dc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@290aeb20]
08:53:44.291 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.291 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.292 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=default-app:generic-app-01
08:53:44.293 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.293 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.293 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:44.294 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:44.304 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cee53dc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@290aeb20, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5cbd159f]
08:53:44.304 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=default-app:generic-app-01
08:53:44.307 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:53:44.310 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cee53dc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@290aeb20, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5cbd159f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b05a99b]
08:53:44.311 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.311 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.312 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:generic-app-01
08:53:44.313 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.314 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.314 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:44.314 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:44.324 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=http10, path=/unavailable, origins=[http10:app-1-01:localhost:45477], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cee53dc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@290aeb20, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5cbd159f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b05a99b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@351e414e]
08:53:44.324 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.324 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.325 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=http10:app-1-01
08:53:44.327 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.327 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.328 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/unavailable current routes=[/unavailable, /]
08:53:44.330 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=http10, path=/unavailable, origins=[http10:app-1-01:localhost:45477], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:44.359 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/unavailable, headers=[Host=localhost:45485, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=3aafb798-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=3aafb798-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.api.exceptions.OriginUnreachableException exceptionMessage="Origin server is unreachable. Could not connect to origin=http10:app-1-01:localhost:45477"
08:53:44.360 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=3aafb798-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.api.exceptions.OriginUnreachableException: Origin server is unreachable. Could not connect to origin=http10:app-1-01:localhost:45477, state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=/unavailable, headers=[Host=localhost:45485], id=3aafb798-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:53:44.365 [Proxy-Worker-4-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="502 Bad Gateway", exception="com.hotels.styx.api.exceptions.OriginUnreachableException: Origin server is unreachable. Could not connect to origin=http10:app-1-01:localhost:45477, cause="io.netty.channel.AbstractChannel$AnnotatedConnectException: syscall:getsockopt(..) failed: Connection refused: localhost/127.0.0.1:45477", cause="io.netty.channel.unix.Errors$NativeConnectException: syscall:getsockopt(..) failed: Connection refused""
[32m  - should return a 502 BAD_GATEWAY if the connection to the backend is refused[0m
[32m  no configured backend service[0m
08:53:44.369 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=http10, path=/unavailable, origins=[http10:app-1-01:localhost:45477], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}, BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cee53dc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@290aeb20, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5cbd159f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b05a99b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@351e414e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3d98d138]
08:53:44.370 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=http10:app-1-01
08:53:44.373 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=app-1:generic-app-01
08:53:44.377 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=http10, path=/unavailable, origins=[http10:app-1-01:localhost:45477], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}, BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:53:44.383 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cee53dc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@290aeb20, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5cbd159f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b05a99b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@351e414e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3d98d138, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2f2d52ef]
08:53:44.384 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.384 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.385 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=default-app:generic-app-01
08:53:44.386 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.387 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.387 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:44.389 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:44.398 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cee53dc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@290aeb20, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5cbd159f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b05a99b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@351e414e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3d98d138, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2f2d52ef, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cec79d3]
08:53:44.399 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=default-app:generic-app-01
08:53:44.401 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:53:44.409 [Proxy-Worker-5-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=3ab7cde9-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.server.NoServiceConfiguredException: No backend services configured for path: '/nonexistant-service', state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=/nonexistant-service, headers=[Host=localhost:45485], id=3ab7cde9-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:53:44.413 [Proxy-Worker-5-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="502 Bad Gateway", exception="com.hotels.styx.server.NoServiceConfiguredException: No backend services configured for path: '/nonexistant-service'"
resp: FullHttpResponse{version=HTTP/1.1, status=502 Bad Gateway, headers=[X-Styx-Info=noJvmRouteSet;3ab7cde9-cc59-11e8-9327-0242ac1147ce, Content-Length=29]}
body: Site temporarily unavailable.
[32m  - should return a 502 BAD_GATEWAY if a backend service is not configured[0m
[32m  request url handling[0m
08:53:44.416 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cee53dc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@290aeb20, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5cbd159f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b05a99b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@351e414e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3d98d138, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2f2d52ef, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cec79d3, com.hotels.styx.admin.dashboard.DashboardData$Downstream@64b70919]
08:53:44.417 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.417 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.418 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=default-app:generic-app-01
08:53:44.419 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.419 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.419 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:44.420 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32m  - should substitute URL path according to configuration[0m
08:53:44.474 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cee53dc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@290aeb20, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5cbd159f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b05a99b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@351e414e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3d98d138, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2f2d52ef, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cec79d3, com.hotels.styx.admin.dashboard.DashboardData$Downstream@64b70919, com.hotels.styx.admin.dashboard.DashboardData$Downstream@50acf55d]
08:53:44.477 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=default-app:generic-app-01
08:53:44.478 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:53:44.481 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cee53dc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@290aeb20, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5cbd159f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b05a99b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@351e414e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3d98d138, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2f2d52ef, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cec79d3, com.hotels.styx.admin.dashboard.DashboardData$Downstream@64b70919, com.hotels.styx.admin.dashboard.DashboardData$Downstream@50acf55d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cae7b8b]
08:53:44.482 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.482 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.483 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=default-app:generic-app-01
08:53:44.484 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.484 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.485 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:44.486 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32m  - should encode the path[0m
08:53:44.531 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cee53dc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@290aeb20, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5cbd159f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b05a99b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@351e414e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3d98d138, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2f2d52ef, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cec79d3, com.hotels.styx.admin.dashboard.DashboardData$Downstream@64b70919, com.hotels.styx.admin.dashboard.DashboardData$Downstream@50acf55d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cae7b8b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@74abbb]
08:53:44.532 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=default-app:generic-app-01
08:53:44.533 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:53:44.537 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dc2de84, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a0659ac, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58d63b16, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7c4fc2bf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68dcfd52, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b29d52b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4a68135e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46678e49, com.hotels.styx.admin.dashboard.DashboardData$Downstream@35636217, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1549bba7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a9b0a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@48535004, com.hotels.styx.admin.dashboard.DashboardData$Downstream@610df783, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2257fadf, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7144655b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cee53dc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@290aeb20, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5cbd159f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b05a99b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@351e414e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3d98d138, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2f2d52ef, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cec79d3, com.hotels.styx.admin.dashboard.DashboardData$Downstream@64b70919, com.hotels.styx.admin.dashboard.DashboardData$Downstream@50acf55d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cae7b8b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@74abbb, com.hotels.styx.admin.dashboard.DashboardData$Downstream@64a4dd8d]
08:53:44.538 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.539 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.540 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=default-app:generic-app-01
08:53:44.541 [ScalaTest-main-running-ProxySpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.541 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.541 [ScalaTest-main-running-ProxySpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:44.542 [ScalaTest-main-running-ProxySpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:41579], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:44.589 [MockServer STOPPING] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:44.590 [MockServer STOPPING] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:44.595 [MockServer STOPPING] INFO  com.hotels.styx.MockServer - mock server running on port 34689 stopped
[32m  - should pass url with allowed chars in the path without encoding[0m
Styx http port was: [45485]
Styx https port was: [-1]
08:53:44.699 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:44.703 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:44.707 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:44.709 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:44.709 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
08:53:44.722 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:44.724 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}, HttpsConnectorConfig{port=0, sslProvider=JDK, certificateFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt, certificateKeyFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key, sessionTimeoutMillis=300000, sessionCacheSize=0, cipherSuites=[], protocols=}] name=Proxy
08:53:44.727 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
[32mEmptyTlsProtocolsListSpec:[0m
08:53:44.744 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:44.745 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@f1a45f8
08:53:44.746 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:44.750 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:44.751 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:44.751 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:44.751 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:44.753 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:44.753 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:44.756 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:38525
08:53:44.760 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:40791
08:53:44.760 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:44.762 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:34987
08:53:44.763 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 10ms
Styx http port is: [38525]
Styx https port is: [40791]
08:53:44.765 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=https-app, path=/secure, origins=[https-app:generic-app:localhost:38675], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@2add4d24, protocols=[], cipherSuites=[]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@3f93e4a8, com.hotels.styx.admin.dashboard.DashboardData$Downstream@12b5454f, com.hotels.styx.admin.dashboard.DashboardDataSupplier@5445f5ba, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1431267b]
08:53:44.765 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.766 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:44.767 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=https-app:generic-app
08:53:44.768 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:44.768 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:44.768 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/secure current routes=[/secure]
08:53:44.769 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=https-app, path=/secure, origins=[https-app:generic-app:localhost:38675], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@2add4d24, protocols=[], cipherSuites=[]}}], removed=[], updated=[]}
[32mEmpty TLS protocols list[0m
08:53:45.166 [mock-stub-generic-app-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - generic-app received: https://localhost:40791/secure
[]
08:53:45.234 [mock-stub-generic-app-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - generic-app received: https://localhost:40791/secure
[]
[32m- Empty TLS protocols list activates all supported protocols[0m
08:53:45.248 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:45.249 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:45.249 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:45.249 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [38525]
Styx https port was: [40791]
08:53:45.250 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:45.254 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:45.255 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:45.256 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:45.256 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mOriginClosesConnectionSpec:[0m
08:53:45.270 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:45.272 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:45.272 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:45.273 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:45.273 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@60acd609
08:53:45.274 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:45.279 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:45.280 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:45.281 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:45.281 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:45.282 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:45.283 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:45.286 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:42503
08:53:45.288 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:45.289 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:36843
08:53:45.290 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
Styx http port is: [42503]
Styx https port is: [-1]
08:53:45.292 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=defaultApp, path=/, origins=[defaultApp:NettyOrigin:localhost:32833], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1b15f922, com.hotels.styx.admin.dashboard.DashboardData$Downstream@37ce3644, com.hotels.styx.admin.dashboard.DashboardDataSupplier@4b869331, com.hotels.styx.admin.dashboard.DashboardData$Downstream@38018b62]
08:53:45.292 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:45.293 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:45.293 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=defaultApp:NettyOrigin
08:53:45.294 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:45.295 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:45.295 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:45.295 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=defaultApp, path=/, origins=[defaultApp:NettyOrigin:localhost:32833], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:45.639 [ScalaTest-main-running-OriginClosesConnectionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:47.149 [Health-Check-Monitor-app-Client-Worker-0-Thread] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="app=app1", change="ACTIVE->INACTIVE"
08:53:47.150 [Health-Check-Monitor-app-Client-Worker-0-Thread] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="app=app2", change="ACTIVE->INACTIVE"
[32m- Determines response content length from server closing the connection.[0m
08:53:48.107 [ScalaTest-main-running-OriginClosesConnectionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:48.110 [ScalaTest-main-running-OriginClosesConnectionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:NettyOrigin
08:53:50.124 [Styx-Client-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/foo/3, headers=[Host=localhost:32833], id=9eb67970-3d11-450f-97ec-fafc600493ca} exceptionClass=com.hotels.styx.api.exceptions.ResponseTimeoutException exceptionMessage="No response from origin. origin=generic-app:NettyOrigin:localhost:32833, reason=channelClosed, bytesReceived=18432, chunksReceived=17, bytesEmitted=1005, chunksEmitted=1"
08:53:50.127 [Styx-Client-Client-Worker-0-Thread] WARN  c.h.s.c.n.c.FlowControllingHttpContentProducer - message="Inappropriate event=UnsubscribeEvent", prefix=localhost/127.0.0.1:32833 -> /127.0.0.1:47874, Request(method=GET, url=/foo/3, id=9eb67970-3d11-450f-97ec-fafc600493ca), state=TERMINATED, receivedChunks=17, receivedBytes=18432, emittedChunks=1, emittedBytes=1005
[32m- Emits ResponseTimeoutException when content subscriber stops requesting data[0m
08:53:50.140 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:50.144 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [42503]
Styx https port was: [-1]
08:53:50.144 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:50.146 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:50.146 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:50.147 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:50.147 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mUnwiseCharactersSpec:[0m
08:53:50.166 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:50.168 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:50.168 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:50.171 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:50.171 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@174e1b69
08:53:50.172 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:50.176 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:50.178 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:50.178 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:50.178 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:50.183 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:50.184 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:50.187 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:33759
08:53:50.189 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:50.190 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:46329
08:53:50.191 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
Styx http port is: [33759]
Styx https port is: [-1]
08:53:50.193 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app1, path=/, origins=[app1:generic-app-01:localhost:35073], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@34819867, com.hotels.styx.admin.dashboard.DashboardData$Downstream@118102ee, com.hotels.styx.admin.dashboard.DashboardDataSupplier@48cd9a2c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@771d1ffb]
08:53:50.194 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:50.194 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:50.195 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app1:generic-app-01
08:53:50.197 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:50.197 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:53:50.197 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:50.199 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app1, path=/, origins=[app1:generic-app-01:localhost:35073], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mHandling of unwise characters[0m
08:53:50.212 [Proxy-Worker-0-Thread] WARN  c.h.s.p.e.ConfigurableUnwiseCharsEncoder - Value contains unwise chars. you should fix this. raw=/url/unwiseQQblah, escaped=/url/unwise%51%51blah: 
[32m- Should escape all unwise characters in URL as per styx configuration[0m
Styx http port was: [33759]
Styx https port was: [-1]
08:53:50.358 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:50.362 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:50.362 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:50.363 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:50.363 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mCipherSuitesSpec:[0m
08:53:50.382 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:50.384 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:50.384 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:50.385 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:50.385 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@162b3d47
08:53:50.387 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:50.387 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - MetricsHandler instantiated with no caching
08:53:50.391 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JVMMetricsHandler instantiated with no caching
08:53:50.392 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:50.392 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JsonHandler instantiated with cache expiration of PT10S
08:53:50.393 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:50.393 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:50.394 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:50.395 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:50.396 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:50.398 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:46643
08:53:50.401 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:50.402 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:42497
08:53:50.403 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 7ms
Styx http port is: [46643]
Styx https port is: [-1]
08:53:50.405 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appA, path=/compatible/, origins=[appA:appA-01:localhost:38715], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@2c768ada, protocols=[], cipherSuites=[TLS_RSA_WITH_AES_128_CBC_SHA]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@c1fca2a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5533dc72, com.hotels.styx.admin.dashboard.DashboardDataSupplier@7c447c76, com.hotels.styx.admin.dashboard.DashboardData$Downstream@64fc097e]
08:53:50.406 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:50.407 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:50.408 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appA:appA-01
08:53:50.409 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={"proxy":{"connectors":{"http":{"port":0}}},"admin":{"connectors":{"http":{"port":0}}},"request-logging":{"enabled":true}}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:50.409 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:53:50.409 [pool-339-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appA, activeOrigins=[appA:appA-01:localhost:38715], inactiveOrigins=[], disabledOrigins=[]}
08:53:50.409 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/compatible/ current routes=[/compatible/]
08:53:50.410 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appA, path=/compatible/, origins=[appA:appA-01:localhost:38715], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@2c768ada, protocols=[], cipherSuites=[TLS_RSA_WITH_AES_128_CBC_SHA]}}], removed=[], updated=[]}
08:53:50.411 [pool-339-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appA, activeOrigins=[appA:appA-01:localhost:38715], inactiveOrigins=[], disabledOrigins=[]}
08:53:50.412 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appB, path=/nonCompatible/, origins=[appB:appB-01:localhost:37575], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@664e5dee, protocols=[], cipherSuites=[TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@c1fca2a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5533dc72, com.hotels.styx.admin.dashboard.DashboardDataSupplier@7c447c76, com.hotels.styx.admin.dashboard.DashboardData$Downstream@64fc097e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@431f1eaf]
08:53:50.412 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:50.413 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:50.414 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appB:appB-01
08:53:50.414 [pool-339-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appB, activeOrigins=[appB:appB-01:localhost:37575], inactiveOrigins=[], disabledOrigins=[]}
08:53:50.414 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={"proxy":{"connectors":{"http":{"port":0}}},"admin":{"connectors":{"http":{"port":0}}},"request-logging":{"enabled":true}}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:50.415 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:53:50.415 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/nonCompatible/ current routes=[/nonCompatible/, /compatible/]
08:53:50.416 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appB, path=/nonCompatible/, origins=[appB:appB-01:localhost:37575], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@664e5dee, protocols=[], cipherSuites=[TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256]}}], removed=[], updated=[]}
08:53:50.418 [pool-339-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appB, activeOrigins=[appB:appB-01:localhost:37575], inactiveOrigins=[], disabledOrigins=[]}
08:53:50.419 [pool-339-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appA, activeOrigins=[appA:appA-01:localhost:38715], inactiveOrigins=[], disabledOrigins=[]}
[32mCipher Suite Selection for Backends[0m
08:53:50.526 [mock-stub-appA-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - appA-01 received: http://localhost:46643/compatible/a
[]
08:53:50.571 [mock-admin-appA-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 99, 111, 109, 112, 97, 116, 105, 98, 108, 101, 47, 97, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 44, 10, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 88, 45, 70, 111, 114, 119, 97, 114, 100, 101, 100, 45, 80, 114, 111, 116, 111, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 109, 97, 116, 99, 104, 101, 115, 34, 32, 58, 32, 34, 104, 116, 116, 112, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
[32m- Proxies to a TLS origin with compatible cipher suites.[0m
08:53:50.763 [mock-stub-appB-01-Worker-0-Thread] INFO  c.h.s.s.n.c.HttpPipelineHandler - SSL handshake failure from incoming connection cause="no cipher suites in common", serverAddress=/127.0.0.1:37575, clientAddress=/127.0.0.1:45820
08:53:50.765 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:46643/nonCompatible/b, headers=[Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=3e66f350-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http, Host=localhost:46643], id=3e66f350-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.client.BadHttpResponseException exceptionMessage="Bad HTTP Response received from origin. origin=appB:appB-01:localhost:37575."
08:53:50.765 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=3e66f350-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=appB:appB-01:localhost:37575., state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:46643/nonCompatible/b, headers=[Host=localhost:46643], id=3e66f350-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:53:50.769 [Styx-Client-Worker-0-Thread] WARN  c.h.s.c.n.c.FlowControllingHttpContentProducer - message="Inappropriate event=ChannelInactiveEvent", prefix=localhost/127.0.0.1:37575 -> /127.0.0.1:45820, Request(method=GET, url=http://localhost:46643/nonCompatible/b, id=3e66f350-cc59-11e8-9327-0242ac1147ce), state=TERMINATED, receivedChunks=0, receivedBytes=0, emittedChunks=0, emittedBytes=0
08:53:50.771 [Proxy-Worker-1-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="502 Bad Gateway", exception="com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=appB:appB-01:localhost:37575., cause="io.netty.handler.codec.DecoderException: javax.net.ssl.SSLException: Received fatal alert: handshake_failure", cause="javax.net.ssl.SSLException: Received fatal alert: handshake_failure""
08:53:50.784 [mock-admin-appB-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 110, 111, 110, 67, 111, 109, 112, 97, 116, 105, 98, 108, 101, 47, 98, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 125]
[32m- Fails to handshake with an origin with incompatible cipher suite.[0m
08:53:50.792 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:50.793 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:50.794 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:50.794 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:50.794 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:50.795 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:50.795 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:50.796 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [46643]
Styx https port was: [-1]
08:53:50.796 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:50.802 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:50.802 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:50.807 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:50.807 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mPluginToggleSpec:[0m
08:53:50.819 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:50.821 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin pluginUnderTest instrumented
08:53:50.821 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:50.821 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:50.822 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:50.822 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@186cb891
08:53:50.823 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:50.827 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:50.828 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:50.828 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:50.829 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:50.830 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:50.830 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:50.832 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:39405
08:53:50.835 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:50.837 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:45095
08:53:50.837 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 7ms
Styx http port is: [39405]
Styx https port is: [-1]
08:53:50.839 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:45679], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@4e73b552, com.hotels.styx.admin.dashboard.DashboardData$Downstream@221dad51, com.hotels.styx.admin.dashboard.DashboardDataSupplier@2cec704c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@771cbb1a]
08:53:50.840 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:50.840 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:50.841 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:generic-app-01
08:53:50.842 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:50.842 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:50.842 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:53:50.843 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:45679], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mstyx admin server[0m
[32m- Should move the plugin to disabled when toggled[0m
[32m- Plugin should not be called when disabled[0m
[32m- Plugin can be re-enabled[0m
Styx http port was: [39405]
Styx https port was: [-1]
08:53:51.128 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:51.131 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:51.131 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:51.132 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:51.132 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mOriginsCommandsSpec:[0m
08:53:51.145 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:51.148 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:51.148 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:51.150 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:51.150 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@451882b2
08:53:51.151 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:51.156 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:51.158 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:51.158 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:51.158 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:51.160 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:51.160 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:51.163 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:46107
08:53:51.165 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:51.166 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:43367
08:53:51.167 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 7ms
Styx http port is: [46107]
Styx https port is: [-1]
08:53:51.169 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/appOne/, origins=[appOne:appOne-01:localhost:38345], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/appOne/version.txt], intervalMillis=100, timeoutMillis=2000, healthyThreshold=1, unhealthyThreshold=1}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@6d469831, com.hotels.styx.admin.dashboard.DashboardData$Downstream@74db12c2, com.hotels.styx.admin.dashboard.DashboardDataSupplier@2ff15f8c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7ea899a9]
08:53:51.170 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:51.170 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:51.172 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-01
08:53:51.173 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:51.174 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:51.174 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/appOne/ current routes=[/appOne/]
08:53:51.175 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/appOne/, origins=[appOne:appOne-01:localhost:38345], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/appOne/version.txt], intervalMillis=100, timeoutMillis=2000, healthyThreshold=1, unhealthyThreshold=1}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:51.178 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appTwo, path=/appTwo/, origins=[appTwo:appTwo-01:localhost:35901], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/appOne/version.txt], intervalMillis=100, timeoutMillis=2000, healthyThreshold=1, unhealthyThreshold=1}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@6d469831, com.hotels.styx.admin.dashboard.DashboardData$Downstream@74db12c2, com.hotels.styx.admin.dashboard.DashboardDataSupplier@2ff15f8c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7ea899a9, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68b58644]
08:53:51.178 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:51.179 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:51.181 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appTwo:appTwo-01
08:53:51.182 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:51.183 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:51.183 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/appTwo/ current routes=[/appOne/, /appTwo/]
08:53:51.184 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appTwo, path=/appTwo/, origins=[appTwo:appTwo-01:localhost:35901], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/appOne/version.txt], intervalMillis=100, timeoutMillis=2000, healthyThreshold=1, unhealthyThreshold=1}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mAs a tech ops person [0m
[32mI want to be able to enable or disable an origin [0m
[32mSo I can deploy to it or work on it. [0m
[32mFeature: Origins Admins[0m
08:53:51.222 [Health-Check-Monitor-appTwo-Client-Worker-0-Thread] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="appTwo=appTwo-01", change="ACTIVE->INACTIVE"
08:53:51.250 [pool-365-thread-1] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="appOne=appOne-01", change="ACTIVE->DISABLED"
08:53:51.258 [Proxy-Worker-1-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=3ecce12b-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.api.exceptions.NoAvailableHostsException: No hosts available for application appOne, state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:46107/appOne/, headers=[Host=localhost:46107], id=3ecce12b-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:53:51.259 [Proxy-Worker-1-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="502 Bad Gateway", exception="com.hotels.styx.api.exceptions.NoAvailableHostsException: No hosts available for application appOne"
[32m  Scenario: Disable a previously active origin[0m
[32m    Given an active origin [0m
[32m    When a disable command is issued [0m
[32m    Then no more traffic should be routed [0m
[32m    And origins status page shows the origin as disabled [0m
08:53:51.299 [pool-365-thread-1] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="appOne=appOne-01", change="DISABLED->INACTIVE"
08:53:51.307 [Health-Check-Monitor-appOne-Client-Worker-0-Thread] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="appOne=appOne-01", change="INACTIVE->ACTIVE"
[32m  Scenario: Enable a previously disabled origin[0m
[32m    Given a disabled origin [0m
[32m    When a enable command is issued [0m
[32m    Then traffic should be routed to the newly enabled origin [0m
[32m    And origins status page shows the origin as active [0m
[32m  Scenario: Only POST method is allowed[0m
[32m    When a command with GET method is issued [0m
[32m    Then A Method not allowed error should be shown [0m
after test: {"appOne":{"appId":"appOne","activeOrigins":[{"id":"appOne-01","host":"localhost:38345"}],"inactiveOrigins":[],"disabledOrigins":[]},"appTwo":{"appId":"appTwo","activeOrigins":[],"inactiveOrigins":[{"id":"appTwo-01","host":"localhost:35901"}],"disabledOrigins":[]}}
Styx metrics: {"version":"3.1.3","gauges":{"jvm.bufferpool.direct.capacity":{"value":375},"jvm.bufferpool.direct.count":{"value":2},"jvm.bufferpool.direct.used":{"value":376},"jvm.bufferpool.mapped.capacity":{"value":0},"jvm.bufferpool.mapped.count":{"value":0},"jvm.bufferpool.mapped.used":{"value":0},"jvm.gc.PS-MarkSweep.count":{"value":3},"jvm.gc.PS-MarkSweep.time":{"value":243},"jvm.gc.PS-Scavenge.count":{"value":6},"jvm.gc.PS-Scavenge.time":{"value":442},"jvm.memory.heap.committed":{"value":1221591040},"jvm.memory.heap.init":{"value":528482304},"jvm.memory.heap.max":{"value":7499415552},"jvm.memory.heap.usage":{"value":0.0665647487512371},"jvm.memory.heap.used":{"value":499196712},"jvm.memory.non-heap.committed":{"value":90046464},"jvm.memory.non-heap.init":{"value":2555904},"jvm.memory.non-heap.max":{"value":-1},"jvm.memory.non-heap.usage":{"value":-8.7266744E7},"jvm.memory.non-heap.used":{"value":87267416},"jvm.memory.pools.Code-Cache.committed":{"value":23527424},"jvm.memory.pools.Code-Cache.init":{"value":2555904},"jvm.memory.pools.Code-Cache.max":{"value":251658240},"jvm.memory.pools.Code-Cache.usage":{"value":0.09283040364583334},"jvm.memory.pools.Code-Cache.used":{"value":23361536},"jvm.memory.pools.Compressed-Class-Space.committed":{"value":7995392},"jvm.memory.pools.Compressed-Class-Space.init":{"value":0},"jvm.memory.pools.Compressed-Class-Space.max":{"value":1073741824},"jvm.memory.pools.Compressed-Class-Space.usage":{"value":0.007062278687953949},"jvm.memory.pools.Compressed-Class-Space.used":{"value":7583064},"jvm.memory.pools.Metaspace.committed":{"value":58589184},"jvm.memory.pools.Metaspace.init":{"value":0},"jvm.memory.pools.Metaspace.max":{"value":-1},"jvm.memory.pools.Metaspace.usage":{"value":0.9613239194456096},"jvm.memory.pools.Metaspace.used":{"value":56323184},"jvm.memory.pools.PS-Eden-Space.committed":{"value":598736896},"jvm.memory.pools.PS-Eden-Space.init":{"value":132120576},"jvm.memory.pools.PS-Eden-Space.max":{"value":2754084864},"jvm.memory.pools.PS-Eden-Space.usage":{"value":0.07773754643458947},"jvm.memory.pools.PS-Eden-Space.used":{"value":214095800},"jvm.memory.pools.PS-Eden-Space.used-after-gc":{"value":0},"jvm.memory.pools.PS-Old-Gen.committed":{"value":601358336},"jvm.memory.pools.PS-Old-Gen.init":{"value":352321536},"jvm.memory.pools.PS-Old-Gen.max":{"value":5624561664},"jvm.memory.pools.PS-Old-Gen.usage":{"value":0.04686872466654141},"jvm.memory.pools.PS-Old-Gen.used":{"value":263616032},"jvm.memory.pools.PS-Old-Gen.used-after-gc":{"value":141390384},"jvm.memory.pools.PS-Survivor-Space.committed":{"value":21495808},"jvm.memory.pools.PS-Survivor-Space.init":{"value":22020096},"jvm.memory.pools.PS-Survivor-Space.max":{"value":21495808},"jvm.memory.pools.PS-Survivor-Space.usage":{"value":0.999491621808308},"jvm.memory.pools.PS-Survivor-Space.used":{"value":21484880},"jvm.memory.pools.PS-Survivor-Space.used-after-gc":{"value":21484880},"jvm.memory.total.committed":{"value":1311703040},"jvm.memory.total.init":{"value":531038208},"jvm.memory.total.max":{"value":7499415551},"jvm.memory.total.used":{"value":586471280},"jvm.netty.pooled-allocator.usedDirectMemory":{"value":536870912},"jvm.netty.pooled-allocator.usedHeapMemory":{"value":0},"jvm.netty.unpooled-allocator.usedDirectMemory":{"value":7},"jvm.netty.unpooled-allocator.usedHeapMemory":{"value":0},"jvm.thread.blocked.count":{"value":0},"jvm.thread.count":{"value":268},"jvm.thread.daemon.count":{"value":13},"jvm.thread.deadlock.count":{"value":0},"jvm.thread.deadlocks":{"value":[]},"jvm.thread.new.count":{"value":0},"jvm.thread.runnable.count":{"value":188},"jvm.thread.terminated.count":{"value":0},"jvm.thread.timed_waiting.count":{"value":59},"jvm.thread.waiting.count":{"value":21},"jvm.uptime":{"value":20092},"jvm.uptime.formatted":{"value":"0d 0h 0m"},"origins.appOne.appOne-01.connectionspool.available-connections":{"value":1},"origins.appOne.appOne-01.connectionspool.busy-connections":{"value":0},"origins.appOne.appOne-01.connectionspool.connection-attempts":{"value":1},"origins.appOne.appOne-01.connectionspool.connection-failures":{"value":0},"origins.appOne.appOne-01.connectionspool.connections-closed":{"value":0},"origins.appOne.appOne-01.connectionspool.connections-terminated":{"value":0},"origins.appOne.appOne-01.connectionspool.pending-connections":{"value":0},"origins.appOne.appOne-01.connectionspool.ttfb":{"value":0},"origins.appOne.appOne-01.status":{"value":1},"origins.appTwo.appTwo-01.connectionspool.available-connections":{"value":0},"origins.appTwo.appTwo-01.connectionspool.busy-connections":{"value":0},"origins.appTwo.appTwo-01.connectionspool.connection-attempts":{"value":0},"origins.appTwo.appTwo-01.connectionspool.connection-failures":{"value":0},"origins.appTwo.appTwo-01.connectionspool.connections-closed":{"value":0},"origins.appTwo.appTwo-01.connectionspool.connections-terminated":{"value":0},"origins.appTwo.appTwo-01.connectionspool.pending-connections":{"value":0},"origins.appTwo.appTwo-01.connectionspool.ttfb":{"value":0},"origins.appTwo.appTwo-01.status":{"value":0}},"counters":{"connections.bytes-received":{"count":210},"connections.bytes-sent":{"count":608},"connections.eventloop.Proxy-Worker-0-Thread.registered-channel-count":{"count":0},"connections.eventloop.Proxy-Worker-1-Thread.registered-channel-count":{"count":0},"connections.eventloop.Proxy-Worker-2-Thread.registered-channel-count":{"count":0},"connections.total-connections":{"count":0},"origins.appOne.appOne-01.requests.cancelled":{"count":0},"origins.appOne.requests.cancelled":{"count":0},"requests.cancelled.responseError":{"count":1},"requests.outstanding":{"count":0},"requests.response.sent":{"count":3},"requests.response.status.1xx":{"count":0},"requests.response.status.2xx":{"count":2},"requests.response.status.3xx":{"count":0},"requests.response.status.4xx":{"count":0},"requests.response.status.500":{"count":0},"requests.response.status.501":{"count":0},"requests.response.status.502":{"count":1},"requests.response.status.503":{"count":0},"requests.response.status.504":{"count":0},"requests.response.status.521":{"count":0},"requests.response.status.5xx":{"count":1},"requests.response.status.unrecognised":{"count":0},"styx.exception.com_hotels_styx_api_exceptions_NoAvailableHostsException":{"count":1},"styx.response.status.502":{"count":1}},"histograms":{"connections.eventloop.Proxy-Worker-0-Thread.channels":{"count":2,"max":1,"mean":0.5,"min":0,"p50":1.0,"p75":1.0,"p95":1.0,"p98":1.0,"p99":1.0,"p999":1.0,"stddev":0.5},"connections.eventloop.Proxy-Worker-1-Thread.channels":{"count":2,"max":1,"mean":0.5,"min":0,"p50":1.0,"p75":1.0,"p95":1.0,"p98":1.0,"p99":1.0,"p999":1.0,"stddev":0.5},"connections.eventloop.Proxy-Worker-2-Thread.channels":{"count":2,"max":1,"mean":0.5,"min":0,"p50":1.0,"p75":1.0,"p95":1.0,"p98":1.0,"p99":1.0,"p999":1.0,"stddev":0.5},"connections.idleClosed":{"count":0,"max":0,"mean":0.0,"min":0,"p50":0.0,"p75":0.0,"p95":0.0,"p98":0.0,"p99":0.0,"p999":0.0,"stddev":0.0}},"meters":{"origins.appOne.appOne-01.requests.error-rate":{"count":0,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":0.0,"units":"events/second"},"origins.appOne.appOne-01.requests.response.status.200":{"count":2,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":12.528456117287748,"units":"events/second"},"origins.appOne.appOne-01.requests.response.status.5xx":{"count":0,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":0.0,"units":"events/second"},"origins.appOne.appOne-01.requests.success-rate":{"count":2,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":9.031799289900974,"units":"events/second"},"origins.appOne.requests.error-rate":{"count":0,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":0.0,"units":"events/second"},"origins.appOne.requests.response.status.200":{"count":2,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":12.508250441991539,"units":"events/second"},"origins.appOne.requests.success-rate":{"count":2,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":9.011084115555132,"units":"events/second"},"origins.appTwo.appTwo-01.requests.error-rate":{"count":0,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":0.0,"units":"events/second"},"origins.appTwo.appTwo-01.requests.success-rate":{"count":0,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":0.0,"units":"events/second"},"origins.appTwo.healthcheck.failure":{"count":3,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":17.245498605822156,"units":"events/second"},"origins.appTwo.requests.error-rate":{"count":0,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":0.0,"units":"events/second"},"origins.appTwo.requests.success-rate":{"count":0,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":0.0,"units":"events/second"},"origins.healthcheck.failure.appTwo":{"count":3,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":17.2271354395321,"units":"events/second"},"requests.error-rate.500":{"count":0,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":0.0,"units":"events/second"},"requests.received":{"count":3,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":12.148088847477403,"units":"events/second"},"styx.server.http.requests":{"count":3,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":18.27501232710498,"units":"events/second"},"styx.server.http.responses.200":{"count":2,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":12.8180875726103,"units":"events/second"},"styx.server.http.responses.502":{"count":1,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":7.236322204077225,"units":"events/second"}},"timers":{"origins.appOne.appOne-01.requests.latency":{"count":2,"max":4.358143,"mean":3.7887999999999997,"min":3.227648,"p50":3.2440309999999997,"p75":4.358143,"p95":4.358143,"p98":4.358143,"p99":4.358143,"p999":4.358143,"stddev":0.55296,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":8.657789102473755,"duration_units":"milliseconds","rate_units":"calls/second"},"origins.appOne.requests.latency":{"count":2,"max":4.521983,"mean":3.887104,"min":3.2604159999999998,"p50":3.276799,"p75":4.521983,"p95":4.521983,"p98":4.521983,"p99":4.521983,"p999":4.521983,"stddev":0.6184959999999999,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":8.411684989580719,"duration_units":"milliseconds","rate_units":"calls/second"},"origins.appTwo.appTwo-01.requests.latency":{"count":0,"max":0.0,"mean":"NaN","min":9.223372036854775E12,"p50":0.0,"p75":0.0,"p95":0.0,"p98":0.0,"p99":0.0,"p999":0.0,"stddev":"NaN","m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":0.0,"duration_units":"milliseconds","rate_units":"calls/second"},"origins.appTwo.requests.latency":{"count":0,"max":0.0,"mean":"NaN","min":9.223372036854775E12,"p50":0.0,"p75":0.0,"p95":0.0,"p98":0.0,"p99":0.0,"p999":0.0,"stddev":"NaN","m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":0.0,"duration_units":"milliseconds","rate_units":"calls/second"},"requests.latency":{"count":3,"max":8.978430999999999,"mean":5.8518186666666665,"min":2.523136,"p50":6.094847,"p75":6.094847,"p95":8.978430999999999,"p98":8.978430999999999,"p99":8.978430999999999,"p999":8.978430999999999,"stddev":2.623541202340243,"m15_rate":0.0,"m1_rate":0.0,"m5_rate":0.0,"mean_rate":11.271217842163516,"duration_units":"milliseconds","rate_units":"calls/second"}}}
08:53:51.472 [Health-Check-Monitor-appOne-Client-Worker-0-Thread] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="appOne=appOne-01", change="ACTIVE->INACTIVE"
Styx http port was: [46107]
Styx https port was: [-1]
08:53:51.631 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:51.634 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:51.634 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:51.635 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:51.635 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mOriginsReloadThreadsSpec:[0m
08:53:51.651 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:51.653 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:51.653 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:51.654 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:51.654 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@2f651f93
08:53:51.655 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:51.659 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:51.660 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:51.660 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:51.661 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:51.662 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:51.662 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:51.665 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:38621
08:53:51.667 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:51.668 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44131
08:53:51.669 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 7ms
Styx http port is: [38621]
Styx https port is: [-1]
08:53:51.671 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:44623, appOne:appOne-02:localhost:40011, appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@5496c165, com.hotels.styx.admin.dashboard.DashboardData$Downstream@51a8313b, com.hotels.styx.admin.dashboard.DashboardDataSupplier@2a03d65c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6642dc5a]
08:53:51.671 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:51.672 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:51.674 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-03
08:53:51.675 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-02
08:53:51.676 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-01
08:53:51.678 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:51.678 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:51.678 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:53:51.682 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:44623, appOne:appOne-02:localhost:40011, appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx health checking[0m
08:53:51.703 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:44623, appOne:appOne-02:localhost:40011, appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@5496c165, com.hotels.styx.admin.dashboard.DashboardData$Downstream@51a8313b, com.hotels.styx.admin.dashboard.DashboardDataSupplier@2a03d65c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6642dc5a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@52cb4f50]
08:53:51.704 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-03
08:53:51.704 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-02
08:53:51.704 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-01
08:53:51.707 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:44623, appOne:appOne-02:localhost:40011, appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:53:51.709 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:44623, appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@5496c165, com.hotels.styx.admin.dashboard.DashboardData$Downstream@51a8313b, com.hotels.styx.admin.dashboard.DashboardDataSupplier@2a03d65c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6642dc5a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@52cb4f50, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4d27d9d]
08:53:51.709 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:51.709 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:51.712 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-03
08:53:51.713 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-01
08:53:51.713 [ScalaTest-main-running-OriginsReloadThreadsSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:51.714 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:51.714 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:53:51.714 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:44623, appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:51.753 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:44623, appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@5496c165, com.hotels.styx.admin.dashboard.DashboardData$Downstream@51a8313b, com.hotels.styx.admin.dashboard.DashboardDataSupplier@2a03d65c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6642dc5a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@52cb4f50, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4d27d9d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@41ffaeb8]
08:53:51.754 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-03
08:53:51.754 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-01
08:53:51.755 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:44623, appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:53:51.756 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@5496c165, com.hotels.styx.admin.dashboard.DashboardData$Downstream@51a8313b, com.hotels.styx.admin.dashboard.DashboardDataSupplier@2a03d65c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6642dc5a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@52cb4f50, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4d27d9d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@41ffaeb8, com.hotels.styx.admin.dashboard.DashboardData$Downstream@43f0c2d1]
08:53:51.757 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:51.757 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:51.759 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-03
08:53:51.760 [ScalaTest-main-running-OriginsReloadThreadsSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:51.760 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:51.760 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:53:51.760 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:53:51.769 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@5496c165, com.hotels.styx.admin.dashboard.DashboardData$Downstream@51a8313b, com.hotels.styx.admin.dashboard.DashboardDataSupplier@2a03d65c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6642dc5a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@52cb4f50, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4d27d9d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@41ffaeb8, com.hotels.styx.admin.dashboard.DashboardData$Downstream@43f0c2d1, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a48a7f3]
08:53:51.769 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-03
08:53:51.770 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:53:51.772 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:44623, appOne:appOne-02:localhost:40011, appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@5496c165, com.hotels.styx.admin.dashboard.DashboardData$Downstream@51a8313b, com.hotels.styx.admin.dashboard.DashboardDataSupplier@2a03d65c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6642dc5a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@52cb4f50, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4d27d9d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@41ffaeb8, com.hotels.styx.admin.dashboard.DashboardData$Downstream@43f0c2d1, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6a48a7f3, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3f985a86]
08:53:51.772 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:51.773 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:51.775 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-03
08:53:51.776 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-02
08:53:51.777 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-01
08:53:51.778 [ScalaTest-main-running-OriginsReloadThreadsSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:51.778 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:51.778 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:53:51.779 [ScalaTest-main-running-OriginsReloadThreadsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:44623, appOne:appOne-02:localhost:40011, appOne:appOne-03:localhost:46183], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/any], intervalMillis=500, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32m- cleans up resources after origins reload[0m
Styx http port was: [38621]
Styx https port was: [-1]
08:53:54.403 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:54.407 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:54.407 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:53:54.408 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:53:54.409 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mChunkedUploadSpec:[0m
08:53:54.427 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:53:54.429 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:53:54.429 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:54.430 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:54.431 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@1846579f
08:53:54.431 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:53:54.435 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:53:54.436 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:53:54.436 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:54.436 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:53:54.437 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:53:54.437 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:54.440 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:46509
08:53:54.443 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:53:54.445 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:41767
08:53:54.445 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
Styx http port is: [46509]
Styx https port is: [-1]
08:53:54.447 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=upload, path=/upload, origins=[upload:generic-app-01:localhost:37543], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@24b4d544, com.hotels.styx.admin.dashboard.DashboardData$Downstream@27a2a089, com.hotels.styx.admin.dashboard.DashboardDataSupplier@54657dd2, com.hotels.styx.admin.dashboard.DashboardData$Downstream@706eab5d]
08:53:54.447 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:54.448 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:53:54.448 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=upload:generic-app-01
08:53:54.450 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:53:54.450 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:53:54.450 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/upload current routes=[/upload]
08:53:54.451 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=upload, path=/upload, origins=[upload:generic-app-01:localhost:37543], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mChunked upload[0m
[32m- should proxy a request with chunked HTTP content.[0m
08:53:54.776 [Health-Check-Monitor-appOne-Client-Worker-0-Thread] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="appOne=appOne-02", change="ACTIVE->INACTIVE"
08:53:54.777 [Health-Check-Monitor-appOne-Client-Worker-0-Thread] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="appOne=appOne-01", change="ACTIVE->INACTIVE"
08:53:55.276 [Health-Check-Monitor-appOne-Client-Worker-0-Thread] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="appOne=appOne-03", change="ACTIVE->INACTIVE"
[32m- Styx should not trigger a timeout when proxying a long lasting chunked HTTP upload.[0m
[32m- Styx accepts a request with chunk size zero.[0m
08:54:07.278 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=POST, uri=/upload, headers=[Host=localhost:46509, Transfer-Encoding=chunked, Content-Type=text/plain, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=4858932b-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=4858932b-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.api.exceptions.TransportLostException exceptionMessage="Connection to origin lost. origin="upload:generic-app-01:localhost:37543", remoteAddress="localhost/127.0.0.1:37543"."
08:54:07.281 [Proxy-Worker-3-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="400 Bad Request"
io.netty.handler.codec.DecoderException: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultLastHttpContent(data: EmptyByteBufBE, decoderResult: failure(java.lang.NumberFormatException: For input string: ""))
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultLastHttpContent(data: EmptyByteBufBE, decoderResult: failure(java.lang.NumberFormatException: For input string: ""))
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:78) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:63) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 47 common frames omitted
Caused by: java.lang.NumberFormatException: For input string: ""
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) ~[na:1.8.0_121]
	at java.lang.Integer.parseInt(Integer.java:592) ~[na:1.8.0_121]
	at io.netty.handler.codec.http.HttpObjectDecoder.getChunkSize(HttpObjectDecoder.java:690) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.decode(HttpObjectDecoder.java:326) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpServerCodec$HttpServerRequestDecoder.decode(HttpServerCodec.java:101) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 26 common frames omitted
08:54:07.286 [Proxy-Worker-3-Thread] WARN  c.h.s.s.n.c.HttpPipelineHandler - ResponseObservableErrorEvent, state=TERMINATED, request=HttpRequest{version=HTTP/1.1, method=POST, uri=/upload, headers=[Host=localhost:46509, Transfer-Encoding=chunked, Content-Type=text/plain], id=4858932b-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
[32m- should respond with bad request if chunked request is not actually followed with chunks in the body[0m
[32m- should accept a chunk header padded with 7 leading zeroes.[0m
[32m- Accepts a chunk header padded with 8 leading zeroes.[0m
08:54:08.413 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=POST, uri=/upload, headers=[Host=localhost:46509, Transfer-Encoding=chunked, Content-Type=text/plain, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=486d058e-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=486d058e-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.api.exceptions.TransportLostException exceptionMessage="Connection to origin lost. origin="upload:generic-app-01:localhost:37543", remoteAddress="localhost/127.0.0.1:37543"."
08:54:08.413 [Proxy-Worker-6-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="408 Request Timeout"
com.hotels.styx.server.RequestTimeoutException: message=DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
POST /upload HTTP/1.1
Host: localhost:46509
Transfer-Encoding: chunked
Content-Type: text/plain
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.userEventTriggered(RequestTimeoutHandler.java:50) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireUserEventTriggered(CombinedChannelDuplexHandler.java:432) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.userEventTriggered(ByteToMessageDecoder.java:353) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.userEventTriggered(HttpObjectDecoder.java:460) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.userEventTriggered(CombinedChannelDuplexHandler.java:243) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelIdle(IdleStateHandler.java:371) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler$ReaderIdleTimeoutTask.run(IdleStateHandler.java:494) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler$AbstractIdleTask.run(IdleStateHandler.java:466) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:120) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:309) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
08:54:08.414 [1101206362@qtp-1764291958-13] ERROR WireMock - /upload
java.lang.RuntimeException: org.mortbay.jetty.EofException
	at com.github.tomakehurst.wiremock.jetty6.Jetty6HttpServletRequestAdapter.getBody(Jetty6HttpServletRequestAdapter.java:86) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.jetty6.Jetty6HttpServletRequestAdapter.getBodyAsString(Jetty6HttpServletRequestAdapter.java:95) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.jetty6.Jetty6HttpServletRequestAdapter.toString(Jetty6HttpServletRequestAdapter.java:177) ~[wiremock-1.54.jar:na]
	at java.lang.String.valueOf(String.java:2994) ~[na:1.8.0_121]
	at java.lang.StringBuilder.append(StringBuilder.java:131) ~[na:1.8.0_121]
	at com.github.tomakehurst.wiremock.http.StubRequestHandler.handleRequest(StubRequestHandler.java:33) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.http.AbstractRequestHandler.handle(AbstractRequestHandler.java:38) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.jetty6.Jetty6HandlerDispatchingServlet.service(Jetty6HandlerDispatchingServlet.java:98) ~[wiremock-1.54.jar:na]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) ~[servlet-api-2.5-20081211.jar:na]
	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) ~[jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:401) ~[jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.Server.handle(Server.java:326) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:843) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228) [jetty-6.1.26.jar:6.1.26]
	at com.github.tomakehurst.wiremock.jetty6.DelayableSocketConnector$1.run(DelayableSocketConnector.java:49) [wiremock-1.54.jar:na]
	at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) [jetty-util-6.1.26.jar:6.1.26]
Caused by: org.mortbay.jetty.EofException: null
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:319) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpParser$Input.blockForContent(HttpParser.java:1150) ~[jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpParser$Input.read(HttpParser.java:1122) ~[jetty-6.1.26.jar:6.1.26]
	at java.io.InputStream.read(InputStream.java:101) ~[na:1.8.0_121]
	at com.google.common.io.ByteStreams.copy(ByteStreams.java:70) ~[guava-18.0.jar:na]
	at com.google.common.io.ByteStreams.toByteArray(ByteStreams.java:115) ~[guava-18.0.jar:na]
	at com.github.tomakehurst.wiremock.jetty6.Jetty6HttpServletRequestAdapter.getBody(Jetty6HttpServletRequestAdapter.java:84) ~[wiremock-1.54.jar:na]
	... 22 common frames omitted
08:54:08.415 [Proxy-Worker-6-Thread] WARN  c.h.s.s.n.c.HttpPipelineHandler - ResponseObservableErrorEvent, state=TERMINATED, request=HttpRequest{version=HTTP/1.1, method=POST, uri=/upload, headers=[Host=localhost:46509, Transfer-Encoding=chunked, Content-Type=text/plain], id=486d058e-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
[32m- Responds with 408 Request Timeout when it doesn't receive chunk-length amount of octets.[0m
08:54:08.450 [Proxy-Worker-7-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="400 Bad Request"
io.netty.handler.codec.DecoderException: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultLastHttpContent(data: EmptyByteBufBE, decoderResult: failure(java.lang.NumberFormatException: For input string: "80000000"))
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultLastHttpContent(data: EmptyByteBufBE, decoderResult: failure(java.lang.NumberFormatException: For input string: "80000000"))
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:78) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:63) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 47 common frames omitted
Caused by: java.lang.NumberFormatException: For input string: "80000000"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) ~[na:1.8.0_121]
	at java.lang.Integer.parseInt(Integer.java:583) ~[na:1.8.0_121]
	at io.netty.handler.codec.http.HttpObjectDecoder.getChunkSize(HttpObjectDecoder.java:690) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.decode(HttpObjectDecoder.java:326) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpServerCodec$HttpServerRequestDecoder.decode(HttpServerCodec.java:101) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 26 common frames omitted
[32m- Responds with 400 Bad Request when chunk size 80000000 causes an integer overflow.[0m
08:54:08.483 [Proxy-Worker-0-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="400 Bad Request"
io.netty.handler.codec.DecoderException: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultLastHttpContent(data: EmptyByteBufBE, decoderResult: failure(java.lang.NumberFormatException: For input string: "ffffffff"))
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultLastHttpContent(data: EmptyByteBufBE, decoderResult: failure(java.lang.NumberFormatException: For input string: "ffffffff"))
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:78) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:63) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 47 common frames omitted
Caused by: java.lang.NumberFormatException: For input string: "ffffffff"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) ~[na:1.8.0_121]
	at java.lang.Integer.parseInt(Integer.java:583) ~[na:1.8.0_121]
	at io.netty.handler.codec.http.HttpObjectDecoder.getChunkSize(HttpObjectDecoder.java:690) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.decode(HttpObjectDecoder.java:326) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpServerCodec$HttpServerRequestDecoder.decode(HttpServerCodec.java:101) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 26 common frames omitted
[32m- Responds with 400 Bad Request when chunk size FFFFFFFF causes an integer overflow.[0m
[32m- Accepts a chunk size 25 octets.[0m
08:54:08.549 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=POST, uri=/upload, headers=[Host=localhost:46509, Transfer-Encoding=chunked, Content-Type=text/plain, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=491aaab2-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=491aaab2-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.api.exceptions.TransportLostException exceptionMessage="Connection to origin lost. origin="upload:generic-app-01:localhost:37543", remoteAddress="localhost/127.0.0.1:37543"."
08:54:08.551 [Proxy-Worker-2-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="400 Bad Request"
io.netty.handler.codec.DecoderException: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultLastHttpContent(data: EmptyByteBufBE, decoderResult: failure(java.lang.NumberFormatException: For input string: "1ABABABAB"))
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultLastHttpContent(data: EmptyByteBufBE, decoderResult: failure(java.lang.NumberFormatException: For input string: "1ABABABAB"))
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:78) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:63) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 47 common frames omitted
Caused by: java.lang.NumberFormatException: For input string: "1ABABABAB"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) ~[na:1.8.0_121]
	at java.lang.Integer.parseInt(Integer.java:583) ~[na:1.8.0_121]
	at io.netty.handler.codec.http.HttpObjectDecoder.getChunkSize(HttpObjectDecoder.java:690) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.decode(HttpObjectDecoder.java:326) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpServerCodec$HttpServerRequestDecoder.decode(HttpServerCodec.java:101) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 26 common frames omitted
08:54:08.555 [Proxy-Worker-2-Thread] WARN  c.h.s.s.n.c.HttpPipelineHandler - ResponseObservableErrorEvent, state=TERMINATED, request=HttpRequest{version=HTTP/1.1, method=POST, uri=/upload, headers=[Host=localhost:46509, Transfer-Encoding=chunked, Content-Type=text/plain], id=491aaab2-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
[32m- Rejects a chunk size over 8 characters.[0m
Styx http port was: [46509]
Styx https port was: [-1]
08:54:08.663 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:54:08.664 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:08.664 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:54:08.665 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:08.667 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
08:54:08.681 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
[32mAsyncRequestSpec:[0m
08:54:08.704 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin asyncDelayPlugin instrumented
08:54:08.704 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:54:08.705 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:08.706 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:08.706 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@618ad2aa
08:54:08.708 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:54:08.711 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:54:08.712 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:54:08.713 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:08.713 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:08.714 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:54:08.715 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:08.716 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:37987
08:54:08.719 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:08.720 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:33179
08:54:08.721 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 6ms
Styx http port is: [37987]
Styx https port is: [-1]
08:54:08.722 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:40531], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@64968732, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3e1a3801, com.hotels.styx.admin.dashboard.DashboardDataSupplier@6fd12c5, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1de0a46c]
08:54:08.723 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:08.723 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:08.724 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:generic-app-01
08:54:08.725 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:54:08.726 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:54:08.726 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:54:08.726 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:40531], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx as a plugin container[0m
[32m- Proxies requests when plugin processes request headers asynchronously on a separate thread pool[0m
Styx http port was: [37987]
Styx https port was: [-1]
08:54:09.789 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:54:09.796 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:09.796 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:54:09.798 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:09.798 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mAdminSpec:[0m
08:54:09.810 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:54:09.812 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:54:09.812 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:09.813 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:09.813 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@5d5160e6
08:54:09.814 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:54:09.818 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:54:09.819 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:54:09.819 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:09.819 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:09.821 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:54:09.821 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:09.824 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:45615
08:54:09.826 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:09.827 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:41281
08:54:09.827 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 7ms
Styx http port is: [45615]
Styx https port is: [-1]
[32mhealth check[0m
[32m- should return 200 and string 'PONG' on /admin/ping[0m
Styx http port was: [45615]
Styx https port was: [-1]
08:54:09.843 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:54:09.846 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:09.847 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:54:09.850 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:09.851 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mBadRequestsSpec:[0m
08:54:09.862 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:54:09.863 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:54:09.864 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:09.865 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:09.865 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@7139bd31
08:54:09.866 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:54:09.870 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:54:09.871 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:54:09.871 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:09.871 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:09.873 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:54:09.873 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:09.877 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44899
08:54:09.879 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:09.881 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:37015
08:54:09.881 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 9ms
Styx http port is: [44899]
Styx https port is: [-1]
08:54:09.883 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=myapp, path=/badrequest, origins=[myapp:generic-app-01:localhost:33531], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@524a2ffb, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2f61d591, com.hotels.styx.admin.dashboard.DashboardDataSupplier@332820f4, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7173ae5b]
08:54:09.884 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:09.884 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:09.885 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=myapp:generic-app-01
08:54:09.886 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:54:09.887 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:54:09.887 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/badrequest current routes=[/badrequest]
08:54:09.888 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=myapp, path=/badrequest, origins=[myapp:generic-app-01:localhost:33531], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mHandling of bad requests[0m
[32m  When styx receives a bad request[0m
08:54:09.902 [Proxy-Worker-0-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="400 Bad Request"
io.netty.handler.codec.DecoderException: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultFullHttpRequest(decodeResult: failure(java.lang.IllegalArgumentException: invalid version format: HTTP://FOO.COM/BADREQUEST/1 HTTP/1.1), version: HTTP/1.0, content: UnpooledByteBufAllocator$InstrumentedUnpooledUnsafeHeapByteBuf(ridx: 0, widx: 0, cap: 0))
GET /bad-request HTTP/1.0
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultFullHttpRequest(decodeResult: failure(java.lang.IllegalArgumentException: invalid version format: HTTP://FOO.COM/BADREQUEST/1 HTTP/1.1), version: HTTP/1.0, content: UnpooledByteBufAllocator$InstrumentedUnpooledUnsafeHeapByteBuf(ridx: 0, widx: 0, cap: 0))
GET /bad-request HTTP/1.0
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:78) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:63) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 47 common frames omitted
Caused by: java.lang.IllegalArgumentException: invalid version format: HTTP://FOO.COM/BADREQUEST/1 HTTP/1.1
	at io.netty.handler.codec.http.HttpVersion.<init>(HttpVersion.java:121) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpVersion.valueOf(HttpVersion.java:76) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpRequestDecoder.createMessage(HttpRequestDecoder.java:87) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.decode(HttpObjectDecoder.java:219) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpServerCodec$HttpServerRequestDecoder.decode(HttpServerCodec.java:101) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 26 common frames omitted
[32m  - Responds with 400 Bad Request when fails to decode an HTTP message.[0m
08:54:09.912 [Proxy-Worker-1-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="400 Bad Request"
io.netty.handler.codec.DecoderException: com.hotels.styx.server.BadRequestException: No such HTTP method FAKEVERB in DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
FAKEVERB http://foo.com/badrequest/2 HTTP/1.1
host: localhost:8080
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.server.BadRequestException: No such HTTP method FAKEVERB in DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
FAKEVERB http://foo.com/badrequest/2 HTTP/1.1
host: localhost:8080
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:102) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:63) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 47 common frames omitted
Caused by: java.lang.IllegalArgumentException: No such HTTP method FAKEVERB
	at com.google.common.base.Preconditions.checkArgument(Preconditions.java:145) ~[guava-18.0.jar:na]
	at com.hotels.styx.api.HttpMethod.httpMethod(HttpMethod.java:63) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.toStyxMethod(NettyToStyxRequestDecoder.java:185) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.makeAStyxRequestFrom(NettyToStyxRequestDecoder.java:168) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.toStyxRequest(NettyToStyxRequestDecoder.java:137) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:90) ~[styx-server-0.9-SNAPSHOT.jar:na]
	... 49 common frames omitted
[32m  - Responds with 400 Bad Request for requests with unrecognised HTTP verbs[0m
08:54:09.919 [Proxy-Worker-2-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="400 Bad Request"
io.netty.handler.codec.DecoderException: com.hotels.styx.server.BadRequestException: Bad Host header. Missing/Mismatch of Host header: DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
GET /badrequest/4 HTTP/1.1
Host: no.hotels.com
Host: cz.hotels.com
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:297) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:413) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.server.BadRequestException: Bad Host header. Missing/Mismatch of Host header: DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
GET /badrequest/4 HTTP/1.1
Host: no.hotels.com
Host: cz.hotels.com
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.validateHostHeader(NettyToStyxRequestDecoder.java:145) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.toStyxRequest(NettyToStyxRequestDecoder.java:136) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:90) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:63) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 49 common frames omitted
[32m  - Responds with 400 Bad Request for multiple Host headers[0m
[32m  - Passes through invalid cookies and therefore responds with 200 OK[0m
08:54:10.258 [Proxy-Worker-4-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="408 Request Timeout"
com.hotels.styx.server.RequestTimeoutException: message=DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
GET /badrequest/5 HTTP/1.1
Content-Type: text/html; charset=UTF-8
Host: localhost:44899
Content-Length: 500
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.userEventTriggered(RequestTimeoutHandler.java:50) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireUserEventTriggered(CombinedChannelDuplexHandler.java:432) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.userEventTriggered(ByteToMessageDecoder.java:353) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.userEventTriggered(HttpObjectDecoder.java:460) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.userEventTriggered(CombinedChannelDuplexHandler.java:243) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelIdle(IdleStateHandler.java:371) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler$ReaderIdleTimeoutTask.run(IdleStateHandler.java:494) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler$AbstractIdleTask.run(IdleStateHandler.java:466) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:120) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:309) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
08:54:10.259 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/badrequest/5, headers=[Content-Type=text/html; charset=UTF-8, Host=localhost:44899, Content-Length=500, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=49f10d86-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=49f10d86-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.api.exceptions.TransportLostException exceptionMessage="Connection to origin lost. origin="myapp:generic-app-01:localhost:33531", remoteAddress="localhost/127.0.0.1:33531"."
08:54:10.262 [Styx-Client-Worker-0-Thread] WARN  c.h.s.s.n.c.HttpPipelineHandler - ResponseObservableErrorEvent, state=TERMINATED, request=HttpRequest{version=HTTP/1.1, method=GET, uri=/badrequest/5, headers=[Content-Type=text/html; charset=UTF-8, Host=localhost:44899, Content-Length=500], id=49f10d86-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
[32m  - Responds with 408 Request Timeout when client does not send a full HTTP request within configurable time.[0m
Styx http port was: [44899]
Styx https port was: [-1]
08:54:10.366 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:54:10.369 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:10.369 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:54:10.375 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:10.375 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mErrorMetricsSpec:[0m
08:54:10.390 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
[32mStyx as a plugin container[0m
08:54:10.394 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin failAtOnCompletedPlugin instrumented
08:54:10.395 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateErrorStatusPlugin instrumented
08:54:10.395 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToErrorStatusPlugin instrumented
08:54:10.395 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin throwExceptionPlugin instrumented
08:54:10.395 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToExceptionPlugin instrumented
08:54:10.395 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateBadGatewayStatusPlugin instrumented
08:54:10.395 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToBadGatewayStatusPlugin instrumented
08:54:10.396 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:54:10.396 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:10.397 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:10.398 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@5e048149
08:54:10.399 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:54:10.402 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:54:10.405 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:54:10.406 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:10.406 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:10.408 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:54:10.409 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:10.410 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44313
08:54:10.414 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:10.416 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:39133
08:54:10.417 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Started styx server in 9ms
08:54:10.418 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@2ab0702e, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7158daf2, com.hotels.styx.admin.dashboard.DashboardDataSupplier@10f19647, com.hotels.styx.admin.dashboard.DashboardData$Downstream@102efc59]
08:54:10.419 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:10.419 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:10.420 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:01
08:54:10.421 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:54:10.421 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:54:10.422 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:54:10.423 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:54:10.447 [Styx-Client-Worker-0-Thread] WARN  c.h.s.s.n.c.HttpPipelineHandler - ResponseObservableErrorEvent, state=TERMINATED, request=null, ongoingResponse=HttpResponse{version=HTTP/1.1, status=200 OK, headers=[Server=Jetty(6.1.26), X-Styx-Origin-Id=01, Via=1.1 styx]}, prematureRequest=null
08:54:10.460 [Styx-Client-Worker-0-Thread] WARN  c.h.s.s.n.c.HttpPipelineHandler - ResponseObservableErrorEvent, state=ACCEPTING_REQUESTS, request=null, ongoingResponse=HttpResponse{version=HTTP/1.1, status=200 OK, headers=[Server=Jetty(6.1.26), X-Styx-Origin-Id=01, Via=1.1 styx]}, prematureRequest=null
08:54:12.462 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:14.739 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
[32m- Ignores failures at the end of proxying[0m
08:54:14.744 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:14.744 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:54:14.744 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:14.745 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.StyxServer - Stopped
08:54:14.756 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:54:14.758 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin failAtOnCompletedPlugin instrumented
08:54:14.758 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateErrorStatusPlugin instrumented
08:54:14.758 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToErrorStatusPlugin instrumented
08:54:14.758 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin throwExceptionPlugin instrumented
08:54:14.759 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToExceptionPlugin instrumented
08:54:14.759 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateBadGatewayStatusPlugin instrumented
08:54:14.759 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToBadGatewayStatusPlugin instrumented
08:54:14.759 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:54:14.760 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:14.761 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:14.761 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@772861aa
08:54:14.762 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:54:14.772 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:54:14.776 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:54:14.777 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:14.777 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:14.778 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:54:14.779 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:14.781 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:39309
08:54:14.788 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:14.790 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:33329
08:54:14.791 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Started styx server in 13ms
08:54:14.792 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@47b67fcb, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2b9f74d0, com.hotels.styx.admin.dashboard.DashboardDataSupplier@65c86db8, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7efe7b87]
08:54:14.792 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:14.793 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:14.794 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:01
08:54:14.795 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:54:14.795 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:54:14.795 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:54:14.796 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:54:14.805 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:17.157 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:20.394 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:23.627 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:25.963 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:28.216 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:30.451 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
[32m- Records 500s created in plugins as plugin errors[0m
08:54:30.455 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:30.456 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:54:30.456 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:30.457 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.StyxServer - Stopped
08:54:30.468 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:54:30.470 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin failAtOnCompletedPlugin instrumented
08:54:30.470 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateErrorStatusPlugin instrumented
08:54:30.471 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToErrorStatusPlugin instrumented
08:54:30.472 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin throwExceptionPlugin instrumented
08:54:30.472 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToExceptionPlugin instrumented
08:54:30.473 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateBadGatewayStatusPlugin instrumented
08:54:30.473 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToBadGatewayStatusPlugin instrumented
08:54:30.474 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:54:30.475 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:30.476 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:30.477 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@6cd164a6
08:54:30.478 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:54:30.482 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:54:30.485 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:54:30.486 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:30.486 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:30.488 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:54:30.494 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:30.496 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:46465
08:54:30.498 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:30.499 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44733
08:54:30.500 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Started styx server in 12ms
08:54:30.501 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@474c9131, com.hotels.styx.admin.dashboard.DashboardData$Downstream@66213a0d, com.hotels.styx.admin.dashboard.DashboardDataSupplier@aa4d8cc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3cb8c8ce]
08:54:30.502 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:30.502 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:30.503 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:01
08:54:30.504 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:54:30.504 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:54:30.504 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:54:30.505 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:54:30.524 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:32.776 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:36.013 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:39.245 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:40.524 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/foo, headers=[Host=localhost:46465, Map_to_error_status=true, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=56332cf1-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=56332cf1-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.api.exceptions.ResponseTimeoutException exceptionMessage="No response from origin. origin=appOne:01:localhost:41871, reason=channelClosed, bytesReceived=0, chunksReceived=0, bytesEmitted=0, chunksEmitted=0"
08:54:40.534 [Styx-Client-Worker-0-Thread] WARN  c.h.s.s.n.c.HttpPipelineHandler - ResponseObservableErrorEvent, state=TERMINATED, request=null, ongoingResponse=HttpResponse{version=HTTP/1.1, status=500 Internal Server Error, headers=[Via=1.1 styx]}, prematureRequest=null
08:54:41.585 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:43.830 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:45.523 [Styx-Client-Worker-0-Thread] WARN  c.h.s.c.n.c.FlowControllingHttpContentProducer - message="Inappropriate event=DelayedTearDownEvent", prefix=localhost/127.0.0.1:41871 -> /127.0.0.1:37832, Request(method=GET, url=/foo, id=56332cf1-cc59-11e8-9327-0242ac1147ce), state=TERMINATED, receivedChunks=0, receivedBytes=0, emittedChunks=0, emittedBytes=0
08:54:46.168 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
[32m- Records 500s mapped from responses in plugins as plugin errors[0m
08:54:46.173 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:46.173 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:54:46.173 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:54:46.174 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.StyxServer - Stopped
08:54:46.185 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:54:46.187 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin failAtOnCompletedPlugin instrumented
08:54:46.187 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateErrorStatusPlugin instrumented
08:54:46.187 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToErrorStatusPlugin instrumented
08:54:46.187 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin throwExceptionPlugin instrumented
08:54:46.187 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToExceptionPlugin instrumented
08:54:46.187 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateBadGatewayStatusPlugin instrumented
08:54:46.187 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToBadGatewayStatusPlugin instrumented
08:54:46.187 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:54:46.188 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:46.189 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:46.189 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@16c587de
08:54:46.190 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:54:46.193 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:54:46.195 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:54:46.195 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:46.195 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:54:46.196 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:54:46.196 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:46.198 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:38593
08:54:46.200 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:54:46.201 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44777
08:54:46.202 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Started styx server in 6ms
08:54:46.203 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@28737371, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2af46afd, com.hotels.styx.admin.dashboard.DashboardDataSupplier@760245e1, com.hotels.styx.admin.dashboard.DashboardData$Downstream@31ceba99]
08:54:46.203 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:46.203 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:46.204 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:01
08:54:46.205 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:54:46.206 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:54:46.206 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:54:46.207 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:54:46.223 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:48.583 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
metrics: connections.bytes-received={count=45}
connections.bytes-sent={count=196}
connections.eventloop.Proxy-Worker-0-Thread.channels={count=2, max=1, mean=0.5, min=0, p50=1.0, p75=1.0, p95=1.0, p98=1.0, p99=1.0, p999=1.0, stddev=0.5}
connections.eventloop.Proxy-Worker-0-Thread.registered-channel-count={count=0}
connections.idleClosed={count=0, max=0, mean=0.0, min=0, p50=0.0, p75=0.0, p95=0.0, p98=0.0, p99=0.0, p999=0.0, stddev=0.0}
connections.total-connections={count=0}
jvm.bufferpool.direct.capacity={value=375}
jvm.bufferpool.direct.count={value=2}
jvm.bufferpool.direct.used={value=376}
jvm.bufferpool.mapped.capacity={value=0}
jvm.bufferpool.mapped.count={value=0}
jvm.bufferpool.mapped.used={value=0}
jvm.gc.PS-MarkSweep.count={value=3}
jvm.gc.PS-MarkSweep.time={value=243}
jvm.gc.PS-Scavenge.count={value=6}
jvm.gc.PS-Scavenge.time={value=442}
jvm.memory.heap.committed={value=1221591040}
jvm.memory.heap.init={value=528482304}
jvm.memory.heap.max={value=7499415552}
jvm.memory.heap.usage={value=0.09307261494715476}
jvm.memory.heap.used={value=697990216}
jvm.memory.non-heap.committed={value=97320960}
jvm.memory.non-heap.init={value=2555904}
jvm.memory.non-heap.max={value=-1}
jvm.memory.non-heap.usage={value=-9.4231624E7}
jvm.memory.non-heap.used={value=94231624}
jvm.memory.pools.Code-Cache.committed={value=28639232}
jvm.memory.pools.Code-Cache.init={value=2555904}
jvm.memory.pools.Code-Cache.max={value=251658240}
jvm.memory.pools.Code-Cache.usage={value=0.11307830810546875}
jvm.memory.pools.Code-Cache.used={value=28457088}
jvm.memory.pools.Compressed-Class-Space.committed={value=8126464}
jvm.memory.pools.Compressed-Class-Space.init={value=0}
jvm.memory.pools.Compressed-Class-Space.max={value=1073741824}
jvm.memory.pools.Compressed-Class-Space.usage={value=0.007171593606472015}
jvm.memory.pools.Compressed-Class-Space.used={value=7700440}
jvm.memory.pools.Metaspace.committed={value=60555264}
jvm.memory.pools.Metaspace.init={value=0}
jvm.memory.pools.Metaspace.max={value=-1}
jvm.memory.pools.Metaspace.usage={value=0.9590263862114448}
jvm.memory.pools.Metaspace.used={value=58074096}
jvm.memory.pools.PS-Eden-Space.committed={value=598736896}
jvm.memory.pools.PS-Eden-Space.init={value=132120576}
jvm.memory.pools.PS-Eden-Space.max={value=2754084864}
jvm.memory.pools.PS-Eden-Space.usage={value=0.14991887483101174}
jvm.memory.pools.PS-Eden-Space.used={value=412889304}
jvm.memory.pools.PS-Eden-Space.used-after-gc={value=0}
jvm.memory.pools.PS-Old-Gen.committed={value=601358336}
jvm.memory.pools.PS-Old-Gen.init={value=352321536}
jvm.memory.pools.PS-Old-Gen.max={value=5624561664}
jvm.memory.pools.PS-Old-Gen.usage={value=0.04686872466654141}
jvm.memory.pools.PS-Old-Gen.used={value=263616032}
jvm.memory.pools.PS-Old-Gen.used-after-gc={value=141390384}
jvm.memory.pools.PS-Survivor-Space.committed={value=21495808}
jvm.memory.pools.PS-Survivor-Space.init={value=22020096}
jvm.memory.pools.PS-Survivor-Space.max={value=21495808}
jvm.memory.pools.PS-Survivor-Space.usage={value=0.999491621808308}
jvm.memory.pools.PS-Survivor-Space.used={value=21484880}
jvm.memory.pools.PS-Survivor-Space.used-after-gc={value=21484880}
jvm.memory.total.committed={value=1318912000}
jvm.memory.total.init={value=531038208}
jvm.memory.total.max={value=7499415551}
jvm.memory.total.used={value=792227088}
jvm.netty.pooled-allocator.usedDirectMemory={value=536870912}
jvm.netty.pooled-allocator.usedHeapMemory={value=0}
jvm.netty.unpooled-allocator.usedDirectMemory={value=7}
jvm.netty.unpooled-allocator.usedHeapMemory={value=0}
jvm.thread.blocked.count={value=0}
jvm.thread.count={value=216}
jvm.thread.daemon.count={value=22}
jvm.thread.deadlock.count={value=0}
jvm.thread.deadlocks={value=[]}
jvm.thread.new.count={value=0}
jvm.thread.runnable.count={value=131}
jvm.thread.terminated.count={value=0}
jvm.thread.timed_waiting.count={value=47}
jvm.thread.waiting.count={value=38}
jvm.uptime={value=77320}
jvm.uptime.formatted={value=0d 0h 1m}
origins.appOne.01.connectionspool.available-connections={value=1}
origins.appOne.01.connectionspool.busy-connections={value=0}
origins.appOne.01.connectionspool.connection-attempts={value=1}
origins.appOne.01.connectionspool.connection-failures={value=0}
origins.appOne.01.connectionspool.connections-closed={value=0}
origins.appOne.01.connectionspool.connections-terminated={value=0}
origins.appOne.01.connectionspool.pending-connections={value=0}
origins.appOne.01.connectionspool.ttfb={value=0}
origins.appOne.01.requests.cancelled={count=0}
origins.appOne.01.requests.error-rate={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.41486693552516696, units=events/second}
origins.appOne.01.requests.latency={count=1, max=3.653631, mean=3.64544, min=3.637248, p50=3.653631, p75=3.653631, p95=3.653631, p98=3.653631, p99=3.653631, p999=3.653631, stddev=0.0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.41478383787293027, duration_units=milliseconds, rate_units=calls/second}
origins.appOne.01.requests.response.status.200={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
origins.appOne.01.requests.response.status.500={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4166871852117648, units=events/second}
origins.appOne.01.requests.response.status.5xx={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4161975667474569, units=events/second}
origins.appOne.01.requests.success-rate={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
origins.appOne.01.status={value=1}
origins.appOne.requests.cancelled={count=0}
origins.appOne.requests.error-rate={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.41478831454859444, units=events/second}
origins.appOne.requests.latency={count=1, max=3.8502389999999997, mean=3.8420479999999997, min=3.833856, p50=3.8502389999999997, p75=3.8502389999999997, p95=3.8502389999999997, p98=3.8502389999999997, p99=3.8502389999999997, p999=3.8502389999999997, stddev=0.0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4146962338827806, duration_units=milliseconds, rate_units=calls/second}
origins.appOne.requests.response.status.200={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
origins.appOne.requests.response.status.500={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4166821148088381, units=events/second}
origins.appOne.requests.success-rate={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
origins.response.status.500={count=1}
plugins.failAtOnCompletedPlugin.errors={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
plugins.generateBadGatewayStatusPlugin.errors={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
plugins.generateErrorStatusPlugin.errors={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
plugins.mapToBadGatewayStatusPlugin.errors={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
plugins.mapToErrorStatusPlugin.errors={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
plugins.mapToExceptionPlugin.errors={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
plugins.throwExceptionPlugin.errors={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
requests.error-rate.500={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.41176201811789037, units=events/second}
requests.latency={count=1, max=9.175039, mean=9.142272, min=9.109504, p50=9.175039, p75=9.175039, p95=9.175039, p98=9.175039, p99=9.175039, p999=9.175039, stddev=0.0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.41162353571667504, duration_units=milliseconds, rate_units=calls/second}
requests.outstanding={count=0}
requests.received={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.41175993828357577, units=events/second}
requests.response.sent={count=1}
requests.response.status.1xx={count=0}
requests.response.status.2xx={count=0}
requests.response.status.3xx={count=0}
requests.response.status.4xx={count=0}
requests.response.status.500={count=1}
requests.response.status.501={count=0}
requests.response.status.502={count=0}
requests.response.status.503={count=0}
requests.response.status.504={count=0}
requests.response.status.521={count=0}
requests.response.status.5xx={count=1}
requests.response.status.unrecognised={count=0}
styx.server.http.requests={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4154826686488204, units=events/second}
styx.server.http.responses.500={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4168342149161614, units=events/second}
08:54:51.936 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:54.182 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:56.415 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:54:58.649 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:01.884 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:04.216 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:06.455 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
[32m- Does not record 500s from origins as plugin errors[0m
08:55:06.458 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:55:06.458 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:55:06.459 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:55:06.459 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.StyxServer - Stopped
08:55:06.472 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:55:06.474 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin failAtOnCompletedPlugin instrumented
08:55:06.474 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateErrorStatusPlugin instrumented
08:55:06.474 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToErrorStatusPlugin instrumented
08:55:06.475 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin throwExceptionPlugin instrumented
08:55:06.475 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToExceptionPlugin instrumented
08:55:06.475 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateBadGatewayStatusPlugin instrumented
08:55:06.475 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToBadGatewayStatusPlugin instrumented
08:55:06.476 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:55:06.476 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:06.477 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:06.478 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@574cd322
08:55:06.479 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:55:06.483 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:55:06.485 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:55:06.486 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:06.486 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:06.487 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:55:06.488 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:55:06.490 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:37991
08:55:06.493 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:55:06.494 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:39499
08:55:06.495 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
08:55:06.496 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@3727f0ee, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5c448433, com.hotels.styx.admin.dashboard.DashboardDataSupplier@fb713e7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b5c3e5f]
08:55:06.497 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:06.498 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:06.498 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:01
08:55:06.499 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:55:06.501 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:55:06.501 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:55:06.502 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:55:07.511 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:09.753 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:12.092 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:14.325 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
[32m- Does not record non-500 5xxs created in plugins as plugin errors or styx errors[0m
08:55:14.329 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:55:14.329 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:55:14.329 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:55:14.330 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.StyxServer - Stopped
08:55:14.348 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:55:14.350 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin failAtOnCompletedPlugin instrumented
08:55:14.350 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateErrorStatusPlugin instrumented
08:55:14.350 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToErrorStatusPlugin instrumented
08:55:14.350 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin throwExceptionPlugin instrumented
08:55:14.351 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToExceptionPlugin instrumented
08:55:14.351 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateBadGatewayStatusPlugin instrumented
08:55:14.351 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToBadGatewayStatusPlugin instrumented
08:55:14.351 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:55:14.351 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:14.353 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:14.353 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@750ff7d3
08:55:14.354 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:55:14.357 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:55:14.362 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:55:14.362 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:14.362 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:14.364 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:55:14.364 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:55:14.366 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:33645
08:55:14.369 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:55:14.370 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:39247
08:55:14.371 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Started styx server in 7ms
08:55:14.372 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@54cf7c6a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@78010562, com.hotels.styx.admin.dashboard.DashboardDataSupplier@50756c76, com.hotels.styx.admin.dashboard.DashboardData$Downstream@38aafb53]
08:55:14.372 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:14.373 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:14.374 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:01
08:55:14.374 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:55:14.376 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:55:14.376 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:55:14.377 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:55:15.391 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:17.739 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:19.976 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:22.221 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
[32m- Does not record non-500 5xxs mapped from responses in plugins as plugin errors or styx errors[0m
08:55:22.224 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:55:22.225 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:55:22.225 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:55:22.226 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.StyxServer - Stopped
08:55:22.238 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:55:22.240 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin failAtOnCompletedPlugin instrumented
08:55:22.240 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateErrorStatusPlugin instrumented
08:55:22.240 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToErrorStatusPlugin instrumented
08:55:22.240 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin throwExceptionPlugin instrumented
08:55:22.241 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToExceptionPlugin instrumented
08:55:22.241 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateBadGatewayStatusPlugin instrumented
08:55:22.241 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToBadGatewayStatusPlugin instrumented
08:55:22.241 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:55:22.241 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:22.242 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:22.243 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@103082dd
08:55:22.244 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:55:22.247 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:55:22.249 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:55:22.249 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:22.249 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:22.251 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:55:22.251 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:55:22.253 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:39497
08:55:22.256 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:55:22.257 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:41737
08:55:22.258 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
08:55:22.259 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@38792286, com.hotels.styx.admin.dashboard.DashboardData$Downstream@34d4860f, com.hotels.styx.admin.dashboard.DashboardDataSupplier@665522c2, com.hotels.styx.admin.dashboard.DashboardData$Downstream@41fe8e5f]
08:55:22.260 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:22.261 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:22.261 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:01
08:55:22.262 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:55:22.262 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:55:22.263 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:55:22.263 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:55:22.269 [Proxy-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=750c0e99-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.api.plugins.spi.PluginException: throwExceptionPlugin: null, state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=/foo, headers=[Host=localhost:39497, Throw_an_exception=true], id=750c0e99-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:55:22.273 [Proxy-Worker-0-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="500 Internal Server Error" during request=HttpRequest{version=HTTP/1.1, method=GET, uri=/foo, headers=[Host=localhost:39497, Throw_an_exception=true], id=750c0e99-cc59-11e8-9327-0242ac1147ce}, clientAddress=/127.0.0.1:34356
com.hotels.styx.api.plugins.spi.PluginException: throwExceptionPlugin: null
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.intercept(InstrumentedPlugin.java:96) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin$StatusRecordingChain.proceed(InstrumentedPlugin.java:145) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.plugins.ErrorMetricsSpec$MapTo500Interceptor.intercept(ErrorMetricsSpec.scala:331) ~[test-classes/:na]
	at com.hotels.styx.proxy.plugin.NamedPlugin.intercept(NamedPlugin.java:93) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.intercept(InstrumentedPlugin.java:91) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin$StatusRecordingChain.proceed(InstrumentedPlugin.java:145) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.plugins.ErrorMetricsSpec$Return500Interceptor.intercept(ErrorMetricsSpec.scala:318) ~[test-classes/:na]
	at com.hotels.styx.proxy.plugin.NamedPlugin.intercept(NamedPlugin.java:93) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.intercept(InstrumentedPlugin.java:91) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin$StatusRecordingChain.proceed(InstrumentedPlugin.java:145) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.plugins.OnCompleteErrorPlugin.intercept(OnCompleteErrorPlugin.java:31) ~[test-classes/:na]
	at com.hotels.styx.proxy.plugin.NamedPlugin.intercept(NamedPlugin.java:93) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.intercept(InstrumentedPlugin.java:91) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline.handle(StandardHttpPipeline.java:54) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.HttpInterceptorPipeline.handle(HttpInterceptorPipeline.java:59) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:91) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.RequestEnrichingInterceptor.intercept(RequestEnrichingInterceptor.java:47) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.HopByHopHeadersRemovingInterceptor.intercept(HopByHopHeadersRemovingInterceptor.java:38) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.ViaHeaderAppendingInterceptor.intercept(ViaHeaderAppendingInterceptor.java:43) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.UnexpectedRequestContentLengthRemover.intercept(UnexpectedRequestContentLengthRemover.java:33) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.ConfigurationContextResolverInterceptor.intercept(ConfigurationContextResolverInterceptor.java:42) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline.handle(StandardHttpPipeline.java:54) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.HttpInterceptorPipeline.handle(HttpInterceptorPipeline.java:59) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.connectors.HttpPipelineHandler.onLegitimateRequest(HttpPipelineHandler.java:257) [styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.connectors.HttpPipelineHandler.lambda$createStateMachine$0(HttpPipelineHandler.java:144) [styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine$StateEventHandler.lambda$new$0(StateMachine.java:134) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine.handle(StateMachine.java:73) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.FsmEventProcessor.submit(FsmEventProcessor.java:49) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.QueueDrainingEventProcessor.submit(QueueDrainingEventProcessor.java:55) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.connectors.HttpPipelineHandler.channelRead0(HttpPipelineHandler.java:209) [styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.connectors.HttpPipelineHandler.channelRead0(HttpPipelineHandler.java:93) [styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.plugins.ErrorMetricsSpec$TestException: null
	at com.hotels.styx.plugins.ErrorMetricsSpec$ThrowExceptionInterceptor.intercept(ErrorMetricsSpec.scala:358) ~[test-classes/:na]
	at com.hotels.styx.proxy.plugin.NamedPlugin.intercept(NamedPlugin.java:93) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.intercept(InstrumentedPlugin.java:91) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	... 91 common frames omitted
08:55:22.274 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:24.390 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/foo, headers=[Host=localhost:33645, Map_to_bad_gateway_status=true, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=7058bfb5-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=7058bfb5-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.api.exceptions.ResponseTimeoutException exceptionMessage="No response from origin. origin=appOne:01:localhost:41871, reason=channelClosed, bytesReceived=0, chunksReceived=0, bytesEmitted=0, chunksEmitted=0"
08:55:24.398 [Styx-Client-Worker-0-Thread] WARN  c.h.s.s.n.c.HttpPipelineHandler - ResponseObservableErrorEvent, state=TERMINATED, request=null, ongoingResponse=HttpResponse{version=HTTP/1.1, status=502 Bad Gateway, headers=[Via=1.1 styx]}, prematureRequest=null
08:55:24.520 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:26.753 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:29.390 [Styx-Client-Worker-0-Thread] WARN  c.h.s.c.n.c.FlowControllingHttpContentProducer - message="Inappropriate event=DelayedTearDownEvent", prefix=localhost/127.0.0.1:41871 -> /127.0.0.1:40216, Request(method=GET, url=/foo, id=7058bfb5-cc59-11e8-9327-0242ac1147ce), state=TERMINATED, receivedChunks=0, receivedBytes=0, emittedChunks=0, emittedBytes=0
08:55:29.999 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:32.236 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:34.469 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:36.701 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
[32m- Records Exceptions from plugins as plugin exceptions[0m
08:55:38.960 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:55:38.964 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:55:38.964 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:55:38.965 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:55:38.965 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.StyxServer - Stopped
08:55:38.978 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:55:38.979 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin failAtOnCompletedPlugin instrumented
08:55:38.980 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateErrorStatusPlugin instrumented
08:55:38.980 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToErrorStatusPlugin instrumented
08:55:38.980 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin throwExceptionPlugin instrumented
08:55:38.980 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToExceptionPlugin instrumented
08:55:38.980 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin generateBadGatewayStatusPlugin instrumented
08:55:38.981 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin mapToBadGatewayStatusPlugin instrumented
08:55:38.981 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:55:38.981 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:38.983 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:38.991 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@29138d3a
08:55:38.993 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:55:38.997 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:55:39.000 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:55:39.001 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:39.002 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:39.004 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:55:39.010 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:55:39.018 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35533
08:55:39.020 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:55:39.021 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35857
08:55:39.022 [ScalaTest-main-running-ErrorMetricsSpec] INFO  com.hotels.styx.StyxServer - Started styx server in 19ms
08:55:39.023 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@a2ddf26, com.hotels.styx.admin.dashboard.DashboardData$Downstream@65d57e4e, com.hotels.styx.admin.dashboard.DashboardDataSupplier@6daf7d37, com.hotels.styx.admin.dashboard.DashboardData$Downstream@23a5818e]
08:55:39.024 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:39.025 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:39.026 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:01
08:55:39.028 [ScalaTest-main-running-ErrorMetricsSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:55:39.028 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:55:39.029 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:55:39.030 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:01:localhost:41871], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:55:39.046 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=7f0a7f91-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.api.plugins.spi.PluginException: mapToExceptionPlugin: null, state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=/foo, headers=[Host=localhost:35533, Map_to_exception=true], id=7f0a7f91-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:55:39.071 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:39.072 [Proxy-Worker-0-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="500 Internal Server Error" during request=HttpRequest{version=HTTP/1.1, method=GET, uri=/foo, headers=[Host=localhost:35533, Map_to_exception=true], id=7f0a7f91-cc59-11e8-9327-0242ac1147ce}, clientAddress=/127.0.0.1:42632
com.hotels.styx.api.plugins.spi.PluginException: mapToExceptionPlugin: null
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.recordAndWrapError(InstrumentedPlugin.java:112) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.lambda$intercept$3(InstrumentedPlugin.java:93) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onError(OperatorOnErrorResumeNextViaFunction.java:140) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onError(OperatorDoOnEach.java:72) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.reportError(OperatorMerge.java:268) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.checkTerminate(OperatorMerge.java:812) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.emitLoop(OperatorMerge.java:573) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.emit(OperatorMerge.java:562) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$InnerSubscriber.onError(OperatorMerge.java:846) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OnSubscribeThrow.call(OnSubscribeThrow.java:44) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OnSubscribeThrow.call(OnSubscribeThrow.java:28) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.Observable.unsafeSubscribe(Observable.java:8666) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:250) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:147) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onNext(OperatorOnErrorResumeNextViaFunction.java:154) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onNext(OperatorOnErrorResumeNextViaFunction.java:154) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.observers.SafeSubscriber.onNext(SafeSubscriber.java:139) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onNext(OperatorOnErrorResumeNextViaFunction.java:154) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.observers.Subscribers$5.onNext(Subscribers.java:235) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.observers.Subscribers$5.onNext(Subscribers.java:235) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.emitScalar(OperatorMerge.java:393) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.tryEmit(OperatorMerge.java:355) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:840) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at com.hotels.styx.client.netty.connectionpool.NettyToStyxResponsePropagator.channelRead0(NettyToStyxResponsePropagator.java:143) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.connectionpool.RequestsToOriginMetricsCollector.channelRead(RequestsToOriginMetricsCollector.java:69) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:297) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:413) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.connectionpool.TimeToFirstByteHandler.channelRead(TimeToFirstByteHandler.java:54) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.plugins.ErrorMetricsSpec$TestException: null
	at com.hotels.styx.plugins.ErrorMetricsSpec$MapToExceptionInterceptor$$anonfun$intercept$3.apply(ErrorMetricsSpec.scala:368) ~[test-classes/:na]
	at com.hotels.styx.plugins.ErrorMetricsSpec$MapToExceptionInterceptor$$anonfun$intercept$3.apply(ErrorMetricsSpec.scala:368) ~[test-classes/:na]
	at scala.compat.java8.functionConverterImpls.AsJavaFunction.apply(FunctionConverters.scala:262) ~[scala-java8-compat_2.11-0.8.0.jar:na]
	at com.hotels.styx.api.StyxCoreObservable.lambda$flatMap$0(StyxCoreObservable.java:59) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:66) ~[rxjava-1.1.6.jar:1.1.6]
	... 65 common frames omitted
08:55:41.428 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:43.666 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:46.900 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:49.134 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:51.368 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:53.602 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:55.838 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
[32m- Records Exceptions from plugin response mapping as plugin exceptions[0m
08:55:55.842 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:55:55.842 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:55:55.843 [ScalaTest-main-running-ErrorMetricsSpec] INFO  c.h.styx.server.netty.NettyServer - stopped
08:55:55.843 [ScalaTest-main-running-ErrorMetricsSpec] WARN  com.hotels.styx.StyxServer - Stopped
[32mTimeoutsSpec:[0m
08:55:55.960 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:55:55.962 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:55:55.962 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:55.964 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:55.964 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@3fe46690
08:55:55.965 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:55:55.965 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - MetricsHandler instantiated with no caching
08:55:55.967 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JVMMetricsHandler instantiated with no caching
08:55:55.969 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:55:55.969 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JsonHandler instantiated with cache expiration of PT10S
08:55:55.970 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:55:55.970 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:55.970 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:55.972 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:55:55.972 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:55:55.982 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35713
08:55:55.985 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:55:55.987 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44173
08:55:55.988 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 16ms
Styx http port is: [35713]
Styx https port is: [-1]
08:55:55.990 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=normal, path=/backends, origins=[normal:generic-app-01:localhost:33935], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@7d04529c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@14fa92af, com.hotels.styx.admin.dashboard.DashboardDataSupplier@b16e202, com.hotels.styx.admin.dashboard.DashboardData$Downstream@339a3670]
08:55:55.991 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:55.991 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:55.992 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=normal:generic-app-01
08:55:55.993 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:55:55.993 [pool-587-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=normal, activeOrigins=[normal:generic-app-01:localhost:33935], inactiveOrigins=[], disabledOrigins=[]}
08:55:55.993 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:55:55.993 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/backends current routes=[/backends]
08:55:55.994 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=normal, path=/backends, origins=[normal:generic-app-01:localhost:33935], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:55:55.995 [pool-587-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=normal, activeOrigins=[normal:generic-app-01:localhost:33935], inactiveOrigins=[], disabledOrigins=[]}
08:55:55.996 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=slow, path=/slowResponseHeader, origins=[slow:generic-app-01:localhost:34809], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@7d04529c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@14fa92af, com.hotels.styx.admin.dashboard.DashboardDataSupplier@b16e202, com.hotels.styx.admin.dashboard.DashboardData$Downstream@339a3670, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1894e40d]
08:55:55.996 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:55.997 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:55.997 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=slow:generic-app-01
08:55:55.998 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:55:55.998 [pool-587-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=slow, activeOrigins=[slow:generic-app-01:localhost:34809], inactiveOrigins=[], disabledOrigins=[]}
08:55:55.998 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:55:55.998 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/slowResponseHeader current routes=[/slowResponseHeader, /backends]
08:55:55.999 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=slow, path=/slowResponseHeader, origins=[slow:generic-app-01:localhost:34809], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:55:56.001 [pool-587-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=normal, activeOrigins=[normal:generic-app-01:localhost:33935], inactiveOrigins=[], disabledOrigins=[]}
08:55:56.001 [pool-587-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=slow, activeOrigins=[slow:generic-app-01:localhost:34809], inactiveOrigins=[], disabledOrigins=[]}
[32mTimeouts handling[0m
[32m  Request timeouts[0m
08:55:56.144 [Proxy-Worker-0-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="408 Request Timeout"
com.hotels.styx.server.RequestTimeoutException: message=DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
GET /backends HTTP/1.1
host: localhost:35713
content-type: text/html; charset=UTF-8
content-length: 500
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.userEventTriggered(RequestTimeoutHandler.java:50) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireUserEventTriggered(CombinedChannelDuplexHandler.java:432) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.userEventTriggered(ByteToMessageDecoder.java:353) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.userEventTriggered(HttpObjectDecoder.java:460) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.userEventTriggered(CombinedChannelDuplexHandler.java:243) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelIdle(IdleStateHandler.java:371) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler$ReaderIdleTimeoutTask.run(IdleStateHandler.java:494) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler$AbstractIdleTask.run(IdleStateHandler.java:466) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:120) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:309) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
08:55:56.144 [333667026@qtp-1746578747-3] ERROR WireMock - /backends
java.lang.RuntimeException: org.mortbay.jetty.EofException
	at com.github.tomakehurst.wiremock.jetty6.Jetty6HttpServletRequestAdapter.getBody(Jetty6HttpServletRequestAdapter.java:86) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.jetty6.Jetty6HttpServletRequestAdapter.getBodyAsString(Jetty6HttpServletRequestAdapter.java:95) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.jetty6.Jetty6HttpServletRequestAdapter.toString(Jetty6HttpServletRequestAdapter.java:177) ~[wiremock-1.54.jar:na]
	at java.lang.String.valueOf(String.java:2994) ~[na:1.8.0_121]
	at java.lang.StringBuilder.append(StringBuilder.java:131) ~[na:1.8.0_121]
	at com.github.tomakehurst.wiremock.http.StubRequestHandler.handleRequest(StubRequestHandler.java:33) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.http.AbstractRequestHandler.handle(AbstractRequestHandler.java:38) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.jetty6.Jetty6HandlerDispatchingServlet.service(Jetty6HandlerDispatchingServlet.java:98) ~[wiremock-1.54.jar:na]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) ~[servlet-api-2.5-20081211.jar:na]
	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) ~[jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:401) ~[jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.Server.handle(Server.java:326) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228) [jetty-6.1.26.jar:6.1.26]
	at com.github.tomakehurst.wiremock.jetty6.DelayableSocketConnector$1.run(DelayableSocketConnector.java:49) [wiremock-1.54.jar:na]
	at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) [jetty-util-6.1.26.jar:6.1.26]
Caused by: org.mortbay.jetty.EofException: null
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:319) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpParser$Input.blockForContent(HttpParser.java:1144) ~[jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpParser$Input.read(HttpParser.java:1122) ~[jetty-6.1.26.jar:6.1.26]
	at java.io.InputStream.read(InputStream.java:101) ~[na:1.8.0_121]
	at com.google.common.io.ByteStreams.copy(ByteStreams.java:70) ~[guava-18.0.jar:na]
	at com.google.common.io.ByteStreams.toByteArray(ByteStreams.java:115) ~[guava-18.0.jar:na]
	at com.github.tomakehurst.wiremock.jetty6.Jetty6HttpServletRequestAdapter.getBody(Jetty6HttpServletRequestAdapter.java:84) ~[wiremock-1.54.jar:na]
	... 22 common frames omitted
[32m  - should log and return 408 Request Timeout when client does not send a full HTTP request within configurable time.[0m
[32m  Response timeouts[0m
08:55:56.679 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/slowResponseHeader, headers=[host=localhost:35713, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=8941dada-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=8941dada-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.api.exceptions.ResponseTimeoutException exceptionMessage="No response from origin. origin=slow:generic-app-01:localhost:34809, reason=idleStateEvent, bytesReceived=0, chunksReceived=0, bytesEmitted=0, chunksEmitted=0"
08:55:56.680 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=8941dada-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.api.exceptions.ResponseTimeoutException: No response from origin. origin=slow:generic-app-01:localhost:34809, reason=idleStateEvent, bytesReceived=0, chunksReceived=0, bytesEmitted=0, chunksEmitted=0, state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=/slowResponseHeader, headers=[host=localhost:35713], id=8941dada-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:55:56.684 [Proxy-Worker-1-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="504 Gateway Timeout", exception="com.hotels.styx.api.exceptions.ResponseTimeoutException: No response from origin. origin=slow:generic-app-01:localhost:34809, reason=idleStateEvent, bytesReceived=0, chunksReceived=0, bytesEmitted=0, chunksEmitted=0"
[32m  - should return a 504 if a backend takes longer than the configured response timeout to start returning a response[0m
08:55:56.802 [1426213428@qtp-259077766-2] ERROR WireMock - /slowResponseHeader
java.lang.RuntimeException: java.lang.InterruptedException: sleep interrupted
	at com.github.tomakehurst.wiremock.http.StubResponseRenderer.addDelayIfSpecifiedGloballyOrIn(StubResponseRenderer.java:79) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.http.StubResponseRenderer.render(StubResponseRenderer.java:45) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.http.AbstractRequestHandler.handle(AbstractRequestHandler.java:40) ~[wiremock-1.54.jar:na]
	at com.github.tomakehurst.wiremock.jetty6.Jetty6HandlerDispatchingServlet.service(Jetty6HandlerDispatchingServlet.java:98) ~[wiremock-1.54.jar:na]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) ~[servlet-api-2.5-20081211.jar:na]
	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) ~[jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:401) ~[jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.Server.handle(Server.java:326) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) [jetty-6.1.26.jar:6.1.26]
	at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228) [jetty-6.1.26.jar:6.1.26]
	at com.github.tomakehurst.wiremock.jetty6.DelayableSocketConnector$1.run(DelayableSocketConnector.java:49) [wiremock-1.54.jar:na]
	at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) [jetty-util-6.1.26.jar:6.1.26]
Caused by: java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method) ~[na:1.8.0_121]
	at com.github.tomakehurst.wiremock.http.StubResponseRenderer.addDelayIfSpecifiedGloballyOrIn(StubResponseRenderer.java:77) ~[wiremock-1.54.jar:na]
	... 18 common frames omitted
Styx http port was: [35713]
Styx https port was: [-1]
08:55:57.102 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:55:57.106 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:55:57.106 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:55:57.107 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:55:57.107 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
08:55:57.118 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
[32mOriginCancellationMetrics:[0m
08:55:57.120 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:55:57.120 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:57.121 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:57.121 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@7b6e5c12
08:55:57.122 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:55:57.125 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:55:57.126 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:55:57.126 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:57.126 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:55:57.128 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:55:57.128 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:55:57.131 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44009
08:55:57.136 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:55:57.137 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:38871
08:55:57.138 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 10ms
Styx http port is: [44009]
Styx https port is: [-1]
08:55:57.139 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/OriginCancellationMetrics/, origins=[app-1:NettyOrigin:localhost:42583], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@42373389, com.hotels.styx.admin.dashboard.DashboardData$Downstream@9b21bd3, com.hotels.styx.admin.dashboard.DashboardDataSupplier@a62c7cd, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7661b5a]
08:55:57.140 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:57.140 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:55:57.141 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:NettyOrigin
08:55:57.142 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:55:57.142 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:55:57.147 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/OriginCancellationMetrics/ current routes=[/OriginCancellationMetrics/]
08:55:57.148 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/OriginCancellationMetrics/, origins=[app-1:NettyOrigin:localhost:42583], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32morigins.<ID>.cancelled metric[0m
08:55:57.163 [ScalaTest-main-running-OriginCancellationMetrics] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
[32m- Is not incremented on success[0m
08:55:59.425 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:44009/OriginCancellationMetrics/2, headers=[Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=8b3100ad-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http, Host=localhost:44009], id=8b3100ad-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.client.BadHttpResponseException exceptionMessage="Bad HTTP Response received from origin. origin=app-1:NettyOrigin:localhost:42583."
08:55:59.426 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=8b3100ad-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app-1:NettyOrigin:localhost:42583., state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:44009/OriginCancellationMetrics/2, headers=[Host=localhost:44009], id=8b3100ad-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:55:59.431 [Proxy-Worker-1-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="502 Bad Gateway", exception="com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app-1:NettyOrigin:localhost:42583., cause="com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app-1:NettyOrigin:localhost:42583.", cause="java.lang.IllegalArgumentException: Duplicate Content-Length found. [0, 0]""
08:55:59.433 [ScalaTest-main-running-OriginCancellationMetrics] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
[32m- Is incremented on an origin error[0m
08:56:01.766 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:01.767 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:01.767 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
Styx metrics after BadResponseFromOriginSpec: connections.bytes-received={count=180}
connections.bytes-sent={count=291}
connections.eventloop.Proxy-Worker-0-Thread.channels={count=2, max=1, mean=0.5, min=0, p50=1.0, p75=1.0, p95=1.0, p98=1.0, p99=1.0, p999=1.0, stddev=0.5}
connections.eventloop.Proxy-Worker-0-Thread.registered-channel-count={count=0}
connections.eventloop.Proxy-Worker-1-Thread.channels={count=2, max=1, mean=0.5, min=0, p50=1.0, p75=1.0, p95=1.0, p98=1.0, p99=1.0, p999=1.0, stddev=0.5}
connections.eventloop.Proxy-Worker-1-Thread.registered-channel-count={count=0}
connections.idleClosed={count=0, max=0, mean=0.0, min=0, p50=0.0, p75=0.0, p95=0.0, p98=0.0, p99=0.0, p999=0.0, stddev=0.0}
connections.total-connections={count=0}
jvm.bufferpool.direct.capacity={value=375}
jvm.bufferpool.direct.count={value=2}
jvm.bufferpool.direct.used={value=376}
jvm.bufferpool.mapped.capacity={value=0}
jvm.bufferpool.mapped.count={value=0}
jvm.bufferpool.mapped.used={value=0}
jvm.gc.PS-MarkSweep.count={value=3}
jvm.gc.PS-MarkSweep.time={value=243}
jvm.gc.PS-Scavenge.count={value=6}
jvm.gc.PS-Scavenge.time={value=442}
jvm.memory.heap.committed={value=1221591040}
jvm.memory.heap.init={value=528482304}
jvm.memory.heap.max={value=7499415552}
jvm.memory.heap.usage={value=0.10718864935889874}
jvm.memory.heap.used={value=803852224}
jvm.memory.non-heap.committed={value=99155968}
jvm.memory.non-heap.init={value=2555904}
jvm.memory.non-heap.max={value=-1}
jvm.memory.non-heap.usage={value=-9.6108248E7}
jvm.memory.non-heap.used={value=96108248}
jvm.memory.pools.Code-Cache.committed={value=30212096}
jvm.memory.pools.Code-Cache.init={value=2555904}
jvm.memory.pools.Code-Cache.max={value=251658240}
jvm.memory.pools.Code-Cache.usage={value=0.11924006144205729}
jvm.memory.pools.Code-Cache.used={value=30007744}
jvm.memory.pools.Compressed-Class-Space.committed={value=8126464}
jvm.memory.pools.Compressed-Class-Space.init={value=0}
jvm.memory.pools.Compressed-Class-Space.max={value=1073741824}
jvm.memory.pools.Compressed-Class-Space.usage={value=0.007178492844104767}
jvm.memory.pools.Compressed-Class-Space.used={value=7707848}
jvm.memory.pools.Metaspace.committed={value=60817408}
jvm.memory.pools.Metaspace.init={value=0}
jvm.memory.pools.Metaspace.max={value=-1}
jvm.memory.pools.Metaspace.usage={value=0.9599892188762796}
jvm.memory.pools.Metaspace.used={value=58384056}
jvm.memory.pools.PS-Eden-Space.committed={value=598736896}
jvm.memory.pools.PS-Eden-Space.init={value=132120576}
jvm.memory.pools.PS-Eden-Space.max={value=2754084864}
jvm.memory.pools.PS-Eden-Space.usage={value=0.18835705420005533}
jvm.memory.pools.PS-Eden-Space.used={value=518751312}
jvm.memory.pools.PS-Eden-Space.used-after-gc={value=0}
jvm.memory.pools.PS-Old-Gen.committed={value=601358336}
jvm.memory.pools.PS-Old-Gen.init={value=352321536}
jvm.memory.pools.PS-Old-Gen.max={value=5624561664}
jvm.memory.pools.PS-Old-Gen.usage={value=0.04686872466654141}
jvm.memory.pools.PS-Old-Gen.used={value=263616032}
jvm.memory.pools.PS-Old-Gen.used-after-gc={value=141390384}
jvm.memory.pools.PS-Survivor-Space.committed={value=21495808}
jvm.memory.pools.PS-Survivor-Space.init={value=22020096}
jvm.memory.pools.PS-Survivor-Space.max={value=21495808}
jvm.memory.pools.PS-Survivor-Space.usage={value=0.999491621808308}
jvm.memory.pools.PS-Survivor-Space.used={value=21484880}
jvm.memory.pools.PS-Survivor-Space.used-after-gc={value=21484880}
jvm.memory.total.committed={value=1320747008}
jvm.memory.total.init={value=531038208}
jvm.memory.total.max={value=7499415551}
jvm.memory.total.used={value=899951872}
jvm.netty.pooled-allocator.usedDirectMemory={value=536870912}
jvm.netty.pooled-allocator.usedHeapMemory={value=0}
jvm.netty.unpooled-allocator.usedDirectMemory={value=7}
jvm.netty.unpooled-allocator.usedHeapMemory={value=0}
jvm.thread.blocked.count={value=0}
jvm.thread.count={value=219}
jvm.thread.daemon.count={value=21}
jvm.thread.deadlock.count={value=0}
jvm.thread.deadlocks={value=[]}
jvm.thread.new.count={value=0}
jvm.thread.runnable.count={value=131}
jvm.thread.terminated.count={value=0}
jvm.thread.timed_waiting.count={value=46}
jvm.thread.waiting.count={value=42}
jvm.uptime={value=150496}
jvm.uptime.formatted={value=0d 0h 2m}
origins.app-1.NettyOrigin.connectionspool.available-connections={value=0}
origins.app-1.NettyOrigin.connectionspool.busy-connections={value=0}
origins.app-1.NettyOrigin.connectionspool.connection-attempts={value=1}
origins.app-1.NettyOrigin.connectionspool.connection-failures={value=0}
origins.app-1.NettyOrigin.connectionspool.connections-closed={value=1}
origins.app-1.NettyOrigin.connectionspool.connections-terminated={value=1}
origins.app-1.NettyOrigin.connectionspool.pending-connections={value=0}
origins.app-1.NettyOrigin.connectionspool.ttfb={value=0}
origins.app-1.NettyOrigin.requests.cancelled={count=1}
origins.app-1.NettyOrigin.requests.error-rate={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
origins.app-1.NettyOrigin.requests.latency={count=1, max=2.490367, mean=2.482176, min=2.4739839999999997, p50=2.490367, p75=2.490367, p95=2.490367, p98=2.490367, p99=2.490367, p999=2.490367, stddev=0.0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.21530945332554946, duration_units=milliseconds, rate_units=calls/second}
origins.app-1.NettyOrigin.requests.response.status.200={count=2, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.43159037106353537, units=events/second}
origins.app-1.NettyOrigin.requests.response.status.5xx={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
origins.app-1.NettyOrigin.requests.success-rate={count=2, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4306410640250299, units=events/second}
origins.app-1.NettyOrigin.status={value=1}
origins.app-1.requests.cancelled={count=1}
origins.app-1.requests.error-rate={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
origins.app-1.requests.latency={count=1, max=2.686975, mean=2.678784, min=2.670592, p50=2.686975, p75=2.686975, p95=2.686975, p98=2.686975, p99=2.686975, p999=2.686975, stddev=0.0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.21528988991970657, duration_units=milliseconds, rate_units=calls/second}
origins.app-1.requests.response.status.200={count=2, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4315842188312012, units=events/second}
origins.app-1.requests.success-rate={count=2, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4306119840055371, units=events/second}
requests.cancelled.responseError={count=1}
requests.error-rate.500={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
requests.latency={count=2, max=11.599871, mean=8.593408, min=5.603327999999999, p50=5.636095, p75=11.599871, p95=11.599871, p98=11.599871, p99=11.599871, p999=11.599871, stddev=2.973696, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.42807284546261254, duration_units=milliseconds, rate_units=calls/second}
requests.outstanding={count=0}
requests.received={count=2, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4281321647563225, units=events/second}
requests.response.sent={count=2}
requests.response.status.1xx={count=0}
requests.response.status.2xx={count=1}
requests.response.status.3xx={count=0}
requests.response.status.4xx={count=0}
requests.response.status.500={count=0}
requests.response.status.501={count=0}
requests.response.status.502={count=1}
requests.response.status.503={count=0}
requests.response.status.504={count=0}
requests.response.status.521={count=0}
requests.response.status.5xx={count=1}
requests.response.status.unrecognised={count=0}
styx.exception.com_hotels_styx_client_BadHttpResponseException={count=1}
styx.response.status.502={count=1}
styx.server.http.requests={count=2, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4312023686128938, units=events/second}
styx.server.http.responses.200={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.21591666146985852, units=events/second}
styx.server.http.responses.502={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4227328908723721, units=events/second}
Styx http port was: [44009]
Styx https port was: [-1]
08:56:04.102 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:04.106 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:04.106 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:04.106 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:04.107 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mFileBasedOriginsFileChangeMonitorSpec:[0m
Updating origins configuration to /tmp/1539154419779-0/origins.yml
---
- id: "appv2"
  path: "/app02/"
  connectionPool:
    maxConnectionsPerHost: 45
    maxPendingConnectionsPerHost: 15
    socketTimeoutMillis: 120000
    connectTimeoutMillis: 1000
    pendingConnectionTimeoutMillis: 8000
  healthCheck:
    uri: "/version.txt"
    intervalMillis: 5000
  responseTimeoutMillis: 60000
  origins:
  - { id: "app1", host: "localhost:38073" }

[32m- Automatically detects changes in origins file.[0m
08:56:06.277 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
[32mOriginResponseResiliencySpec:[0m
08:56:06.279 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:06.279 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:06.280 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:06.281 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@4068102e
08:56:06.282 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:06.286 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:06.287 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:06.287 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:06.288 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:06.289 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:06.290 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:06.295 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:46095
08:56:06.298 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:06.299 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:34535
08:56:06.299 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 10ms
Styx http port is: [46095]
Styx https port is: [-1]
08:56:06.301 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:localhost:43381:localhost:43381], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1e0895f5, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1ac4ccad, com.hotels.styx.admin.dashboard.DashboardDataSupplier@fd9ebde, com.hotels.styx.admin.dashboard.DashboardData$Downstream@14982a82]
08:56:06.302 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:06.302 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:06.303 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:localhost:43381
08:56:06.304 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:06.304 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:06.305 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:56:06.305 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:localhost:43381:localhost:43381], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx origin response resiliency[0m
[32m- should pass through valid responses and transforms invalid responses to responses with relevant status codes[0m
[32m  + Setting ScalaCheck RNG seed value: 1539154566312 for: origin response handling [0m
[32m  + In case of a test failure, use this seed to re-run the test.[0m
[32mIt will generate an identical sequence of inputs for[0m
[32mdebugging purposes. [0m
Styx http port was: [46095]
Styx https port was: [-1]
08:56:09.290 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:09.293 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:09.294 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:09.295 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:09.299 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mPluginErrorHandlingSpec:[0m
08:56:09.316 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:09.317 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin failBeforeInterceptor instrumented
08:56:09.318 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin failAfterInterceptor instrumented
08:56:09.318 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:09.318 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.319 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.320 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@ec8f4b9
08:56:09.321 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:09.324 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:09.326 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:09.326 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.326 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.328 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:09.329 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:09.331 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:34045
08:56:09.334 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:09.335 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:42551
08:56:09.336 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
Styx http port is: [34045]
Styx https port is: [-1]
08:56:09.338 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:generic-app-01:localhost:41067], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@36480b2d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@27d33393, com.hotels.styx.admin.dashboard.DashboardDataSupplier@1f6917fb, com.hotels.styx.admin.dashboard.DashboardData$Downstream@41eb94bc]
08:56:09.338 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:09.338 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:09.339 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:generic-app-01
08:56:09.340 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:09.340 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:09.341 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:56:09.341 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/, origins=[appOne:generic-app-01:localhost:41067], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx as a plugin container[0m
08:56:09.349 [Proxy-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=911bbd88-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.api.plugins.spi.PluginException: failBeforeInterceptor: something went wrong, state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:34045/foo, headers=[Fail_before_handle=true, Host=localhost:34045], id=911bbd88-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
[32m- Catches exceptions from plugins handling requests, and maps them to INTERNAL_SERVER_ERRORs[0m
08:56:09.353 [Proxy-Worker-0-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="500 Internal Server Error" during request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:34045/foo, headers=[Fail_before_handle=true, Host=localhost:34045], id=911bbd88-cc59-11e8-9327-0242ac1147ce}, clientAddress=/127.0.0.1:37486
com.hotels.styx.api.plugins.spi.PluginException: failBeforeInterceptor: something went wrong
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.intercept(InstrumentedPlugin.java:96) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline.handle(StandardHttpPipeline.java:54) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.HttpInterceptorPipeline.handle(HttpInterceptorPipeline.java:59) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:91) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.RequestEnrichingInterceptor.intercept(RequestEnrichingInterceptor.java:47) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.HopByHopHeadersRemovingInterceptor.intercept(HopByHopHeadersRemovingInterceptor.java:38) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.ViaHeaderAppendingInterceptor.intercept(ViaHeaderAppendingInterceptor.java:43) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.UnexpectedRequestContentLengthRemover.intercept(UnexpectedRequestContentLengthRemover.java:33) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.interceptors.ConfigurationContextResolverInterceptor.intercept(ConfigurationContextResolverInterceptor.java:42) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline$HttpInterceptorChain.proceed(StandardHttpPipeline.java:86) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.StandardHttpPipeline.handle(StandardHttpPipeline.java:54) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.routing.handlers.HttpInterceptorPipeline.handle(HttpInterceptorPipeline.java:59) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.connectors.HttpPipelineHandler.onLegitimateRequest(HttpPipelineHandler.java:257) [styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.connectors.HttpPipelineHandler.lambda$createStateMachine$0(HttpPipelineHandler.java:144) [styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine$StateEventHandler.lambda$new$0(StateMachine.java:134) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine.handle(StateMachine.java:73) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.FsmEventProcessor.submit(FsmEventProcessor.java:49) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.QueueDrainingEventProcessor.submit(QueueDrainingEventProcessor.java:55) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.connectors.HttpPipelineHandler.channelRead0(HttpPipelineHandler.java:209) [styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.connectors.HttpPipelineHandler.channelRead0(HttpPipelineHandler.java:93) [styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: java.lang.RuntimeException: something went wrong
	at com.hotels.styx.plugins.PluginErrorHandlingSpec.com$hotels$styx$plugins$PluginErrorHandlingSpec$$failIfHeaderPresent(PluginErrorHandlingSpec.scala:106) ~[test-classes/:na]
	at com.hotels.styx.plugins.PluginErrorHandlingSpec$FailBeforeHandleInterceptor.intercept(PluginErrorHandlingSpec.scala:84) ~[test-classes/:na]
	at com.hotels.styx.proxy.plugin.NamedPlugin.intercept(NamedPlugin.java:93) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.intercept(InstrumentedPlugin.java:91) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	... 76 common frames omitted
08:56:09.366 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=911d1d19-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.api.plugins.spi.PluginException: failAfterInterceptor: something went wrong, state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:34045/foo, headers=[Fail_after_handle=true, Content-Length=3, Host=localhost:34045], id=911d1d19-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:56:09.392 [Proxy-Worker-1-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="500 Internal Server Error" during request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:34045/foo, headers=[Fail_after_handle=true, Content-Length=3, Host=localhost:34045], id=911d1d19-cc59-11e8-9327-0242ac1147ce}, clientAddress=/127.0.0.1:37488
com.hotels.styx.api.plugins.spi.PluginException: failAfterInterceptor: something went wrong
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.recordAndWrapError(InstrumentedPlugin.java:112) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.lambda$intercept$3(InstrumentedPlugin.java:93) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onError(OperatorOnErrorResumeNextViaFunction.java:140) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onError(OperatorDoOnEach.java:72) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onError(OperatorMap.java:85) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:70) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.observers.SafeSubscriber.onNext(SafeSubscriber.java:139) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onNext(OperatorOnErrorResumeNextViaFunction.java:154) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.observers.Subscribers$5.onNext(Subscribers.java:235) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.observers.Subscribers$5.onNext(Subscribers.java:235) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.emitScalar(OperatorMerge.java:393) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.tryEmit(OperatorMerge.java:355) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:840) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at com.hotels.styx.client.netty.connectionpool.NettyToStyxResponsePropagator.channelRead0(NettyToStyxResponsePropagator.java:143) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.connectionpool.RequestsToOriginMetricsCollector.channelRead(RequestsToOriginMetricsCollector.java:69) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:297) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:413) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.connectionpool.TimeToFirstByteHandler.channelRead(TimeToFirstByteHandler.java:54) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: java.lang.RuntimeException: something went wrong
	at com.hotels.styx.plugins.PluginErrorHandlingSpec$FailAfterHandleInterceptor$$anonfun$intercept$1.apply(PluginErrorHandlingSpec.scala:96) ~[test-classes/:na]
	at com.hotels.styx.plugins.PluginErrorHandlingSpec$FailAfterHandleInterceptor$$anonfun$intercept$1.apply(PluginErrorHandlingSpec.scala:93) ~[test-classes/:na]
	at scala.compat.java8.functionConverterImpls.AsJavaFunction.apply(FunctionConverters.scala:262) ~[scala-java8-compat_2.11-0.8.0.jar:na]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:66) ~[rxjava-1.1.6.jar:1.1.6]
	... 57 common frames omitted
Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: com.hotels.styx.api.HttpResponse.class
	at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:109) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:70) ~[rxjava-1.1.6.jar:1.1.6]
	... 57 common frames omitted
08:56:09.403 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=9122e97a-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.api.plugins.spi.PluginException: failAfterInterceptor: something went wrong, state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:34045/foo, headers=[Fail_after_handle=true, Content-Length=3, Host=localhost:34045], id=9122e97a-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
[32m- Catches exceptions from plugins handling responses, and maps them to INTERNAL_SERVER_ERRORs[0m
08:56:09.410 [Proxy-Worker-2-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="500 Internal Server Error" during request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:34045/foo, headers=[Fail_after_handle=true, Content-Length=3, Host=localhost:34045], id=9122e97a-cc59-11e8-9327-0242ac1147ce}, clientAddress=/127.0.0.1:37496
com.hotels.styx.api.plugins.spi.PluginException: failAfterInterceptor: something went wrong
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.recordAndWrapError(InstrumentedPlugin.java:112) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.proxy.plugin.InstrumentedPlugin.lambda$intercept$3(InstrumentedPlugin.java:93) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onError(OperatorOnErrorResumeNextViaFunction.java:140) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onError(OperatorDoOnEach.java:72) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onError(OperatorMap.java:85) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:70) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.observers.SafeSubscriber.onNext(SafeSubscriber.java:139) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onNext(OperatorOnErrorResumeNextViaFunction.java:154) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.observers.Subscribers$5.onNext(Subscribers.java:235) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.observers.Subscribers$5.onNext(Subscribers.java:235) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.emitScalar(OperatorMerge.java:393) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$MergeSubscriber.tryEmit(OperatorMerge.java:355) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:840) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:86) ~[rxjava-1.1.6.jar:1.1.6]
	at com.hotels.styx.client.netty.connectionpool.NettyToStyxResponsePropagator.channelRead0(NettyToStyxResponsePropagator.java:143) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.connectionpool.RequestsToOriginMetricsCollector.channelRead(RequestsToOriginMetricsCollector.java:69) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:297) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:413) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.client.netty.connectionpool.TimeToFirstByteHandler.channelRead(TimeToFirstByteHandler.java:54) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: java.lang.RuntimeException: something went wrong
	at com.hotels.styx.plugins.PluginErrorHandlingSpec$FailAfterHandleInterceptor$$anonfun$intercept$1.apply(PluginErrorHandlingSpec.scala:96) ~[test-classes/:na]
	at com.hotels.styx.plugins.PluginErrorHandlingSpec$FailAfterHandleInterceptor$$anonfun$intercept$1.apply(PluginErrorHandlingSpec.scala:93) ~[test-classes/:na]
	at scala.compat.java8.functionConverterImpls.AsJavaFunction.apply(FunctionConverters.scala:262) ~[scala-java8-compat_2.11-0.8.0.jar:na]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:66) ~[rxjava-1.1.6.jar:1.1.6]
	... 57 common frames omitted
Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: com.hotels.styx.api.HttpResponse.class
	at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:109) ~[rxjava-1.1.6.jar:1.1.6]
	at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:70) ~[rxjava-1.1.6.jar:1.1.6]
	... 57 common frames omitted
Styx http port was: [34045]
Styx https port was: [-1]
08:56:09.518 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:09.521 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:09.521 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:09.527 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:09.527 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mBackendServiceProviderSpec:[0m
08:56:09.541 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.ServiceProvision - Spi Extension type
08:56:09.569 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app, path=/, origins=[generic-app:app-01:localhost:37711], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=45, maxPendingConnectionsPerHost=15, connectTimeoutMillis=8000, socketTimeoutMillis=120000, pendingConnectionTimeoutMillis=8000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[]
08:56:09.570 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:09.572 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:09.572 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:09.573 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app-01
08:56:09.573 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:09.573 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:56:09.573 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:56:09.574 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:09.574 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.575 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.575 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@73844119
08:56:09.576 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:09.580 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app, path=/, origins=[generic-app:app-01:localhost:37711], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=45, maxPendingConnectionsPerHost=15, connectTimeoutMillis=8000, socketTimeoutMillis=120000, pendingConnectionTimeoutMillis=8000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:56:09.582 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:09.582 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.582 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.583 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:09.583 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:09.585 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:41493
08:56:09.587 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:09.589 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:43779
08:56:09.589 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 6ms
[32mSPI Backend Service Provider[0m
[32m- Loads during startup[0m
Styx http port was: [41493]
Styx https port was: [-1]
08:56:09.713 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:09.716 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:09.716 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:09.717 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:09.717 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mChunkedRequestSpec:[0m
08:56:09.732 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:09.734 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:09.734 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.736 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.737 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@4228bf58
08:56:09.738 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:09.741 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:09.742 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:09.743 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.743 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.745 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:09.748 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:09.754 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:38089
08:56:09.756 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:09.758 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:33773
08:56:09.758 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 13ms
Styx http port is: [38089]
Styx https port is: [-1]
08:56:09.760 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/chunked/1, origins=[appOne:generic-app-01:localhost:42703], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@2f84acf7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@291373d3, com.hotels.styx.admin.dashboard.DashboardDataSupplier@372ca2d6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3204e238]
08:56:09.760 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:09.761 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:09.761 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:generic-app-01
08:56:09.762 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:09.762 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:09.763 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/chunked/1 current routes=[/chunked/1]
08:56:09.763 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/chunked/1, origins=[appOne:generic-app-01:localhost:42703], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mChunked HTTP content handling in Styx[0m
[32m- Should proxy chunked request content[0m
Styx http port was: [38089]
Styx https port was: [-1]
08:56:09.928 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:09.931 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:09.932 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:09.933 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:09.933 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mHttpsSpec:[0m
08:56:09.951 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:09.953 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}, HttpsConnectorConfig{port=0, sslProvider=JDK, certificateFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt, certificateKeyFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key, sessionTimeoutMillis=300000, sessionCacheSize=0, cipherSuites=[TLS_RSA_WITH_AES_128_GCM_SHA256], protocols=}] name=Proxy
08:56:09.953 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.962 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.963 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@2f5b8250
08:56:09.964 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:09.968 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:09.969 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:09.969 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.970 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:09.972 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:09.979 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:09.984 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:40993
08:56:09.986 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:40001
08:56:09.987 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:09.988 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:38009
08:56:09.988 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 16ms
Styx http port is: [40993]
Styx https port is: [40001]
[32mTerminating https[0m
08:56:09.992 [ScalaTest-main-running-HttpsSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=https-app, path=/secure, origins=[https-app:generic-app:localhost:44097], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@6cf0a747, protocols=[], cipherSuites=[]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@21505815, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7e53339, com.hotels.styx.admin.dashboard.DashboardDataSupplier@58fef7f7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@31ddb930]
08:56:09.993 [ScalaTest-main-running-HttpsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:09.993 [ScalaTest-main-running-HttpsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:09.994 [ScalaTest-main-running-HttpsSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=https-app:generic-app
08:56:09.995 [ScalaTest-main-running-HttpsSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:09.995 [ScalaTest-main-running-HttpsSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:09.995 [ScalaTest-main-running-HttpsSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/secure current routes=[/secure]
08:56:09.996 [ScalaTest-main-running-HttpsSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=https-app, path=/secure, origins=[https-app:generic-app:localhost:44097], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@6cf0a747, protocols=[], cipherSuites=[]}}], removed=[], updated=[]}
08:56:10.238 [mock-stub-generic-app-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - generic-app received: https://localhost:40001/secure
[]
08:56:10.253 [mock-admin-generic-app-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 80, 97, 116, 104, 34, 32, 58, 32, 34, 47, 115, 101, 99, 117, 114, 101, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 44, 10, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 88, 45, 70, 111, 114, 119, 97, 114, 100, 101, 100, 45, 80, 114, 111, 116, 111, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 101, 113, 117, 97, 108, 84, 111, 34, 32, 58, 32, 34, 104, 116, 116, 112, 115, 34, 10, 32, 32, 32, 32, 125, 44, 10, 32, 32, 32, 32, 34, 72, 111, 115, 116, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 101, 113, 117, 97, 108, 84, 111, 34, 32, 58, 32, 34, 108, 111, 99, 97, 108, 104, 111, 115, 116, 58, 52, 48, 48, 48, 49, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
[32m- should set the X-Forward-Proto header for https request[0m
08:56:10.261 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:10.262 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:10.263 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:10.263 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [40993]
Styx https port was: [40001]
08:56:10.263 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:10.267 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:10.267 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:10.267 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:10.268 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mHttpResponseSpec:[0m
[32m- Determines response content length from server closing the connection.[0m
[32mBadFramingSpec:[0m
08:56:10.298 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:10.300 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:10.300 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:10.301 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:10.301 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@4acb7ecc
08:56:10.302 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:10.305 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:10.305 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:10.306 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:10.306 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:10.307 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:10.307 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:10.312 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44891
08:56:10.314 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:10.315 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35839
08:56:10.316 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 9ms
Styx http port is: [44891]
Styx https port is: [-1]
08:56:10.318 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/badFramingSpec/one/, origins=[app-1:localhost:42267:localhost:42267], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@7c8c70d6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1ab5f08a, com.hotels.styx.admin.dashboard.DashboardDataSupplier@6edf29c1, com.hotels.styx.admin.dashboard.DashboardData$Downstream@79a04e5f]
08:56:10.318 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:10.319 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:10.319 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:localhost:42267
08:56:10.320 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:10.320 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:10.320 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/badFramingSpec/one/ current routes=[/badFramingSpec/one/]
08:56:10.321 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/badFramingSpec/one/, origins=[app-1:localhost:42267:localhost:42267], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:56:10.322 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-2, path=/badFramingSpec/two/, origins=[app-2:generic-app-01:localhost:35845], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@7c8c70d6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1ab5f08a, com.hotels.styx.admin.dashboard.DashboardDataSupplier@6edf29c1, com.hotels.styx.admin.dashboard.DashboardData$Downstream@79a04e5f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3dd31157]
08:56:10.323 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:10.323 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:10.324 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-2:generic-app-01
08:56:10.338 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:10.338 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:10.338 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/badFramingSpec/two/ current routes=[/badFramingSpec/one/, /badFramingSpec/two/]
08:56:10.340 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-2, path=/badFramingSpec/two/, origins=[app-2:generic-app-01:localhost:35845], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mDetects bad HTTP message framing.[0m
08:56:10.353 [Proxy-Worker-0-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="400 Bad Request"
io.netty.handler.codec.DecoderException: com.hotels.styx.server.BadRequestException: Illegal character in query at index 20: /no5_such3_file7.pl?"><script>alert(73541);</script>56519<script>alert(1)</script>0e134 in DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
GET /no5_such3_file7.pl?"><script>alert(73541);</script>56519<script>alert(1)</script>0e134 HTTP/1.1
Host: localhost:44891
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.server.BadRequestException: Illegal character in query at index 20: /no5_such3_file7.pl?"><script>alert(73541);</script>56519<script>alert(1)</script>0e134 in DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
GET /no5_such3_file7.pl?"><script>alert(73541);</script>56519<script>alert(1)</script>0e134 HTTP/1.1
Host: localhost:44891
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:102) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:63) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 47 common frames omitted
Caused by: java.lang.IllegalArgumentException: Illegal character in query at index 20: /no5_such3_file7.pl?"><script>alert(73541);</script>56519<script>alert(1)</script>0e134
	at java.net.URI.create(URI.java:852) ~[na:1.8.0_121]
	at com.hotels.styx.api.Url$Builder.url(Url.java:449) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.makeAStyxRequestFrom(NettyToStyxRequestDecoder.java:165) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.toStyxRequest(NettyToStyxRequestDecoder.java:137) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:90) ~[styx-server-0.9-SNAPSHOT.jar:na]
	... 49 common frames omitted
Caused by: java.net.URISyntaxException: Illegal character in query at index 20: /no5_such3_file7.pl?"><script>alert(73541);</script>56519<script>alert(1)</script>0e134
	at java.net.URI$Parser.fail(URI.java:2848) ~[na:1.8.0_121]
	at java.net.URI$Parser.checkChars(URI.java:3021) ~[na:1.8.0_121]
	at java.net.URI$Parser.parseHierarchical(URI.java:3111) ~[na:1.8.0_121]
	at java.net.URI$Parser.parse(URI.java:3063) ~[na:1.8.0_121]
	at java.net.URI.<init>(URI.java:588) ~[na:1.8.0_121]
	at java.net.URI.create(URI.java:850) ~[na:1.8.0_121]
	... 53 common frames omitted
[32m- Returns BAD_REQUEST Bad Request if client request contains illegal url.[0m
08:56:10.367 [Proxy-Worker-1-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="400 Bad Request"
io.netty.handler.codec.DecoderException: com.hotels.styx.server.BadRequestException: Duplicate Content-Length found. [50, 60] in DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
GET http://localhost:44891/badFramingSpec/one/foo/e HTTP/1.1
Content-Length: 50
Content-Length: 60
Host: localhost:44891
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.server.BadRequestException: Duplicate Content-Length found. [50, 60] in DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
GET http://localhost:44891/badFramingSpec/one/foo/e HTTP/1.1
Content-Length: 50
Content-Length: 60
Host: localhost:44891
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:102) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:63) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 47 common frames omitted
Caused by: java.lang.IllegalArgumentException: Duplicate Content-Length found. [50, 60]
	at com.google.common.base.Preconditions.checkArgument(Preconditions.java:145) ~[guava-18.0.jar:na]
	at com.hotels.styx.api.HttpRequest$Builder.requireNotDuplicatedHeader(HttpRequest.java:760) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.api.HttpRequest$Builder.ensureContentLengthIsValid(HttpRequest.java:752) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.api.HttpRequest$Builder.build(HttpRequest.java:729) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.toStyxRequest(NettyToStyxRequestDecoder.java:139) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:90) ~[styx-server-0.9-SNAPSHOT.jar:na]
	... 49 common frames omitted
[32m- Returns BAD_REQUEST Bad Request if client request contains multiple differing content-length headers.[0m
08:56:10.378 [Proxy-Worker-2-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="400 Bad Request"
io.netty.handler.codec.DecoderException: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultHttpRequest(decodeResult: failure(java.lang.NumberFormatException: For input string: "50, 60"), version: HTTP/1.1)
GET http://localhost:44891/badFramingSpec/one/foo/f HTTP/1.1
Content-Length: 50, 60
Host: localhost:44891
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultHttpRequest(decodeResult: failure(java.lang.NumberFormatException: For input string: "50, 60"), version: HTTP/1.1)
GET http://localhost:44891/badFramingSpec/one/foo/f HTTP/1.1
Content-Length: 50, 60
Host: localhost:44891
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:78) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:63) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 47 common frames omitted
Caused by: java.lang.NumberFormatException: For input string: "50, 60"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) ~[na:1.8.0_121]
	at java.lang.Long.parseLong(Long.java:589) ~[na:1.8.0_121]
	at java.lang.Long.parseLong(Long.java:631) ~[na:1.8.0_121]
	at io.netty.handler.codec.http.HttpUtil.getContentLength(HttpUtil.java:186) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.contentLength(HttpObjectDecoder.java:621) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.readHeaders(HttpObjectDecoder.java:611) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.decode(HttpObjectDecoder.java:227) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpServerCodec$HttpServerRequestDecoder.decode(HttpServerCodec.java:101) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 26 common frames omitted
[32m- Returns BAD_REQUEST Bad Request if client request contains multiple differing content-length values.[0m
08:56:10.387 [Proxy-Worker-3-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="400 Bad Request"
io.netty.handler.codec.DecoderException: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultHttpRequest(decodeResult: failure(java.lang.NumberFormatException: For input string: "50, 50"), version: HTTP/1.1)
GET http://localhost:44891/badFramingSpec/one/foo/g HTTP/1.1
Content-Length: 50, 50
Host: localhost:44891
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ServerProtocolDistributionRecorder.channelRead(ServerProtocolDistributionRecorder.java:46) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser.channelRead(ProxyConnectorFactory.java:196) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.channelRead(RequestTimeoutHandler.java:42) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at com.hotels.styx.server.netty.handlers.ChannelStatisticsHandler.channelRead(ChannelStatisticsHandler.java:103) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:797) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:404) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:304) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.server.BadRequestException: Error while decoding request: DefaultHttpRequest(decodeResult: failure(java.lang.NumberFormatException: For input string: "50, 50"), version: HTTP/1.1)
GET http://localhost:44891/badFramingSpec/one/foo/g HTTP/1.1
Content-Length: 50, 50
Host: localhost:44891
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:78) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.server.netty.codec.NettyToStyxRequestDecoder.decode(NettyToStyxRequestDecoder.java:63) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 47 common frames omitted
Caused by: java.lang.NumberFormatException: For input string: "50, 50"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) ~[na:1.8.0_121]
	at java.lang.Long.parseLong(Long.java:589) ~[na:1.8.0_121]
	at java.lang.Long.parseLong(Long.java:631) ~[na:1.8.0_121]
	at io.netty.handler.codec.http.HttpUtil.getContentLength(HttpUtil.java:186) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.contentLength(HttpObjectDecoder.java:621) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.readHeaders(HttpObjectDecoder.java:611) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.decode(HttpObjectDecoder.java:227) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpServerCodec$HttpServerRequestDecoder.decode(HttpServerCodec.java:101) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	... 26 common frames omitted
[32m- Returns BAD_REQUEST Bad Request if client request contains multiple identical content-length values.[0m
[32m- Assumes chunked encoding when response from origins contains both Content-Length and chunked encoding[0m
[32m- Assumes inbound request is chunked when it contains both Content-Length and chunked transfer encoding.[0m
08:56:10.546 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:10.547 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [44891]
Styx https port was: [-1]
08:56:10.547 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:10.550 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:10.550 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:10.551 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:10.551 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
08:56:10.564 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:10.565 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:10.566 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:10.567 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:10.567 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@b1534d3
08:56:10.568 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:10.571 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:10.572 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:10.572 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:10.572 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:10.573 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:10.574 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:10.577 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:42429
08:56:10.588 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:10.591 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:43647
[32mBigFileDownloadSpec:[0m
[33m- Big file requests !!! IGNORED !!![0m
[32mBadResponseFromOriginSpec:[0m
08:56:10.602 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 28ms
Styx http port is: [42429]
Styx https port is: [-1]
08:56:10.603 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/badResponseFromOriginSpec/, origins=[app-1:NettyOrigin:localhost:33783], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@b9a77c8, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7a81065e, com.hotels.styx.admin.dashboard.DashboardDataSupplier@6cd3ad8a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@75181b50]
08:56:10.604 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:10.604 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:10.605 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:NettyOrigin
08:56:10.605 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:10.606 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:10.606 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/badResponseFromOriginSpec/ current routes=[/badResponseFromOriginSpec/]
08:56:10.606 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/badResponseFromOriginSpec/, origins=[app-1:NettyOrigin:localhost:33783], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mHandling of bad responses from origins.[0m
[33m- Keeps serving requests after an origin responds before client has transmitted the previous request in full. !!! IGNORED !!![0m
08:56:10.619 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:42429/badResponseFromOriginSpec/3, headers=[Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=91dd11c3-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http, Host=localhost:42429], id=91dd11c3-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.client.BadHttpResponseException exceptionMessage="Bad HTTP Response received from origin. origin=app-1:NettyOrigin:localhost:33783."
08:56:10.620 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=91dd11c3-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app-1:NettyOrigin:localhost:33783., state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:42429/badResponseFromOriginSpec/3, headers=[Host=localhost:42429], id=91dd11c3-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:56:10.623 [Netty test origin-Worker-0-Thread] WARN  i.n.channel.DefaultChannelPipeline - An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.
io.netty.channel.unix.Errors$NativeIoException: syscall:read(..) failed: Connection reset by peer
	at io.netty.channel.unix.FileDescriptor.readAddress(..)(Unknown Source) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
08:56:10.626 [Proxy-Worker-0-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="502 Bad Gateway", exception="com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app-1:NettyOrigin:localhost:33783., cause="io.netty.handler.codec.TooLongFrameException: HTTP header is larger than 8192 bytes.""
08:56:10.629 [ScalaTest-main-running-BadResponseFromOriginSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
[32m- Responds with 502 Bad Gateway when Styx is unable to read response from origin.[0m
08:56:12.883 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:12.884 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:12.885 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:14.998 [Health-Check-Monitor-appv2-Client-Worker-0-Thread] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="appv2=app1", change="ACTIVE->INACTIVE"
Styx metrics after BadResponseFromOriginSpec: connections.bytes-received={count=90}
connections.bytes-sent={count=142}
connections.eventloop.Proxy-Worker-0-Thread.channels={count=2, max=1, mean=0.5, min=0, p50=1.0, p75=1.0, p95=1.0, p98=1.0, p99=1.0, p999=1.0, stddev=0.5}
connections.eventloop.Proxy-Worker-0-Thread.registered-channel-count={count=0}
connections.idleClosed={count=0, max=0, mean=0.0, min=0, p50=0.0, p75=0.0, p95=0.0, p98=0.0, p99=0.0, p999=0.0, stddev=0.0}
connections.total-connections={count=0}
jvm.bufferpool.direct.capacity={value=375}
jvm.bufferpool.direct.count={value=2}
jvm.bufferpool.direct.used={value=376}
jvm.bufferpool.mapped.capacity={value=0}
jvm.bufferpool.mapped.count={value=0}
jvm.bufferpool.mapped.used={value=0}
jvm.gc.PS-MarkSweep.count={value=3}
jvm.gc.PS-MarkSweep.time={value=243}
jvm.gc.PS-Scavenge.count={value=8}
jvm.gc.PS-Scavenge.time={value=533}
jvm.memory.heap.committed={value=1540882432}
jvm.memory.heap.init={value=528482304}
jvm.memory.heap.max={value=7499415552}
jvm.memory.heap.usage={value=0.08699217525371236}
jvm.memory.heap.used={value=652390472}
jvm.memory.non-heap.committed={value=104267776}
jvm.memory.non-heap.init={value=2555904}
jvm.memory.non-heap.max={value=-1}
jvm.memory.non-heap.usage={value=-1.00746608E8}
jvm.memory.non-heap.used={value=100746608}
jvm.memory.pools.Code-Cache.committed={value=33488896}
jvm.memory.pools.Code-Cache.init={value=2555904}
jvm.memory.pools.Code-Cache.max={value=251658240}
jvm.memory.pools.Code-Cache.usage={value=0.13102620442708332}
jvm.memory.pools.Code-Cache.used={value=32973824}
jvm.memory.pools.Compressed-Class-Space.committed={value=8388608}
jvm.memory.pools.Compressed-Class-Space.init={value=0}
jvm.memory.pools.Compressed-Class-Space.max={value=1073741824}
jvm.memory.pools.Compressed-Class-Space.usage={value=0.007333584129810333}
jvm.memory.pools.Compressed-Class-Space.used={value=7874376}
jvm.memory.pools.Metaspace.committed={value=62390272}
jvm.memory.pools.Metaspace.init={value=0}
jvm.memory.pools.Metaspace.max={value=-1}
jvm.memory.pools.Metaspace.usage={value=0.9600600555163472}
jvm.memory.pools.Metaspace.used={value=59898408}
jvm.memory.pools.PS-Eden-Space.committed={value=902299648}
jvm.memory.pools.PS-Eden-Space.init={value=132120576}
jvm.memory.pools.PS-Eden-Space.max={value=2717384704}
jvm.memory.pools.PS-Eden-Space.usage={value=0.12266041518131693}
jvm.memory.pools.PS-Eden-Space.used={value=333315536}
jvm.memory.pools.PS-Eden-Space.used-after-gc={value=0}
jvm.memory.pools.PS-Old-Gen.committed={value=601358336}
jvm.memory.pools.PS-Old-Gen.init={value=352321536}
jvm.memory.pools.PS-Old-Gen.max={value=5624561664}
jvm.memory.pools.PS-Old-Gen.usage={value=0.05017252416418703}
jvm.memory.pools.PS-Old-Gen.used={value=282198456}
jvm.memory.pools.PS-Old-Gen.used-after-gc={value=141390384}
jvm.memory.pools.PS-Survivor-Space.committed={value=37224448}
jvm.memory.pools.PS-Survivor-Space.init={value=22020096}
jvm.memory.pools.PS-Survivor-Space.max={value=37224448}
jvm.memory.pools.PS-Survivor-Space.usage={value=0.9961623070945202}
jvm.memory.pools.PS-Survivor-Space.used={value=37081592}
jvm.memory.pools.PS-Survivor-Space.used-after-gc={value=37081592}
jvm.memory.total.committed={value=1645150208}
jvm.memory.total.init={value=531038208}
jvm.memory.total.max={value=7499415551}
jvm.memory.total.used={value=753342192}
jvm.netty.pooled-allocator.usedDirectMemory={value=536870912}
jvm.netty.pooled-allocator.usedHeapMemory={value=0}
jvm.netty.unpooled-allocator.usedDirectMemory={value=7}
jvm.netty.unpooled-allocator.usedHeapMemory={value=0}
jvm.thread.blocked.count={value=0}
jvm.thread.count={value=212}
jvm.thread.daemon.count={value=22}
jvm.thread.deadlock.count={value=0}
jvm.thread.deadlocks={value=[]}
jvm.thread.new.count={value=0}
jvm.thread.runnable.count={value=128}
jvm.thread.terminated.count={value=0}
jvm.thread.timed_waiting.count={value=42}
jvm.thread.waiting.count={value=42}
jvm.uptime={value=161611}
jvm.uptime.formatted={value=0d 0h 2m}
origins.app-1.NettyOrigin.connectionspool.available-connections={value=0}
origins.app-1.NettyOrigin.connectionspool.busy-connections={value=0}
origins.app-1.NettyOrigin.connectionspool.connection-attempts={value=1}
origins.app-1.NettyOrigin.connectionspool.connection-failures={value=0}
origins.app-1.NettyOrigin.connectionspool.connections-closed={value=1}
origins.app-1.NettyOrigin.connectionspool.connections-terminated={value=1}
origins.app-1.NettyOrigin.connectionspool.pending-connections={value=0}
origins.app-1.NettyOrigin.connectionspool.ttfb={value=0}
origins.app-1.NettyOrigin.requests.cancelled={count=1}
origins.app-1.NettyOrigin.requests.error-rate={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
origins.app-1.NettyOrigin.requests.latency={count=0, max=0.0, mean=NaN, min=9.223372036854775E12, p50=0.0, p75=0.0, p95=0.0, p98=0.0, p99=0.0, p999=0.0, stddev=NaN, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, duration_units=milliseconds, rate_units=calls/second}
origins.app-1.NettyOrigin.requests.response.status.200={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.43636867221679326, units=events/second}
origins.app-1.NettyOrigin.requests.response.status.5xx={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
origins.app-1.NettyOrigin.requests.success-rate={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.43454804117449763, units=events/second}
origins.app-1.NettyOrigin.status={value=1}
origins.app-1.requests.cancelled={count=1}
origins.app-1.requests.error-rate={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
origins.app-1.requests.latency={count=0, max=0.0, mean=NaN, min=9.223372036854775E12, p50=0.0, p75=0.0, p95=0.0, p98=0.0, p99=0.0, p999=0.0, stddev=NaN, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, duration_units=milliseconds, rate_units=calls/second}
origins.app-1.requests.response.status.200={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.43635617394315707, units=events/second}
origins.app-1.requests.success-rate={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.43448721292966025, units=events/second}
requests.cancelled.responseError={count=1}
requests.error-rate.500={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
requests.latency={count=1, max=11.862015, mean=11.829248, min=11.796479999999999, p50=11.862015, p75=11.862015, p95=11.862015, p98=11.862015, p99=11.862015, p999=11.862015, stddev=0.0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.427110885130918, duration_units=milliseconds, rate_units=calls/second}
requests.outstanding={count=0}
requests.received={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.42716998472468753, units=events/second}
requests.response.sent={count=1}
requests.response.status.1xx={count=0}
requests.response.status.2xx={count=0}
requests.response.status.3xx={count=0}
requests.response.status.4xx={count=0}
requests.response.status.500={count=0}
requests.response.status.501={count=0}
requests.response.status.502={count=1}
requests.response.status.503={count=0}
requests.response.status.504={count=0}
requests.response.status.521={count=0}
requests.response.status.5xx={count=1}
requests.response.status.unrecognised={count=0}
styx.exception.com_hotels_styx_client_BadHttpResponseException={count=1}
styx.response.status.502={count=1}
styx.server.http.requests={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4358109962616407, units=events/second}
styx.server.http.responses.502={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4376654413116803, units=events/second}
Styx http port was: [42429]
Styx https port was: [-1]
08:56:15.122 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:15.125 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:15.125 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:15.125 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:15.126 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mProxyResiliencySpec:[0m
08:56:15.136 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:15.138 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:15.138 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:15.139 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:15.139 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@298f0a0b
08:56:15.141 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:15.146 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:15.147 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:15.147 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:15.148 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:15.149 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:15.149 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:15.151 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44037
08:56:15.153 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:15.155 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:34041
08:56:15.156 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 6ms
Styx http port is: [44037]
Styx https port is: [-1]
08:56:15.159 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app, path=/, origins=[app:NettyOrigin:localhost:41973], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@10c72a6f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@70e94ecb, com.hotels.styx.admin.dashboard.DashboardDataSupplier@56cfe111, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7e446d92]
08:56:15.160 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:15.160 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:15.161 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:NettyOrigin
08:56:15.162 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:15.162 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:15.162 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:56:15.163 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app, path=/, origins=[app:NettyOrigin:localhost:41973], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx resiliency[0m
[32m- should reject requests with bad URIs[0m
[32m  + Setting ScalaCheck RNG seed value: 1539154575167 for: client request handling [0m
[32m  + In case of a test failure, use this seed to re-run the test.[0m
[32mIt will generate an identical sequence of inputs for[0m
[32mdebugging purposes. [0m
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 0, cap: 0, components=0))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 0, cap: 0, components=0))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 0, cap: 0, components=0))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 0, cap: 0, components=0))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 0, cap: 0, components=0))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 0, cap: 0, components=0))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 0, cap: 0, components=0))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 0, cap: 0, components=0))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 0, cap: 0, components=0))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 0, cap: 0, components=0))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 0, cap: 0, components=0))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
response=HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 11, cap: 11, components=1))
HTTP/1.1 400 Bad Request
X-Styx-Info: noJvmRouteSet;
Content-Length: 11
[32m- should reject requests with bad header names[0m
[32m  + Setting ScalaCheck RNG seed value: 1539154575673 for: client request handling [0m
[32m  + In case of a test failure, use this seed to re-run the test.[0m
[32mIt will generate an identical sequence of inputs for[0m
[32mdebugging purposes. [0m
Styx http port was: [44037]
Styx https port was: [-1]
08:56:16.151 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:16.152 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:16.152 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:16.153 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:16.153 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mAsyncRequestContentSpec:[0m
08:56:16.174 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:16.175 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin asyncDelayPlugin instrumented
08:56:16.175 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:16.176 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:16.177 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:16.177 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@18578491
08:56:16.178 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:16.182 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:16.184 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:16.184 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:16.185 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:16.186 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:16.186 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:16.187 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:45015
08:56:16.190 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:16.191 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:32879
08:56:16.192 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 6ms
Styx http port is: [45015]
Styx https port is: [-1]
08:56:16.193 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:36029], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@53c6f96d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@435cc7f9, com.hotels.styx.admin.dashboard.DashboardDataSupplier@4364712f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1b7a52dd]
08:56:16.193 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:16.194 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:16.194 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:generic-app-01
08:56:16.195 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:16.195 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:16.195 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:56:16.196 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:36029], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx as a plugin container[0m
[32m- Proxies requests when plugin processes request content asynchronously on a separate thread pool[0m
Styx http port was: [45015]
Styx https port was: [-1]
08:56:16.248 [Styx-Client-Worker-0-Thread] WARN  c.h.s.c.n.c.HttpRequestOperation - Origin responded too quickly to an ongoing request, or it was cancelled. Connection=[id: 0x83908bfc, L:/127.0.0.1:48846 - R:localhost/127.0.0.1:36029], Request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:45015/foobar, headers=[Content-Length=0, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=9531bb06-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http, Host=localhost:45015], id=9531bb06-cc59-11e8-9327-0242ac1147ce}.
08:56:16.277 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:16.278 [Styx-Client-Worker-0-Thread] WARN  c.h.s.s.n.c.HttpPipelineHandler - ResponseObservableCompletedEvent, state=TERMINATED, request=null, ongoingResponse=HttpResponse{version=HTTP/1.1, status=200 OK, headers=[Server=Jetty(6.1.26), X-Styx-Origin-Id=generic-app-01, Via=1.1 styx]}, prematureRequest=null
08:56:16.280 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:16.282 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:16.283 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:16.283 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mProtocolsSpec:[0m
08:56:16.300 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:16.301 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}, HttpsConnectorConfig{port=0, sslProvider=JDK, certificateFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt, certificateKeyFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key, sessionTimeoutMillis=300000, sessionCacheSize=0, cipherSuites=[TLS_RSA_WITH_AES_128_GCM_SHA256], protocols=}] name=Proxy
08:56:16.301 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:16.308 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:16.309 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@3c87fdf2
08:56:16.309 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:16.310 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - MetricsHandler instantiated with no caching
08:56:16.315 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JVMMetricsHandler instantiated with no caching
08:56:16.316 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:16.316 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JsonHandler instantiated with cache expiration of PT10S
08:56:16.317 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:16.317 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:16.318 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:16.319 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:16.319 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:16.322 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:45995
08:56:16.324 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:43027
08:56:16.325 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:16.326 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:37063
08:56:16.327 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
Styx http port is: [45995]
Styx https port is: [43027]
08:56:16.329 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne-http, path=/http/, origins=[appOne-http:app-01:localhost:45849], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@71c17a57, com.hotels.styx.admin.dashboard.DashboardData$Downstream@640ab13c, com.hotels.styx.admin.dashboard.DashboardDataSupplier@1e0a864d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@440e3ce6]
08:56:16.329 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:16.330 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:16.330 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne-http:app-01
08:56:16.331 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:16.331 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:16.331 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appOne-http, activeOrigins=[appOne-http:app-01:localhost:45849], inactiveOrigins=[], disabledOrigins=[]}
08:56:16.331 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/http/ current routes=[/http/]
08:56:16.332 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne-http, path=/http/, origins=[appOne-http:app-01:localhost:45849], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:56:16.333 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appOne-http, activeOrigins=[appOne-http:app-01:localhost:45849], inactiveOrigins=[], disabledOrigins=[]}
08:56:16.334 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne-https, path=/https/trustAllCerts/, origins=[appOne-https:app-ssl-01:localhost:38481], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@61bfc9bf, protocols=[], cipherSuites=[]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@71c17a57, com.hotels.styx.admin.dashboard.DashboardData$Downstream@640ab13c, com.hotels.styx.admin.dashboard.DashboardDataSupplier@1e0a864d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@440e3ce6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2c7106d9]
08:56:16.334 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:16.335 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:16.335 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne-https:app-ssl-01
08:56:16.336 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appOne-https, activeOrigins=[appOne-https:app-ssl-01:localhost:38481], inactiveOrigins=[], disabledOrigins=[]}
08:56:16.336 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:16.336 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:16.336 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/https/trustAllCerts/ current routes=[/https/trustAllCerts/, /http/]
08:56:16.337 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne-https, path=/https/trustAllCerts/, origins=[appOne-https:app-ssl-01:localhost:38481], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@61bfc9bf, protocols=[], cipherSuites=[]}}], removed=[], updated=[]}
08:56:16.339 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appOne-http, activeOrigins=[appOne-http:app-01:localhost:45849], inactiveOrigins=[], disabledOrigins=[]}
08:56:16.339 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appOne-https, activeOrigins=[appOne-https:app-ssl-01:localhost:38481], inactiveOrigins=[], disabledOrigins=[]}
08:56:16.339 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app2-https, path=/https/authenticate/secure/, origins=[app2-https:app-ssl-02:localhost:40063], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/protocolsSpec/truststore, trustStorePassword=[C@5e0ec41f, protocols=[], cipherSuites=[]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@71c17a57, com.hotels.styx.admin.dashboard.DashboardData$Downstream@640ab13c, com.hotels.styx.admin.dashboard.DashboardDataSupplier@1e0a864d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@440e3ce6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2c7106d9, com.hotels.styx.admin.dashboard.DashboardData$Downstream@f4a3a8d]
08:56:16.340 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:16.340 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:16.341 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app2-https:app-ssl-02
08:56:16.341 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=app2-https, activeOrigins=[app2-https:app-ssl-02:localhost:40063], inactiveOrigins=[], disabledOrigins=[]}
08:56:16.341 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:16.342 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:16.342 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/https/authenticate/secure/ current routes=[/https/authenticate/secure/, /https/trustAllCerts/, /http/]
08:56:16.343 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app2-https, path=/https/authenticate/secure/, origins=[app2-https:app-ssl-02:localhost:40063], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/protocolsSpec/truststore, trustStorePassword=[C@5e0ec41f, protocols=[], cipherSuites=[]}}], removed=[], updated=[]}
08:56:16.345 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=app2-https, activeOrigins=[app2-https:app-ssl-02:localhost:40063], inactiveOrigins=[], disabledOrigins=[]}
08:56:16.345 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appOne-http, activeOrigins=[appOne-http:app-01:localhost:45849], inactiveOrigins=[], disabledOrigins=[]}
08:56:16.345 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appOne-https, activeOrigins=[appOne-https:app-ssl-01:localhost:38481], inactiveOrigins=[], disabledOrigins=[]}
08:56:16.347 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app3-https, path=/https/authenticate/insecure/, origins=[app3-https:app-ssl-01:localhost:38481], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=false, sslProvider=JDK, additionalCerts=[], trustStorePath=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/protocolsSpec/truststore, trustStorePassword=[C@1f03fba0, protocols=[], cipherSuites=[]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@71c17a57, com.hotels.styx.admin.dashboard.DashboardData$Downstream@640ab13c, com.hotels.styx.admin.dashboard.DashboardDataSupplier@1e0a864d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@440e3ce6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2c7106d9, com.hotels.styx.admin.dashboard.DashboardData$Downstream@f4a3a8d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@17dd671f]
08:56:16.347 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:16.352 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:16.352 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app3-https:app-ssl-01
08:56:16.353 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:16.353 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=app3-https, activeOrigins=[app3-https:app-ssl-01:localhost:38481], inactiveOrigins=[], disabledOrigins=[]}
08:56:16.353 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:16.353 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/https/authenticate/insecure/ current routes=[/https/authenticate/insecure/, /https/authenticate/secure/, /https/trustAllCerts/, /http/]
08:56:16.354 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app3-https, path=/https/authenticate/insecure/, origins=[app3-https:app-ssl-01:localhost:38481], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=false, sslProvider=JDK, additionalCerts=[], trustStorePath=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/protocolsSpec/truststore, trustStorePassword=[C@1f03fba0, protocols=[], cipherSuites=[]}}], removed=[], updated=[]}
08:56:16.357 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=app2-https, activeOrigins=[app2-https:app-ssl-02:localhost:40063], inactiveOrigins=[], disabledOrigins=[]}
08:56:16.357 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=app3-https, activeOrigins=[app3-https:app-ssl-01:localhost:38481], inactiveOrigins=[], disabledOrigins=[]}
08:56:16.357 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appOne-http, activeOrigins=[appOne-http:app-01:localhost:45849], inactiveOrigins=[], disabledOrigins=[]}
08:56:16.358 [pool-733-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appOne-https, activeOrigins=[appOne-https:app-ssl-01:localhost:38481], inactiveOrigins=[], disabledOrigins=[]}
[32mStyx routing of HTTP requests[0m
[32m- Proxies HTTP protocol to HTTP origins[0m
08:56:16.564 [mock-stub-app-ssl-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - app-ssl-01 received: http://localhost:45995/https/trustAllCerts/foo.2
[]
08:56:16.584 [mock-admin-app-ssl-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 104, 116, 116, 112, 115, 47, 116, 114, 117, 115, 116, 65, 108, 108, 67, 101, 114, 116, 115, 47, 102, 111, 111, 46, 50, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 44, 10, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 88, 45, 70, 111, 114, 119, 97, 114, 100, 101, 100, 45, 80, 114, 111, 116, 111, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 109, 97, 116, 99, 104, 101, 115, 34, 32, 58, 32, 34, 104, 116, 116, 112, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
[32m- Proxies HTTP protocol to HTTPS origins[0m
[32m- Retains existing X-Forwarded-Proto header unmodified[0m
[32mStyx routing of HTTPS requests[0m
[32m- Proxies HTTPS requests to HTTP backend[0m
08:56:16.696 [mock-stub-app-ssl-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - app-ssl-01 received: https://localhost:43027/https/trustAllCerts/foo.5
[]
08:56:16.711 [mock-admin-app-ssl-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 104, 116, 116, 112, 115, 47, 116, 114, 117, 115, 116, 65, 108, 108, 67, 101, 114, 116, 115, 47, 102, 111, 111, 46, 53, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 44, 10, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 88, 45, 70, 111, 114, 119, 97, 114, 100, 101, 100, 45, 80, 114, 111, 116, 111, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 109, 97, 116, 99, 104, 101, 115, 34, 32, 58, 32, 34, 104, 116, 116, 112, 115, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
[32m- Proxies HTTPS requests to HTTPS backend[0m
08:56:16.751 [mock-stub-app-ssl-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - app-ssl-01 received: https://localhost:43027/https/trustAllCerts/foo.6
[]
08:56:16.774 [mock-admin-app-ssl-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 104, 116, 116, 112, 115, 47, 116, 114, 117, 115, 116, 65, 108, 108, 67, 101, 114, 116, 115, 47, 102, 111, 111, 46, 54, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 44, 10, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 88, 45, 70, 111, 114, 119, 97, 114, 100, 101, 100, 45, 80, 114, 111, 116, 111, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 109, 97, 116, 99, 104, 101, 115, 34, 32, 58, 32, 34, 104, 116, 116, 112, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
[32m- Retains existing X-Forwarded-Proto header unmodified[0m
[32mStryx origin authentication[0m
08:56:16.970 [mock-stub-app-ssl-02-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - app-ssl-02 received: https://localhost:43027/https/authenticate/secure/foo.7
[]
08:56:16.984 [mock-admin-app-ssl-02-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 104, 116, 116, 112, 115, 47, 97, 117, 116, 104, 101, 110, 116, 105, 99, 97, 116, 101, 47, 115, 101, 99, 117, 114, 101, 47, 102, 111, 111, 46, 55, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 125]
[32m- Authenticates origin server[0m
08:56:17.198 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=https://localhost:43027/https/authenticate/insecure/foo.8, headers=[Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=95af9da6-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=https, Host=localhost:43027], id=95af9da6-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.client.BadHttpResponseException exceptionMessage="Bad HTTP Response received from origin. origin=app3-https:app-ssl-01:localhost:38481."
08:56:17.198 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=95af9da6-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app3-https:app-ssl-01:localhost:38481., state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=https://localhost:43027/https/authenticate/insecure/foo.8, headers=[Host=localhost:43027], id=95af9da6-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:56:17.199 [Styx-Client-Worker-0-Thread] WARN  c.h.s.c.n.c.FlowControllingHttpContentProducer - message="Inappropriate event=ChannelInactiveEvent", prefix=localhost/127.0.0.1:38481 -> /127.0.0.1:37562, Request(method=GET, url=https://localhost:43027/https/authenticate/insecure/foo.8, id=95af9da6-cc59-11e8-9327-0242ac1147ce), state=TERMINATED, receivedChunks=0, receivedBytes=0, emittedChunks=0, emittedBytes=0
08:56:17.209 [Proxy-Worker-7-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="502 Bad Gateway", exception="com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app3-https:app-ssl-01:localhost:38481., cause="io.netty.handler.codec.DecoderException: javax.net.ssl.SSLHandshakeException: General SSLEngine problem", cause="javax.net.ssl.SSLHandshakeException: General SSLEngine problem", cause="javax.net.ssl.SSLHandshakeException: General SSLEngine problem", cause="sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target", cause="sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target""
08:56:17.216 [mock-admin-app-ssl-02-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 104, 116, 116, 112, 115, 47, 97, 117, 116, 104, 101, 110, 116, 105, 99, 97, 116, 101, 47, 105, 110, 115, 101, 99, 117, 114, 101, 47, 102, 111, 111, 46, 56, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 125]
[32m- It refuses to connect to origin server with invalid credentials[0m
08:56:17.259 [mock-stub-app-ssl-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - app-ssl-01 received: https://localhost:43027/https/trustAllCerts/foo.9
[]
08:56:17.272 [mock-admin-app-ssl-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 104, 116, 116, 112, 115, 47, 116, 114, 117, 115, 116, 65, 108, 108, 67, 101, 114, 116, 115, 47, 102, 111, 111, 46, 57, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 125]
[32m- It doesn't attept to authenticate an origin when trustAllCerts is true[0m
08:56:17.278 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:17.279 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:17.280 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:17.280 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:17.280 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:17.281 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:17.281 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:17.281 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [45995]
Styx https port was: [43027]
08:56:17.385 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:17.393 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:17.393 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:17.394 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:17.395 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
08:56:17.406 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
[32mHeaderNamesSpec:[0m
08:56:17.408 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:17.408 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:17.409 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:17.410 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@78b612c6
08:56:17.410 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:17.413 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:17.414 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:17.414 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:17.415 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:17.416 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:17.416 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:17.419 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44815
08:56:17.421 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:17.423 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:45583
08:56:17.423 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
Styx http port is: [44815]
Styx https port is: [-1]
[32mProxied responses have expected headers added[0m
08:56:17.426 [ScalaTest-main-running-HeaderNamesSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:42515], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@3b48e183, com.hotels.styx.admin.dashboard.DashboardData$Downstream@514de325, com.hotels.styx.admin.dashboard.DashboardDataSupplier@30c1da48, com.hotels.styx.admin.dashboard.DashboardData$Downstream@43a65cd8]
08:56:17.426 [ScalaTest-main-running-HeaderNamesSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:17.427 [ScalaTest-main-running-HeaderNamesSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:17.427 [ScalaTest-main-running-HeaderNamesSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=default-app:generic-app-01
08:56:17.428 [ScalaTest-main-running-HeaderNamesSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:17.428 [ScalaTest-main-running-HeaderNamesSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:56:17.428 [ScalaTest-main-running-HeaderNamesSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:56:17.429 [ScalaTest-main-running-HeaderNamesSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:42515], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32m- should add response headers[0m
Styx http port was: [44815]
Styx https port was: [-1]
08:56:17.489 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:17.491 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:17.491 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:17.491 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:17.492 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mAggregatingPluginContentOverflowSpec:[0m
08:56:17.498 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:17.499 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin aggregator instrumented
08:56:17.500 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:17.500 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:17.500 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:17.500 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@2d64c100
08:56:17.501 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:17.503 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:17.503 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:17.503 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:17.503 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:17.504 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:17.504 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:17.505 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44665
08:56:17.508 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:17.510 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:34953
08:56:17.510 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 6ms
Styx http port is: [44665]
Styx https port is: [-1]
08:56:17.511 [MockServer STARTING] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:17.512 [MockServer-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:34785
08:56:17.512 [MockServer STARTING] INFO  com.hotels.styx.MockServer - mock server started on port 34785
08:56:17.513 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app1, path=/, origins=[app1:origin-1:localhost:34785], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@7f37b6d9, com.hotels.styx.admin.dashboard.DashboardData$Downstream@71e35c4, com.hotels.styx.admin.dashboard.DashboardDataSupplier@22a10ac6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@12fe1f28]
08:56:17.513 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:17.514 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:17.514 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app1:origin-1
08:56:17.515 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:17.515 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:17.515 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:56:17.515 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app1, path=/, origins=[app1:origin-1:localhost:34785], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx as a plugin container[0m
08:56:19.037 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=95fab06c-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.api.plugins.spi.PluginException: aggregator: Maximum content size exceeded. Maximum size allowed is 2750 bytes., state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:44665/body, headers=[Host=localhost:44665], id=95fab06c-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:56:19.042 [Proxy-Worker-0-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="502 Bad Gateway", exception="com.hotels.styx.api.plugins.spi.PluginException: aggregator: Maximum content size exceeded. Maximum size allowed is 2750 bytes., cause="com.hotels.styx.api.ContentOverflowException: Maximum content size exceeded. Maximum size allowed is 2750 bytes.", cause="rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: io.netty.buffer.PooledSlicedByteBuf.class""
08:56:19.044 [ScalaTest-main-running-AggregatingPluginContentOverflowSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:19.536 [MockServer-Worker-0-Thread] WARN  c.h.s.s.n.c.HttpResponseWriter - Write error. Written content bytes 3000/4000 (ackd/sent). Write events 4/5 (ackd/writes), Exception=HttpResponse{version=HTTP/1.1, status=200 OK, headers=[]}
java.nio.channels.ClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(...)(Unknown Source) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
[32m- Returns 502 Bad Gateway when content exceeds maximum allowed number of bytes[0m
08:56:21.291 [MockServer STOPPING] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:21.292 [MockServer STOPPING] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:21.292 [MockServer STOPPING] INFO  com.hotels.styx.MockServer - mock server running on port 34785 stopped
08:56:21.292 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
Styx metrics after AggregatingPluginContentOverflowSpec:
connections.bytes-received={count=67}
connections.bytes-sent={count=142}
connections.eventloop.Proxy-Worker-0-Thread.channels={count=2, max=1, mean=0.4925005624493796, min=0, p50=0.0, p75=1.0, p95=1.0, p98=1.0, p99=1.0, p999=1.0, stddev=0.49994375527295504}
connections.eventloop.Proxy-Worker-0-Thread.registered-channel-count={count=0}
connections.idleClosed={count=0, max=0, mean=0.0, min=0, p50=0.0, p75=0.0, p95=0.0, p98=0.0, p99=0.0, p999=0.0, stddev=0.0}
connections.total-connections={count=0}
jvm.bufferpool.direct.capacity={value=375}
jvm.bufferpool.direct.count={value=2}
jvm.bufferpool.direct.used={value=376}
jvm.bufferpool.mapped.capacity={value=0}
jvm.bufferpool.mapped.count={value=0}
jvm.bufferpool.mapped.used={value=0}
jvm.gc.PS-MarkSweep.count={value=3}
jvm.gc.PS-MarkSweep.time={value=243}
jvm.gc.PS-Scavenge.count={value=8}
jvm.gc.PS-Scavenge.time={value=533}
jvm.memory.heap.committed={value=1540882432}
jvm.memory.heap.init={value=528482304}
jvm.memory.heap.max={value=7499415552}
jvm.memory.heap.usage={value=0.10459906196167539}
jvm.memory.heap.used={value=784431832}
jvm.memory.non-heap.committed={value=108986368}
jvm.memory.non-heap.init={value=2555904}
jvm.memory.non-heap.max={value=-1}
jvm.memory.non-heap.usage={value=-1.0536028E8}
jvm.memory.non-heap.used={value=105360280}
jvm.memory.pools.Code-Cache.committed={value=36634624}
jvm.memory.pools.Code-Cache.init={value=2555904}
jvm.memory.pools.Code-Cache.max={value=251658240}
jvm.memory.pools.Code-Cache.usage={value=0.14369761149088542}
jvm.memory.pools.Code-Cache.used={value=36162688}
jvm.memory.pools.Compressed-Class-Space.committed={value=8519680}
jvm.memory.pools.Compressed-Class-Space.init={value=0}
jvm.memory.pools.Compressed-Class-Space.max={value=1073741824}
jvm.memory.pools.Compressed-Class-Space.usage={value=0.007435403764247894}
jvm.memory.pools.Compressed-Class-Space.used={value=7983704}
jvm.memory.pools.Metaspace.committed={value=63832064}
jvm.memory.pools.Metaspace.init={value=0}
jvm.memory.pools.Metaspace.max={value=-1}
jvm.memory.pools.Metaspace.usage={value=0.9590055555778363}
jvm.memory.pools.Metaspace.used={value=61215304}
jvm.memory.pools.PS-Eden-Space.committed={value=902299648}
jvm.memory.pools.PS-Eden-Space.init={value=132120576}
jvm.memory.pools.PS-Eden-Space.max={value=2717384704}
jvm.memory.pools.PS-Eden-Space.usage={value=0.17117627228684068}
jvm.memory.pools.PS-Eden-Space.used={value=465151784}
jvm.memory.pools.PS-Eden-Space.used-after-gc={value=0}
jvm.memory.pools.PS-Old-Gen.committed={value=601358336}
jvm.memory.pools.PS-Old-Gen.init={value=352321536}
jvm.memory.pools.PS-Old-Gen.max={value=5624561664}
jvm.memory.pools.PS-Old-Gen.usage={value=0.05017252416418703}
jvm.memory.pools.PS-Old-Gen.used={value=282198456}
jvm.memory.pools.PS-Old-Gen.used-after-gc={value=141390384}
jvm.memory.pools.PS-Survivor-Space.committed={value=37224448}
jvm.memory.pools.PS-Survivor-Space.init={value=22020096}
jvm.memory.pools.PS-Survivor-Space.max={value=37224448}
jvm.memory.pools.PS-Survivor-Space.usage={value=0.9961623070945202}
jvm.memory.pools.PS-Survivor-Space.used={value=37081592}
jvm.memory.pools.PS-Survivor-Space.used-after-gc={value=37081592}
jvm.memory.total.committed={value=1649868800}
jvm.memory.total.init={value=531038208}
jvm.memory.total.max={value=7499415551}
jvm.memory.total.used={value=889795072}
jvm.netty.pooled-allocator.usedDirectMemory={value=536870912}
jvm.netty.pooled-allocator.usedHeapMemory={value=0}
jvm.netty.unpooled-allocator.usedDirectMemory={value=7}
jvm.netty.unpooled-allocator.usedHeapMemory={value=6000}
jvm.thread.blocked.count={value=0}
jvm.thread.count={value=217}
jvm.thread.daemon.count={value=24}
jvm.thread.deadlock.count={value=0}
jvm.thread.deadlocks={value=[]}
jvm.thread.new.count={value=0}
jvm.thread.runnable.count={value=129}
jvm.thread.terminated.count={value=0}
jvm.thread.timed_waiting.count={value=39}
jvm.thread.waiting.count={value=49}
jvm.uptime={value=170016}
jvm.uptime.formatted={value=0d 0h 2m}
origins.app1.origin-1.connectionspool.available-connections={value=0}
origins.app1.origin-1.connectionspool.busy-connections={value=0}
origins.app1.origin-1.connectionspool.connection-attempts={value=1}
origins.app1.origin-1.connectionspool.connection-failures={value=0}
origins.app1.origin-1.connectionspool.connections-closed={value=1}
origins.app1.origin-1.connectionspool.connections-terminated={value=1}
origins.app1.origin-1.connectionspool.pending-connections={value=0}
origins.app1.origin-1.connectionspool.ttfb={value=0}
origins.app1.origin-1.requests.cancelled={count=1}
origins.app1.origin-1.requests.error-rate={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
origins.app1.origin-1.requests.latency={count=0, max=0.0, mean=NaN, min=9.223372036854775E12, p50=0.0, p75=0.0, p95=0.0, p98=0.0, p99=0.0, p999=0.0, stddev=NaN, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, duration_units=milliseconds, rate_units=calls/second}
origins.app1.origin-1.requests.response.status.200={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.2637304864504313, units=events/second}
origins.app1.origin-1.requests.response.status.5xx={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
origins.app1.origin-1.requests.success-rate={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.2633132470580598, units=events/second}
origins.app1.origin-1.status={value=1}
origins.app1.requests.cancelled={count=1}
origins.app1.requests.error-rate={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
origins.app1.requests.latency={count=0, max=0.0, mean=NaN, min=9.223372036854775E12, p50=0.0, p75=0.0, p95=0.0, p98=0.0, p99=0.0, p999=0.0, stddev=NaN, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, duration_units=milliseconds, rate_units=calls/second}
origins.app1.requests.response.status.200={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.263727693131081, units=events/second}
origins.app1.requests.success-rate={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.26329773243969634, units=events/second}
plugins.aggregator.errors={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.26222609143463194, units=events/second}
plugins.aggregator.exception.com_hotels_styx_api_ContentOverflowException={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4392881832265038, units=events/second}
plugins.aggregator.response.status.500={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4392901762721328, units=events/second}
requests.cancelled.responseError={count=1}
requests.error-rate.500={count=0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.0, units=events/second}
requests.latency={count=1, max=1526.726655, mean=1522.532352, min=1518.3380479999998, p50=1526.726655, p75=1526.726655, p95=1526.726655, p98=1526.726655, p99=1526.726655, p999=1526.726655, stddev=0.0, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.2622482426770172, duration_units=milliseconds, rate_units=calls/second}
requests.outstanding={count=0}
requests.received={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.26227928714736964, units=events/second}
requests.response.sent={count=1}
requests.response.status.1xx={count=0}
requests.response.status.2xx={count=0}
requests.response.status.3xx={count=0}
requests.response.status.4xx={count=0}
requests.response.status.500={count=0}
requests.response.status.501={count=0}
requests.response.status.502={count=1}
requests.response.status.503={count=0}
requests.response.status.504={count=0}
requests.response.status.521={count=0}
requests.response.status.5xx={count=1}
requests.response.status.unrecognised={count=0}
styx.response.status.502={count=1}
styx.server.http.requests={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.26354856623141476, units=events/second}
styx.server.http.responses.502={count=1, m15_rate=0.0, m1_rate=0.0, m5_rate=0.0, mean_rate=0.4395145573317455, units=events/second}
Styx http port was: [44665]
Styx https port was: [-1]
08:56:23.530 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:23.533 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:23.533 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:23.534 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:23.534 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mAsyncPluginResponseSpec:[0m
08:56:23.544 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:23.545 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin asyncDelayPlugin instrumented
08:56:23.546 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:23.546 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:23.546 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:23.547 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@77681ce4
08:56:23.548 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:23.550 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:23.551 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:23.551 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:23.551 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:23.553 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:23.553 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:23.554 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:38279
08:56:23.563 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:23.567 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:42583
08:56:23.567 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 15ms
Styx http port is: [38279]
Styx https port is: [-1]
08:56:23.568 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:37629], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@11c3ff67, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4397a639, com.hotels.styx.admin.dashboard.DashboardDataSupplier@24841372, com.hotels.styx.admin.dashboard.DashboardData$Downstream@77114efe]
08:56:23.569 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:23.569 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:23.570 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:generic-app-01
08:56:23.571 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:23.571 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:23.571 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:56:23.572 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:37629], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx as a plugin container[0m
[32m- Proxies requests when plugin processes response headers asynchronously on a separate thread pool[0m
Styx http port was: [38279]
Styx https port was: [-1]
08:56:24.739 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:24.742 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:24.742 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:24.743 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:24.743 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mOriginsReloadCommandSpec:[0m
08:56:24.761 [ScalaTest-main-running-OriginsReloadCommandSpec] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:24.762 [ScalaTest-main-running-OriginsReloadCommandSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:24.762 [ScalaTest-main-running-OriginsReloadCommandSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:24.763 [ScalaTest-main-running-OriginsReloadCommandSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:24.763 [ScalaTest-main-running-OriginsReloadCommandSpec] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@78a0ff63
08:56:24.764 [ScalaTest-main-running-OriginsReloadCommandSpec] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:24.768 [ScalaTest-main-running-OriginsReloadCommandSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:24.768 [ScalaTest-main-running-OriginsReloadCommandSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:24.769 [ScalaTest-main-running-OriginsReloadCommandSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:24.769 [ScalaTest-main-running-OriginsReloadCommandSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:24.770 [ScalaTest-main-running-OriginsReloadCommandSpec] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:24.770 [ScalaTest-main-running-OriginsReloadCommandSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:24.773 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:45107
08:56:24.776 [ScalaTest-main-running-OriginsReloadCommandSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:24.777 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:43347
08:56:24.783 [pool-801-thread-1] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app, path=/, origins=[app:app2:localhost:9091, app:app1:localhost:9090], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=45, maxPendingConnectionsPerHost=15, connectTimeoutMillis=1000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=8000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/version.txt], intervalMillis=5000, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@4a3927fc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@44fed0cb, com.hotels.styx.admin.dashboard.DashboardDataSupplier@40c14c8c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5c3daf0]
08:56:24.783 [pool-801-thread-1] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:24.783 [pool-801-thread-1] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:24.785 [pool-801-thread-1] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app1
08:56:24.786 [pool-801-thread-1] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app:app2
08:56:24.787 [pool-801-thread-1] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:24.787 [pool-801-thread-1] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:24.787 [pool-801-thread-1] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:56:24.788 [pool-801-thread-1] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app, path=/, origins=[app:app2:localhost:9091, app:app1:localhost:9090], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=45, maxPendingConnectionsPerHost=15, connectTimeoutMillis=1000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=8000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/version.txt], intervalMillis=5000, timeoutMillis=2000, healthyThreshold=2, unhealthyThreshold=2}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:56:24.790 [pool-801-thread-1] INFO  c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reloaded. reason='Initial load', timestamp=2018-10-10T06:56:24.741516Z, md5-hash=c91129cc1d98aaf26ab602dd2883188e, File reloaded., file='/tmp/1539154420776-0/origins.yml'
08:56:24.790 [ScalaTest-main-running-OriginsReloadCommandSpec] INFO  com.hotels.styx.StyxServer - Started styx server in 20ms
08:56:24.806 [pool-805-thread-1] ERROR c.h.s.i.FileBackedRegistry - Not reloading /tmp/1539154420776-0/origins.yml as there was an error reading content
java.lang.RuntimeException: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.google.common.base.Throwables.propagate(Throwables.java:160) ~[guava-18.0.jar:na]
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$YAMLBackendServicesReader.read(FileBackedBackendServicesRegistry.java:204) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.updateResources(FileBackedRegistry.java:135) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.lambda$reload$1(FileBackedRegistry.java:95) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:262) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:537) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:518) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:112) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.vanillaDeserialize(BuilderBasedDeserializer.java:255) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.deserialize(BuilderBasedDeserializer.java:145) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:277) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:249) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:26) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:3779) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2074) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$YAMLBackendServicesReader.read(FileBackedBackendServicesRegistry.java:200) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	... 6 common frames omitted
Caused by: java.net.URISyntaxException: Illegal character in path at index 1: /  # blah blah
	at java.net.URI$Parser.fail(URI.java:2848) ~[na:1.8.0_121]
	at java.net.URI$Parser.checkChars(URI.java:3021) ~[na:1.8.0_121]
	at java.net.URI$Parser.parseHierarchical(URI.java:3105) ~[na:1.8.0_121]
	at java.net.URI$Parser.parse(URI.java:3063) ~[na:1.8.0_121]
	at java.net.URI.<init>(URI.java:588) ~[na:1.8.0_121]
	at java.net.URI.create(URI.java:850) ~[na:1.8.0_121]
	at com.hotels.styx.api.extension.service.BackendService$Builder.checkValidPath(BackendService.java:268) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.api.extension.service.BackendService$Builder.path(BackendService.java:262) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:109) ~[jackson-databind-2.7.5.jar:2.7.5]
	... 14 common frames omitted
08:56:24.808 [pool-805-thread-1] ERROR c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reload failed. reason='Admin Interface', timestamp=2018-10-10T06:56:24.789518Z, md5-hash=101ab0327264d8865cf1ea4656bbea7e, Reload failure., file='/tmp/1539154420776-0/origins.yml'
java.lang.RuntimeException: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.google.common.base.Throwables.propagate(Throwables.java:160) ~[guava-18.0.jar:na]
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$YAMLBackendServicesReader.read(FileBackedBackendServicesRegistry.java:204) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.updateResources(FileBackedRegistry.java:135) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.lambda$reload$1(FileBackedRegistry.java:95) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:262) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:537) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:518) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:112) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.vanillaDeserialize(BuilderBasedDeserializer.java:255) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.deserialize(BuilderBasedDeserializer.java:145) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:277) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:249) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:26) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:3779) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2074) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$YAMLBackendServicesReader.read(FileBackedBackendServicesRegistry.java:200) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	... 6 common frames omitted
Caused by: java.net.URISyntaxException: Illegal character in path at index 1: /  # blah blah
	at java.net.URI$Parser.fail(URI.java:2848) ~[na:1.8.0_121]
	at java.net.URI$Parser.checkChars(URI.java:3021) ~[na:1.8.0_121]
	at java.net.URI$Parser.parseHierarchical(URI.java:3105) ~[na:1.8.0_121]
	at java.net.URI$Parser.parse(URI.java:3063) ~[na:1.8.0_121]
	at java.net.URI.<init>(URI.java:588) ~[na:1.8.0_121]
	at java.net.URI.create(URI.java:850) ~[na:1.8.0_121]
	at com.hotels.styx.api.extension.service.BackendService$Builder.checkValidPath(BackendService.java:268) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.api.extension.service.BackendService$Builder.path(BackendService.java:262) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:109) ~[jackson-databind-2.7.5.jar:2.7.5]
	... 14 common frames omitted
08:56:24.808 [pool-805-thread-1] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=9a50c421-cc59-11e8-9327-0242ac1147ce cause=java.lang.RuntimeException: java.lang.RuntimeException: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"]), state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=POST, uri=http://localhost:43347/admin/tasks/origins/reload, headers=[Host=localhost:43347], id=9a50c421-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
[32m- Responds with INTERNAL_SERVER_ERROR when the origins cannot be read[0m
08:56:24.812 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:24.815 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:24.815 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:24.816 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:24.816 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mExpiringConnectionSpec:[0m
08:56:24.825 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:24.826 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:24.826 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:24.827 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:24.828 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@380e1909
08:56:24.828 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:24.831 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:24.831 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:24.831 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:24.832 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:24.833 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:24.833 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:24.836 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:39023
08:56:24.839 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:24.840 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:45131
08:56:24.840 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
Styx http port is: [39023]
Styx https port is: [-1]
08:56:24.842 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/app1, origins=[appOne:generic-app-01:localhost:46187], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@4fe64d23, com.hotels.styx.admin.dashboard.DashboardData$Downstream@58437801, com.hotels.styx.admin.dashboard.DashboardDataSupplier@6af5bbd0, com.hotels.styx.admin.dashboard.DashboardData$Downstream@76464795]
08:56:24.842 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:24.844 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:24.845 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:generic-app-01
08:56:24.846 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:24.846 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:24.846 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/app1 current routes=[/app1]
08:56:24.846 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/app1, origins=[appOne:generic-app-01:localhost:46187], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:56:24.848 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:24.848 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=generic-app:anonymous-origin
08:56:24.864 [ScalaTest-main-running-ExpiringConnectionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:27.113 [ScalaTest-main-running-ExpiringConnectionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:29.790 [Health-Check-Monitor-app-Client-Worker-0-Thread] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="app=app1", change="ACTIVE->INACTIVE"
08:56:29.790 [Health-Check-Monitor-app-Client-Worker-0-Thread] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="app=app2", change="ACTIVE->INACTIVE"
08:56:30.458 [ScalaTest-main-running-ExpiringConnectionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:32.692 [ScalaTest-main-running-ExpiringConnectionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
[32m- Should expire connection after 1 second[0m
Styx http port was: [39023]
Styx https port was: [-1]
08:56:35.034 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:35.037 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:35.038 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:35.039 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:35.039 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
08:56:35.051 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:35.053 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:35.054 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:35.055 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:35.056 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@1a0d96a5
08:56:35.057 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:35.058 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - MetricsHandler instantiated with no caching
08:56:35.060 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JVMMetricsHandler instantiated with no caching
08:56:35.061 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:35.062 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JsonHandler instantiated with cache expiration of PT10S
08:56:35.063 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:35.064 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:35.065 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
[32mTlsVersionSpec:[0m
08:56:35.067 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:35.068 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:35.073 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35081
08:56:35.075 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:35.076 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:38559
08:56:35.077 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 10ms
Styx http port is: [35081]
Styx https port is: [-1]
08:56:35.079 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appTls11, path=/tls11/, origins=[appTls11:appTls11-01:localhost:42657], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@29fa6b65, protocols=[TLSv1.1], cipherSuites=[]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@7c72ecc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@47406941, com.hotels.styx.admin.dashboard.DashboardDataSupplier@61ecbee9, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1bb740f2]
08:56:35.079 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:35.080 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:35.081 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appTls11:appTls11-01
08:56:35.081 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={"proxy":{"connectors":{"http":{"port":0}}},"admin":{"connectors":{"http":{"port":0}}},"request-logging":{"enabled":true}}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:35.081 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTls11, activeOrigins=[appTls11:appTls11-01:localhost:42657], inactiveOrigins=[], disabledOrigins=[]}
08:56:35.082 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:56:35.086 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/tls11/ current routes=[/tls11/]
08:56:35.086 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appTls11, path=/tls11/, origins=[appTls11:appTls11-01:localhost:42657], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@29fa6b65, protocols=[TLSv1.1], cipherSuites=[]}}], removed=[], updated=[]}
08:56:35.088 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTls11, activeOrigins=[appTls11:appTls11-01:localhost:42657], inactiveOrigins=[], disabledOrigins=[]}
08:56:35.088 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appTlsDefault, path=/tlsDefault/, origins=[appTlsDefault:appTlsDefault-01:localhost:43951], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@39e69ea7, protocols=[TLSv1.1, TLSv1.2], cipherSuites=[]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@7c72ecc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@47406941, com.hotels.styx.admin.dashboard.DashboardDataSupplier@61ecbee9, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1bb740f2, com.hotels.styx.admin.dashboard.DashboardData$Downstream@490c7a83]
08:56:35.089 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:35.091 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:35.091 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appTlsDefault:appTlsDefault-01
08:56:35.091 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTlsDefault, activeOrigins=[appTlsDefault:appTlsDefault-01:localhost:43951], inactiveOrigins=[], disabledOrigins=[]}
08:56:35.091 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={"proxy":{"connectors":{"http":{"port":0}}},"admin":{"connectors":{"http":{"port":0}}},"request-logging":{"enabled":true}}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:35.092 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:56:35.092 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/tlsDefault/ current routes=[/tlsDefault/, /tls11/]
08:56:35.092 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appTlsDefault, path=/tlsDefault/, origins=[appTlsDefault:appTlsDefault-01:localhost:43951], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@39e69ea7, protocols=[TLSv1.1, TLSv1.2], cipherSuites=[]}}], removed=[], updated=[]}
08:56:35.094 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTls11, activeOrigins=[appTls11:appTls11-01:localhost:42657], inactiveOrigins=[], disabledOrigins=[]}
08:56:35.094 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTlsDefault, activeOrigins=[appTlsDefault:appTlsDefault-01:localhost:43951], inactiveOrigins=[], disabledOrigins=[]}
08:56:35.095 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appTls12, path=/tls12, origins=[appTls12:appTls12-02:localhost:36671], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@4c447c09, protocols=[TLSv1.2], cipherSuites=[]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@7c72ecc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@47406941, com.hotels.styx.admin.dashboard.DashboardDataSupplier@61ecbee9, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1bb740f2, com.hotels.styx.admin.dashboard.DashboardData$Downstream@490c7a83, com.hotels.styx.admin.dashboard.DashboardData$Downstream@593a6726]
08:56:35.095 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:35.096 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:35.096 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appTls12:appTls12-02
08:56:35.097 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTls12, activeOrigins=[appTls12:appTls12-02:localhost:36671], inactiveOrigins=[], disabledOrigins=[]}
08:56:35.097 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={"proxy":{"connectors":{"http":{"port":0}}},"admin":{"connectors":{"http":{"port":0}}},"request-logging":{"enabled":true}}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:35.097 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:56:35.097 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/tls12 current routes=[/tlsDefault/, /tls11/, /tls12]
08:56:35.099 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appTls12, path=/tls12, origins=[appTls12:appTls12-02:localhost:36671], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@4c447c09, protocols=[TLSv1.2], cipherSuites=[]}}], removed=[], updated=[]}
08:56:35.101 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTls11, activeOrigins=[appTls11:appTls11-01:localhost:42657], inactiveOrigins=[], disabledOrigins=[]}
08:56:35.101 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTls12, activeOrigins=[appTls12:appTls12-02:localhost:36671], inactiveOrigins=[], disabledOrigins=[]}
08:56:35.101 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTlsDefault, activeOrigins=[appTlsDefault:appTlsDefault-01:localhost:43951], inactiveOrigins=[], disabledOrigins=[]}
08:56:35.102 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appTls11B, path=/tls11-to-tls12, origins=[appTls11B:appTls11B-01:localhost:41819], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@24386839, protocols=[TLSv1.1], cipherSuites=[]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@7c72ecc, com.hotels.styx.admin.dashboard.DashboardData$Downstream@47406941, com.hotels.styx.admin.dashboard.DashboardDataSupplier@61ecbee9, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1bb740f2, com.hotels.styx.admin.dashboard.DashboardData$Downstream@490c7a83, com.hotels.styx.admin.dashboard.DashboardData$Downstream@593a6726, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7b32b129]
08:56:35.103 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:35.103 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:35.104 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appTls11B:appTls11B-01
08:56:35.104 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTls11B, activeOrigins=[appTls11B:appTls11B-01:localhost:41819], inactiveOrigins=[], disabledOrigins=[]}
08:56:35.104 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={"proxy":{"connectors":{"http":{"port":0}}},"admin":{"connectors":{"http":{"port":0}}},"request-logging":{"enabled":true}}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:35.104 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:56:35.104 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/tls11-to-tls12 current routes=[/tls11-to-tls12, /tlsDefault/, /tls11/, /tls12]
08:56:35.106 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appTls11B, path=/tls11-to-tls12, origins=[appTls11B:appTls11B-01:localhost:41819], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@24386839, protocols=[TLSv1.1], cipherSuites=[]}}], removed=[], updated=[]}
08:56:35.108 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTlsDefault, activeOrigins=[appTlsDefault:appTlsDefault-01:localhost:43951], inactiveOrigins=[], disabledOrigins=[]}
08:56:35.108 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTls11, activeOrigins=[appTls11:appTls11-01:localhost:42657], inactiveOrigins=[], disabledOrigins=[]}
08:56:35.109 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTls12, activeOrigins=[appTls12:appTls12-02:localhost:36671], inactiveOrigins=[], disabledOrigins=[]}
08:56:35.109 [pool-823-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appTls11B, activeOrigins=[appTls11B:appTls11B-01:localhost:41819], inactiveOrigins=[], disabledOrigins=[]}
[32mBackend Service TLS Protocol Setting[0m
08:56:35.464 [mock-stub-appTls11-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - appTls11-01 received: http://localhost:35081/tls11/a
[]
08:56:35.494 [mock-admin-appTls11-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 116, 108, 115, 49, 49, 47, 97, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 44, 10, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 88, 45, 70, 111, 114, 119, 97, 114, 100, 101, 100, 45, 80, 114, 111, 116, 111, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 109, 97, 116, 99, 104, 101, 115, 34, 32, 58, 32, 34, 104, 116, 116, 112, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
08:56:35.641 [mock-stub-appTlsDefault-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - appTlsDefault-01 received: http://localhost:35081/tlsDefault/a2
[]
08:56:35.655 [mock-admin-appTlsDefault-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 116, 108, 115, 68, 101, 102, 97, 117, 108, 116, 47, 97, 50, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 44, 10, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 88, 45, 70, 111, 114, 119, 97, 114, 100, 101, 100, 45, 80, 114, 111, 116, 111, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 109, 97, 116, 99, 104, 101, 115, 34, 32, 58, 32, 34, 104, 116, 116, 112, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
[32m- Proxies to TLSv1.1 origin when TLSv1.1 support enabled.[0m
08:56:35.667 [mock-stub-appTlsDefault-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - appTlsDefault-01 received: http://localhost:35081/tlsDefault/b1
[]
08:56:35.679 [mock-admin-appTlsDefault-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 116, 108, 115, 68, 101, 102, 97, 117, 108, 116, 47, 98, 49, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 44, 10, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 88, 45, 70, 111, 114, 119, 97, 114, 100, 101, 100, 45, 80, 114, 111, 116, 111, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 109, 97, 116, 99, 104, 101, 115, 34, 32, 58, 32, 34, 104, 116, 116, 112, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
08:56:35.840 [mock-stub-appTls12-02-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - appTls12-02 received: http://localhost:35081/tls12/b2
[]
08:56:35.853 [mock-admin-appTls12-02-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 116, 108, 115, 49, 50, 47, 98, 50, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 44, 10, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 88, 45, 70, 111, 114, 119, 97, 114, 100, 101, 100, 45, 80, 114, 111, 116, 111, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 109, 97, 116, 99, 104, 101, 115, 34, 32, 58, 32, 34, 104, 116, 116, 112, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
[32m- Proxies to TLSv1.2 origin when TLSv1.2 support is enabled.[0m
08:56:36.202 [mock-stub-appTls11B-01-Worker-0-Thread] INFO  c.h.s.s.n.c.HttpPipelineHandler - SSL handshake failure from incoming connection cause="Client requested protocol TLSv1.1 not enabled or not supported", serverAddress=/127.0.0.1:41819, clientAddress=/127.0.0.1:39054
08:56:36.203 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:35081/tls11-to-tls12/c, headers=[Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=a0e99bf4-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http, Host=localhost:35081], id=a0e99bf4-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.client.BadHttpResponseException exceptionMessage="Bad HTTP Response received from origin. origin=appTls11B:appTls11B-01:localhost:41819."
08:56:36.203 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=a0e99bf4-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=appTls11B:appTls11B-01:localhost:41819., state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=http://localhost:35081/tls11-to-tls12/c, headers=[Host=localhost:35081], id=a0e99bf4-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:56:36.204 [Styx-Client-Worker-0-Thread] WARN  c.h.s.c.n.c.FlowControllingHttpContentProducer - message="Inappropriate event=ChannelInactiveEvent", prefix=localhost/127.0.0.1:41819 -> /127.0.0.1:39054, Request(method=GET, url=http://localhost:35081/tls11-to-tls12/c, id=a0e99bf4-cc59-11e8-9327-0242ac1147ce), state=TERMINATED, receivedChunks=0, receivedBytes=0, emittedChunks=0, emittedBytes=0
08:56:36.208 [Proxy-Worker-4-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="502 Bad Gateway", exception="com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=appTls11B:appTls11B-01:localhost:41819., cause="io.netty.handler.codec.DecoderException: javax.net.ssl.SSLException: Received fatal alert: handshake_failure", cause="javax.net.ssl.SSLException: Received fatal alert: handshake_failure""
08:56:36.215 [mock-admin-appTls11B-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 116, 108, 115, 49, 49, 45, 116, 111, 45, 116, 108, 115, 49, 50, 47, 99, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 10, 125]
[32m- Refuses to connect to TLSv1.1 origin when TLSv1.1 is disabled[0m
08:56:36.221 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:36.222 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:36.222 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:36.222 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:36.222 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:36.223 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:36.223 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:36.223 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [35081]
Styx https port was: [-1]
08:56:36.224 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:36.227 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:36.227 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:36.231 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:36.231 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
08:56:36.240 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
[32mBadClientSpec:[0m
08:56:36.243 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:36.243 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:36.244 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:36.244 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@f9f3928
08:56:36.245 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:36.247 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:36.248 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:36.248 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:36.248 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:36.249 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:36.249 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:36.252 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:38413
08:56:36.255 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:36.256 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:34651
08:56:36.257 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 7ms
Styx http port is: [38413]
Styx https port is: [-1]
Orign port is: [40369]
08:56:36.258 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/badClientSpec/, origins=[app-1:localhost:40369:localhost:40369], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@22c75c01, com.hotels.styx.admin.dashboard.DashboardData$Downstream@46e64760, com.hotels.styx.admin.dashboard.DashboardDataSupplier@3e5fd2b1, com.hotels.styx.admin.dashboard.DashboardData$Downstream@43982337]
08:56:36.259 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:36.259 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:36.259 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:localhost:40369
08:56:36.260 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:36.260 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:36.261 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/badClientSpec/ current routes=[/badClientSpec/]
08:56:36.261 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/badClientSpec/, origins=[app-1:localhost:40369:localhost:40369], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mHandling of bad client.[0m
[32m  Client connection fails while styx is sending a response.[0m
08:56:37.266 [ScalaTest-main-running-BadClientSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
[32m  - Failed write of response does not trigger another 5xx response.[0m
08:56:39.495 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:39.496 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [38413]
Styx https port was: [-1]
08:56:39.496 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:39.498 [Styx-Client-Worker-0-Thread] WARN  c.h.s.s.n.c.HttpResponseWriter - Content observable error. Written content bytes 0/0 (ackd/sent). Write events 1/1 (ackd/writes). Exception={}
com.hotels.styx.api.exceptions.TransportLostException: Connection to origin lost. origin="app-1:localhost:40369:localhost:40369", remoteAddress="localhost/127.0.0.1:40369".
	at com.hotels.styx.client.netty.connectionpool.NettyToStyxResponsePropagator.channelInactive(NettyToStyxResponsePropagator.java:111) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:224) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelInactive(ChannelInboundHandlerAdapter.java:75) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:224) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelInactive(ChannelInboundHandlerAdapter.java:75) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelInactive(IdleStateHandler.java:277) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:224) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelInactive(CombinedChannelDuplexHandler.java:420) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelInputClosed(ByteToMessageDecoder.java:377) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelInactive(ByteToMessageDecoder.java:342) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpClientCodec$Decoder.channelInactive(HttpClientCodec.java:281) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.channelInactive(CombinedChannelDuplexHandler.java:223) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:224) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.channelInactive(ChannelInboundHandlerAdapter.java:75) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:224) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1354) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:917) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe$7.run(AbstractChannel.java:763) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:309) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
08:56:39.501 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:39.501 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:39.502 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:39.502 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mOriginsConnectionSpec:[0m
08:56:39.512 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:39.514 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:39.514 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:39.514 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:39.515 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@3a790e40
08:56:39.515 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:39.518 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:39.518 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:39.518 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:39.519 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:39.520 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:39.520 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:39.538 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:46817
08:56:39.545 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:39.546 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:37045
08:56:39.546 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 27ms
Styx http port is: [46817]
Styx https port is: [-1]
08:56:39.548 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:45169], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1f67761b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5a034157, com.hotels.styx.admin.dashboard.DashboardDataSupplier@2f4ba1ae, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1391af3b]
08:56:39.548 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:39.548 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:39.549 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:generic-app-01
08:56:39.550 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:39.550 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:39.550 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:56:39.550 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:45169], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mOrigins closing connections after responses[0m
[32m- Styx doesn't propagate TransportLostException[0m
[32m- Styx doesn't propagate TransportLostException for bodiless responses[0m
Styx http port was: [46817]
Styx https port was: [-1]
08:56:51.767 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:51.768 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:51.769 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:51.770 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:51.770 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mStyxServerStartupSpec:[0m
08:56:51.783 [ScalaTest-main-running-StyxServerStartupSpec] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:51.784 [ScalaTest-main-running-StyxServerStartupSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:51.784 [ScalaTest-main-running-StyxServerStartupSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:51.785 [ScalaTest-main-running-StyxServerStartupSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:51.785 [ScalaTest-main-running-StyxServerStartupSpec] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@1e3e1014
08:56:51.786 [ScalaTest-main-running-StyxServerStartupSpec] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:51.789 [ScalaTest-main-running-StyxServerStartupSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:51.789 [ScalaTest-main-running-StyxServerStartupSpec] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:51.789 [ScalaTest-main-running-StyxServerStartupSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:51.790 [ScalaTest-main-running-StyxServerStartupSpec] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:51.791 [ScalaTest-main-running-StyxServerStartupSpec] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:51.791 [ScalaTest-main-running-StyxServerStartupSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:51.794 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:32781
08:56:51.804 [ScalaTest-main-running-StyxServerStartupSpec] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:51.805 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:33553
08:56:51.810 [pool-876-thread-1] ERROR c.h.s.i.FileBackedRegistry - Not reloading /root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/origins/origins-incorrect.yml as there was an error reading content
java.lang.RuntimeException: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.google.common.base.Throwables.propagate(Throwables.java:160) ~[guava-18.0.jar:na]
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$YAMLBackendServicesReader.read(FileBackedBackendServicesRegistry.java:204) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.updateResources(FileBackedRegistry.java:135) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.lambda$reload$1(FileBackedRegistry.java:95) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:262) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:537) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:518) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:112) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.vanillaDeserialize(BuilderBasedDeserializer.java:255) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.deserialize(BuilderBasedDeserializer.java:145) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:277) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:249) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:26) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:3779) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2074) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$YAMLBackendServicesReader.read(FileBackedBackendServicesRegistry.java:200) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	... 6 common frames omitted
Caused by: java.net.URISyntaxException: Illegal character in path at index 1: /  # blah blah
	at java.net.URI$Parser.fail(URI.java:2848) ~[na:1.8.0_121]
	at java.net.URI$Parser.checkChars(URI.java:3021) ~[na:1.8.0_121]
	at java.net.URI$Parser.parseHierarchical(URI.java:3105) ~[na:1.8.0_121]
	at java.net.URI$Parser.parse(URI.java:3063) ~[na:1.8.0_121]
	at java.net.URI.<init>(URI.java:588) ~[na:1.8.0_121]
	at java.net.URI.create(URI.java:850) ~[na:1.8.0_121]
	at com.hotels.styx.api.extension.service.BackendService$Builder.checkValidPath(BackendService.java:268) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.api.extension.service.BackendService$Builder.path(BackendService.java:262) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:109) ~[jackson-databind-2.7.5.jar:2.7.5]
	... 14 common frames omitted
08:56:51.811 [pool-876-thread-1] ERROR c.h.s.p.b.f.FileBackedBackendServicesRegistry - Backend services reload failed. reason='Initial load', timestamp=2018-10-10T06:47:05.980754Z, md5-hash=101ab0327264d8865cf1ea4656bbea7e, Reload failure., file='/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/origins/origins-incorrect.yml'
java.lang.RuntimeException: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.google.common.base.Throwables.propagate(Throwables.java:160) ~[guava-18.0.jar:na]
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$YAMLBackendServicesReader.read(FileBackedBackendServicesRegistry.java:204) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.updateResources(FileBackedRegistry.java:135) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.lambda$reload$1(FileBackedRegistry.java:95) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:262) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:537) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:518) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:112) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.vanillaDeserialize(BuilderBasedDeserializer.java:255) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.deserialize(BuilderBasedDeserializer.java:145) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:277) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:249) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:26) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:3779) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2074) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$YAMLBackendServicesReader.read(FileBackedBackendServicesRegistry.java:200) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	... 6 common frames omitted
Caused by: java.net.URISyntaxException: Illegal character in path at index 1: /  # blah blah
	at java.net.URI$Parser.fail(URI.java:2848) ~[na:1.8.0_121]
	at java.net.URI$Parser.checkChars(URI.java:3021) ~[na:1.8.0_121]
	at java.net.URI$Parser.parseHierarchical(URI.java:3105) ~[na:1.8.0_121]
	at java.net.URI$Parser.parse(URI.java:3063) ~[na:1.8.0_121]
	at java.net.URI.<init>(URI.java:588) ~[na:1.8.0_121]
	at java.net.URI.create(URI.java:850) ~[na:1.8.0_121]
	at com.hotels.styx.api.extension.service.BackendService$Builder.checkValidPath(BackendService.java:268) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.api.extension.service.BackendService$Builder.path(BackendService.java:262) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:109) ~[jackson-databind-2.7.5.jar:2.7.5]
	... 14 common frames omitted
08:56:51.816 [pool-876-thread-1] ERROR c.g.c.util.concurrent.ServiceManager - Service  [FAILED] has failed in the STARTING state.
java.util.concurrent.CompletionException: com.hotels.styx.api.extension.service.spi.ServiceFailureException: Service failed to start.
	at java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:273) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:280) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:874) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:852) ~[na:1.8.0_121]
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:474) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1595) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.api.extension.service.spi.ServiceFailureException: Service failed to start.
	at com.hotels.styx.api.extension.service.spi.AbstractStyxService.lambda$failWithMessage$2(AbstractStyxService.java:95) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:870) [na:1.8.0_121]
	... 6 common frames omitted
Caused by: java.util.concurrent.CompletionException: java.lang.RuntimeException: java.lang.RuntimeException: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:273) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:280) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture.uniAccept(CompletableFuture.java:659) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture$UniAccept.tryFire(CompletableFuture.java:632) ~[na:1.8.0_121]
	... 5 common frames omitted
Caused by: java.lang.RuntimeException: java.lang.RuntimeException: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry.lambda$startService$2(FileBackedBackendServicesRegistry.java:118) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at java.util.concurrent.CompletableFuture.uniAccept(CompletableFuture.java:656) [na:1.8.0_121]
	... 6 common frames omitted
Caused by: java.lang.RuntimeException: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.google.common.base.Throwables.propagate(Throwables.java:160) ~[guava-18.0.jar:na]
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$YAMLBackendServicesReader.read(FileBackedBackendServicesRegistry.java:204) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.updateResources(FileBackedRegistry.java:135) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.lambda$reload$1(FileBackedRegistry.java:95) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590) ~[na:1.8.0_121]
	... 3 common frames omitted
Caused by: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:262) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:537) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:518) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:112) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.vanillaDeserialize(BuilderBasedDeserializer.java:255) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.deserialize(BuilderBasedDeserializer.java:145) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:277) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:249) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:26) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:3779) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2074) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$YAMLBackendServicesReader.read(FileBackedBackendServicesRegistry.java:200) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	... 6 common frames omitted
Caused by: java.net.URISyntaxException: Illegal character in path at index 1: /  # blah blah
	at java.net.URI$Parser.fail(URI.java:2848) ~[na:1.8.0_121]
	at java.net.URI$Parser.checkChars(URI.java:3021) ~[na:1.8.0_121]
	at java.net.URI$Parser.parseHierarchical(URI.java:3105) ~[na:1.8.0_121]
	at java.net.URI$Parser.parse(URI.java:3063) ~[na:1.8.0_121]
	at java.net.URI.<init>(URI.java:588) ~[na:1.8.0_121]
	at java.net.URI.create(URI.java:850) ~[na:1.8.0_121]
	at com.hotels.styx.api.extension.service.BackendService$Builder.checkValidPath(BackendService.java:268) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.api.extension.service.BackendService$Builder.path(BackendService.java:262) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:109) ~[jackson-databind-2.7.5.jar:2.7.5]
	... 14 common frames omitted
08:56:51.818 [pool-876-thread-1] WARN  com.hotels.styx.StyxServer - Failed to start service= [FAILED] cause={}
java.util.concurrent.CompletionException: com.hotels.styx.api.extension.service.spi.ServiceFailureException: Service failed to start.
	at java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:273) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:280) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:874) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:852) ~[na:1.8.0_121]
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:474) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1595) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: com.hotels.styx.api.extension.service.spi.ServiceFailureException: Service failed to start.
	at com.hotels.styx.api.extension.service.spi.AbstractStyxService.lambda$failWithMessage$2(AbstractStyxService.java:95) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:870) [na:1.8.0_121]
	... 6 common frames omitted
Caused by: java.util.concurrent.CompletionException: java.lang.RuntimeException: java.lang.RuntimeException: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:273) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:280) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture.uniAccept(CompletableFuture.java:659) [na:1.8.0_121]
	at java.util.concurrent.CompletableFuture$UniAccept.tryFire(CompletableFuture.java:632) ~[na:1.8.0_121]
	... 5 common frames omitted
Caused by: java.lang.RuntimeException: java.lang.RuntimeException: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry.lambda$startService$2(FileBackedBackendServicesRegistry.java:118) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at java.util.concurrent.CompletableFuture.uniAccept(CompletableFuture.java:656) [na:1.8.0_121]
	... 6 common frames omitted
Caused by: java.lang.RuntimeException: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.google.common.base.Throwables.propagate(Throwables.java:160) ~[guava-18.0.jar:na]
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$YAMLBackendServicesReader.read(FileBackedBackendServicesRegistry.java:204) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.updateResources(FileBackedRegistry.java:135) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.infrastructure.FileBackedRegistry.lambda$reload$1(FileBackedRegistry.java:95) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590) ~[na:1.8.0_121]
	... 3 common frames omitted
Caused by: com.fasterxml.jackson.databind.JsonMappingException: Illegal character in path at index 1: /  # blah blah
 at [Source: N/A; line: -1, column: -1] (through reference chain: java.util.ArrayList[0]->com.hotels.styx.api.extension.service.Builder["path"])
	at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:262) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:537) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:518) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:112) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.vanillaDeserialize(BuilderBasedDeserializer.java:255) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.deserialize(BuilderBasedDeserializer.java:145) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:277) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:249) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:26) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:3779) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2074) ~[jackson-databind-2.7.5.jar:2.7.5]
	at com.hotels.styx.proxy.backends.file.FileBackedBackendServicesRegistry$YAMLBackendServicesReader.read(FileBackedBackendServicesRegistry.java:200) ~[styx-proxy-0.9-SNAPSHOT.jar:na]
	... 6 common frames omitted
Caused by: java.net.URISyntaxException: Illegal character in path at index 1: /  # blah blah
	at java.net.URI$Parser.fail(URI.java:2848) ~[na:1.8.0_121]
	at java.net.URI$Parser.checkChars(URI.java:3021) ~[na:1.8.0_121]
	at java.net.URI$Parser.parseHierarchical(URI.java:3105) ~[na:1.8.0_121]
	at java.net.URI$Parser.parse(URI.java:3063) ~[na:1.8.0_121]
	at java.net.URI.<init>(URI.java:588) ~[na:1.8.0_121]
	at java.net.URI.create(URI.java:850) ~[na:1.8.0_121]
	at com.hotels.styx.api.extension.service.BackendService$Builder.checkValidPath(BackendService.java:268) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.api.extension.service.BackendService$Builder.path(BackendService.java:262) ~[styx-api-0.9-SNAPSHOT.jar:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:109) ~[jackson-databind-2.7.5.jar:2.7.5]
	... 14 common frames omitted
[32m- should not start up when incorrect origins file is encountered[0m
08:56:51.829 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.i.logging.LOGBackConfigurer - Initializing LOGBack from [/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/conf/logback/logback.xml]. If you are watching the console output, it may stop after this point, if configured to only write to file.
[32mKeepAliveSpec:[0m
08:56:51.838 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:51.840 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:51.840 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:51.841 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:51.841 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@69f0b0f4
08:56:51.842 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:51.845 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:51.846 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:51.846 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:51.846 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:51.847 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:51.847 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:51.850 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:40675
08:56:51.852 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:51.852 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:43299
08:56:51.853 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 6ms
Styx http port is: [40675]
Styx https port is: [-1]
08:56:51.854 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-2, path=/, origins=[app-2:generic-app-01:localhost:45035], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@44fff386, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1fc713c9, com.hotels.styx.admin.dashboard.DashboardDataSupplier@7301eebe, com.hotels.styx.admin.dashboard.DashboardData$Downstream@76b47204]
08:56:51.854 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:51.855 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:51.855 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-2:generic-app-01
08:56:51.856 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:51.856 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:51.856 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:56:51.857 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-2, path=/, origins=[app-2:generic-app-01:localhost:45035], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mKeep Alives[0m
[32m- should keep HTTP1/1 client connection open after serving the response.[0m
[32m- should close the HTTP 1/1 client connection after serving the response when Connection=close header is present, [0m
[32m- should close the connection for HTTP 1/0 clients.[0m
08:56:55.058 [Proxy-Worker-4-Thread] WARN  c.h.s.p.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser - Closing an idle connection=/127.0.0.1:55688
08:56:55.058 [Proxy-Worker-3-Thread] WARN  c.h.s.p.ProxyConnectorFactory$ProxyConnector$IdleTransactionConnectionCloser - Closing an idle connection=/127.0.0.1:55686
[32m- should close connections considered idle[0m
Styx http port was: [40675]
Styx https port was: [-1]
08:56:55.173 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:55.175 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:55.175 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:55.175 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:55.175 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
08:56:55.181 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
[32mBadCookiesSpec:[0m
08:56:55.182 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:55.182 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:55.182 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:55.183 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@67507df
08:56:55.183 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:55.185 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:55.185 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:55.185 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:55.185 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:55.186 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:55.186 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:55.188 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:36389
08:56:55.189 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:55.190 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:34391
08:56:55.191 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 4ms
Styx http port is: [36389]
Styx https port is: [-1]
08:56:55.191 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:localhost:44535:localhost:44535], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@35c9a231, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7a4d582c, com.hotels.styx.admin.dashboard.DashboardDataSupplier@5626d18c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@45e9b12d]
08:56:55.192 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:55.192 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:55.192 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:localhost:44535
08:56:55.193 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:55.193 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:55.193 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:56:55.193 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:localhost:44535:localhost:44535], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx resiliency[0m
Styx http port was: [36389]
[32m- Proxies request with bad cookie headers[0m
[32m  + Setting ScalaCheck RNG seed value: 1539154615196 for: should accept requests with bad cookie headers [0m
[32m  + In case of a test failure, use this seed to re-run the test.[0m
[32mIt will generate an identical sequence of inputs for[0m
[32mdebugging purposes. [0m
Styx https port was: [-1]
08:56:55.831 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:55.832 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:55.833 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:55.834 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:55.834 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
08:56:55.844 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
[32mAggregatingPluginSpec:[0m
08:56:55.845 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin aggregator instrumented
08:56:55.846 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:55.846 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:55.847 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:55.848 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@7f9fc8bd
08:56:55.848 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:56:55.851 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:55.852 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:55.852 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:55.853 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:55.854 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:55.854 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:55.855 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:40465
08:56:55.858 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:55.859 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:37477
08:56:55.859 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 6ms
Styx http port is: [40465]
Styx https port is: [-1]
08:56:55.860 [MockServer STARTING] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:55.862 [MockServer-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:46873
08:56:55.862 [MockServer STARTING] INFO  com.hotels.styx.MockServer - mock server started on port 46873
08:56:55.863 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app1, path=/, origins=[app1:origin-1:localhost:46873], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@7c781c42, com.hotels.styx.admin.dashboard.DashboardData$Downstream@795f8317, com.hotels.styx.admin.dashboard.DashboardDataSupplier@633fd91, com.hotels.styx.admin.dashboard.DashboardData$Downstream@355c94be]
08:56:55.863 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:55.864 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:55.865 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app1:origin-1
08:56:55.865 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:55.865 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:55.866 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:56:55.866 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app1, path=/, origins=[app1:origin-1:localhost:46873], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx as a plugin container[0m
[32m- Gets response from aggregating plugin (no body)[0m
[32m- Gets response from aggregating plugin (with body)[0m
08:56:55.915 [MockServer STOPPING] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:55.915 [MockServer STOPPING] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:55.915 [MockServer STOPPING] INFO  com.hotels.styx.MockServer - mock server running on port 46873 stopped
Styx http port was: [40465]
Styx https port was: [-1]
08:56:55.916 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:55.918 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:55.918 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:56:55.919 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:56:55.919 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
08:56:55.928 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:56:55.930 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:56:55.930 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:55.931 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:55.932 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@727320fa
08:56:55.933 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
[32mOutstandingRequestsSpec:[0m
08:56:55.935 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:56:55.936 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:56:55.936 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:55.937 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:56:55.938 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:56:55.938 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:55.940 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:40415
08:56:55.943 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:56:55.944 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:38631
08:56:55.944 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 6ms
Styx http port is: [40415]
Styx https port is: [-1]
08:56:55.945 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/outstandingRequestsSpec/, origins=[app-1:NettyOrigin:localhost:35465], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@6a756082, com.hotels.styx.admin.dashboard.DashboardData$Downstream@cb39552, com.hotels.styx.admin.dashboard.DashboardDataSupplier@1f3b992, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2a53f215]
08:56:55.946 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:55.946 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:56:55.947 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:NettyOrigin
08:56:55.948 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:56:55.948 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:56:55.948 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/outstandingRequestsSpec/ current routes=[/outstandingRequestsSpec/]
08:56:55.949 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/outstandingRequestsSpec/, origins=[app-1:NettyOrigin:localhost:35465], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx handling of outstanding request count[0m
08:56:55.959 [ScalaTest-main-running-OutstandingRequestsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
[32m- Decrements outstanding request count after successful HTTP transaction.[0m
08:56:58.208 [ScalaTest-main-running-OutstandingRequestsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:00.443 [ScalaTest-main-running-OutstandingRequestsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:01.210 [Styx-Client-Worker-0-Thread] WARN  c.h.s.c.n.c.HttpRequestOperation - Origin responded too quickly to an ongoing request, or it was cancelled. Connection=[id: 0x9e95b8c8, L:/127.0.0.1:60476 - R:localhost/127.0.0.1:35465], Request=HttpRequest{version=HTTP/1.1, method=GET, uri=/outstandingRequestsSpec/2, headers=[Content-Length=50, Host=localhost, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=ae3b560f-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=ae3b560f-cc59-11e8-9327-0242ac1147ce}.
08:57:01.212 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/outstandingRequestsSpec/2, headers=[Content-Length=50, Host=localhost, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=ae3b560f-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=ae3b560f-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.api.exceptions.ResponseTimeoutException exceptionMessage="No response from origin. origin=app-1:NettyOrigin:localhost:35465, reason=idleStateEvent, bytesReceived=0, chunksReceived=0, bytesEmitted=0, chunksEmitted=0"
08:57:01.213 [Proxy-Worker-1-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="408 Request Timeout"
com.hotels.styx.server.RequestTimeoutException: message=DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
GET /outstandingRequestsSpec/2 HTTP/1.1
Content-Length: 50
Host: localhost
	at com.hotels.styx.server.netty.handlers.RequestTimeoutHandler.userEventTriggered(RequestTimeoutHandler.java:50) ~[styx-server-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireUserEventTriggered(CombinedChannelDuplexHandler.java:432) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.userEventTriggered(ByteToMessageDecoder.java:353) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.codec.http.HttpObjectDecoder.userEventTriggered(HttpObjectDecoder.java:460) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.CombinedChannelDuplexHandler.userEventTriggered(CombinedChannelDuplexHandler.java:243) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) [netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelIdle(IdleStateHandler.java:371) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler$ReaderIdleTimeoutTask.run(IdleStateHandler.java:494) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler$AbstractIdleTask.run(IdleStateHandler.java:466) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:120) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:309) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
08:57:01.214 [Proxy-Worker-1-Thread] WARN  c.h.s.s.n.c.HttpPipelineHandler - ResponseObservableErrorEvent, state=TERMINATED, request=HttpRequest{version=HTTP/1.1, method=GET, uri=/outstandingRequestsSpec/2, headers=[Content-Length=50, Host=localhost], id=ae3b560f-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:57:02.696 [ScalaTest-main-running-OutstandingRequestsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
[32m- Decrements outstanding request when transaction is cancelled due to proxy request timeout[0m
08:57:04.938 [ScalaTest-main-running-OutstandingRequestsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:07.173 [ScalaTest-main-running-OutstandingRequestsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:07.944 [Styx-Client-Worker-0-Thread] WARN  c.h.s.s.n.c.HttpResponseWriter - Content observable error. Written content bytes 0/0 (ackd/sent). Write events 1/1 (ackd/writes). Exception={}
com.hotels.styx.api.exceptions.ResponseTimeoutException: No response from origin. origin=app-1:NettyOrigin:localhost:35465, reason=idleStateEvent, bytesReceived=0, chunksReceived=0, bytesEmitted=0, chunksEmitted=0
	at com.hotels.styx.client.netty.connectionpool.NettyToStyxResponsePropagator.lambda$userEventTriggered$6(NettyToStyxResponsePropagator.java:170) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at java.util.Optional.ifPresent(Optional.java:159) ~[na:1.8.0_121]
	at com.hotels.styx.client.netty.connectionpool.NettyToStyxResponsePropagator.userEventTriggered(NettyToStyxResponsePropagator.java:163) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelIdle(IdleStateHandler.java:371) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler$AllIdleTimeoutTask.run(IdleStateHandler.java:567) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler$AbstractIdleTask.run(IdleStateHandler.java:466) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:120) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:309) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
08:57:07.946 [Styx-Client-Worker-0-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Error writing response. request=HttpRequest{version=HTTP/1.1, method=GET, uri=/outstandingRequestsSpec/3, headers=[Host=localhost], id=b23d2f43-cc59-11e8-9327-0242ac1147ce}, response=HttpResponse{version=HTTP/1.1, status=200 OK, headers=[Content-Length=50, X-Styx-Origin-Id=NettyOrigin, Via=1.1 styx]}, cause={}
com.hotels.styx.api.exceptions.ResponseTimeoutException: No response from origin. origin=app-1:NettyOrigin:localhost:35465, reason=idleStateEvent, bytesReceived=0, chunksReceived=0, bytesEmitted=0, chunksEmitted=0
	at com.hotels.styx.client.netty.connectionpool.NettyToStyxResponsePropagator.lambda$userEventTriggered$6(NettyToStyxResponsePropagator.java:170) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at java.util.Optional.ifPresent(Optional.java:159) ~[na:1.8.0_121]
	at com.hotels.styx.client.netty.connectionpool.NettyToStyxResponsePropagator.userEventTriggered(NettyToStyxResponsePropagator.java:163) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler.channelIdle(IdleStateHandler.java:371) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler$AllIdleTimeoutTask.run(IdleStateHandler.java:567) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.handler.timeout.IdleStateHandler$AbstractIdleTask.run(IdleStateHandler.java:466) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:120) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:309) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
08:57:07.947 [Styx-Client-Worker-0-Thread] WARN  c.h.s.c.n.c.FlowControllingHttpContentProducer - message="Inappropriate event=ChannelInactiveEvent", prefix=localhost/127.0.0.1:35465 -> /127.0.0.1:60976, Request(method=GET, url=/outstandingRequestsSpec/3, id=b23d2f43-cc59-11e8-9327-0242ac1147ce), state=TERMINATED, receivedChunks=0, receivedBytes=0, emittedChunks=0, emittedBytes=0
08:57:07.947 [Styx-Client-Worker-0-Thread] WARN  c.h.s.c.n.c.FlowControllingHttpContentProducer - message="Inappropriate event=UnsubscribeEvent", prefix=localhost/127.0.0.1:35465 -> /127.0.0.1:60976, Request(method=GET, url=/outstandingRequestsSpec/3, id=b23d2f43-cc59-11e8-9327-0242ac1147ce), state=TERMINATED, receivedChunks=0, receivedBytes=0, emittedChunks=0, emittedBytes=0
08:57:09.422 [ScalaTest-main-running-OutstandingRequestsSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
[32m- Decrements outstanding request count after client disconnects while ongoing HTTP transaction - origin has transmitted headers prior to disconnect[0m
08:57:11.659 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:11.660 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [40415]
Styx https port was: [-1]
08:57:11.661 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:11.663 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:11.664 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:11.664 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:11.665 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mMetricsSpec:[0m
08:57:11.679 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:11.680 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:57:11.680 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.681 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.682 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@15c487a8
08:57:11.683 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:11.685 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:11.686 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:11.686 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.687 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.688 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:11.689 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:11.692 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:34561
08:57:11.693 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:11.706 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:33225
08:57:11.709 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 21ms
Styx http port is: [34561]
Styx https port is: [-1]
[32mhealth check[0m
[32m- exposes metrics beginning with prefix[0m
[32m- exposes metrics by exact name[0m
Styx http port was: [34561]
[32m- returns 404 for non-existent metrics[0m
Styx https port was: [-1]
08:57:11.749 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:11.752 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:11.753 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:11.753 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:11.753 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mTlsErrorSpec:[0m
08:57:11.767 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:11.768 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpsConnectorConfig{port=0, sslProvider=JDK, certificateFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt, certificateKeyFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key, sessionTimeoutMillis=300000, sessionCacheSize=0, cipherSuites=[], protocols=TLSv1.2}] name=Proxy
08:57:11.768 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.778 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.779 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@7978e022
08:57:11.779 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:11.783 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:11.784 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:11.784 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.785 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.787 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:11.787 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:11.790 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:37609
08:57:11.792 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:11.793 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:39139
08:57:11.793 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 7ms
Styx http port is: [-1]
Styx https port is: [37609]
08:57:11.795 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=https-app, path=/secure, origins=[https-app:generic-app:localhost:35499], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@5d5b9ecb, protocols=[], cipherSuites=[]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1ee27d73, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5e5aafc6, com.hotels.styx.admin.dashboard.DashboardDataSupplier@542f6803, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5583098b]
08:57:11.795 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:11.796 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:11.797 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=https-app:generic-app
08:57:11.798 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={"proxy":{"connectors":{"https":{"port":0,"sslProvider":"JDK","certificateFile":"/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt","certificateKeyFile":"/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key","protocols":["TLSv1.2"]}}},"admin":{"connectors":{"http":{"port":0}}}}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:11.798 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:57:11.798 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/secure current routes=[/secure]
08:57:11.799 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=https-app, path=/secure, origins=[https-app:generic-app:localhost:35499], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@5d5b9ecb, protocols=[], cipherSuites=[]}}], removed=[], updated=[]}
[32mTLS errors handling[0m
08:57:11.809 [Proxy-Worker-0-Thread] INFO  c.h.s.s.n.c.HttpPipelineHandler - SSL handshake failure from incoming connection cause="Client requested protocol TLSv1.1 not enabled or not supported", serverAddress=/127.0.0.1:37609, clientAddress=/127.0.0.1:42946
08:57:11.810 [simple-netty-http-client-Client-Worker-0-Thread] WARN  c.h.s.c.n.c.FlowControllingHttpContentProducer - message="Inappropriate event=ChannelInactiveEvent", prefix=localhost/127.0.0.1:37609 -> /127.0.0.1:42946, Request(method=GET, url=https://localhost:37609/secure, id=264af1b2-aa9f-4897-a134-dac0f58bb3c7), state=TERMINATED, receivedChunks=0, receivedBytes=0, emittedChunks=0, emittedBytes=0
[32m- Logs an SSL handshake exception[0m
08:57:11.825 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:11.826 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:11.826 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:11.827 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [-1]
Styx https port was: [37609]
08:57:11.828 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:11.832 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:11.833 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:11.837 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:11.837 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mHttpOutboundMessageLoggingSpec:[0m
08:57:11.850 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:11.851 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}, HttpsConnectorConfig{port=0, sslProvider=JDK, certificateFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt, certificateKeyFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key, sessionTimeoutMillis=300000, sessionCacheSize=0, cipherSuites=[TLS_RSA_WITH_AES_128_GCM_SHA256], protocols=}] name=Proxy
08:57:11.852 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.861 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.862 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@3e0fbeb5
08:57:11.863 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:11.865 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:11.866 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:11.866 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.867 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.868 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:11.868 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:11.871 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:43569
08:57:11.874 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:41155
08:57:11.874 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:11.875 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:33487
08:57:11.875 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
Styx http port is: [43569]
Styx https port is: [41155]
08:57:11.877 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:34047], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@4976085, com.hotels.styx.admin.dashboard.DashboardData$Downstream@777d191f, com.hotels.styx.admin.dashboard.DashboardDataSupplier@7fc420b8, com.hotels.styx.admin.dashboard.DashboardData$Downstream@31142d58]
08:57:11.877 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:11.878 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:11.879 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:generic-app-01
08:57:11.880 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:11.880 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:57:11.880 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:57:11.881 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:34047], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx outbound request/response logging[0m
08:57:11.897 [Styx-Client-Worker-0-Thread] INFO  c.hotels.styx.http-messages.outbound - requestId=b663324a-cc59-11e8-9327-0242ac1147ce, request={method=GET, uri=http://localhost:43569/foobar, origin="localhost:34047", headers=[Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=b663324a-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http, Host=localhost:43569]}
08:57:11.898 [Styx-Client-Worker-0-Thread] INFO  c.hotels.styx.http-messages.outbound - requestId=b663324a-cc59-11e8-9327-0242ac1147ce, response={status=200 OK, headers=[Transfer-Encoding=chunked, Server=Jetty(6.1.26)]}
[32m- Should log request and response[0m
Styx http port was: [43569]
Styx https port was: [41155]
08:57:11.909 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:11.914 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:11.914 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:11.915 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:11.915 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mHttpMessageLoggingSpec:[0m
08:57:11.926 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:11.929 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}, HttpsConnectorConfig{port=0, sslProvider=JDK, certificateFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt, certificateKeyFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key, sessionTimeoutMillis=300000, sessionCacheSize=0, cipherSuites=[TLS_RSA_WITH_AES_128_GCM_SHA256], protocols=}] name=Proxy
08:57:11.929 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.938 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.939 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@f5ce0bb
08:57:11.939 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:11.942 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:11.943 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:11.943 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.943 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:11.944 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:11.945 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:11.947 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:41389
08:57:11.949 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:37909
08:57:11.950 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:11.951 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:34625
08:57:11.951 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 7ms
Styx http port is: [41389]
Styx https port is: [37909]
08:57:11.952 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:42743], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@4bcaa195, com.hotels.styx.admin.dashboard.DashboardData$Downstream@d08edc5, com.hotels.styx.admin.dashboard.DashboardDataSupplier@49fa1d74, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3f362135]
08:57:11.953 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:11.953 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:11.954 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:generic-app-01
08:57:11.955 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:11.955 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:57:11.955 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:57:11.955 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:42743], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx request/response logging[0m
08:57:11.968 [Proxy-Worker-0-Thread] INFO  c.hotels.styx.http-messages.inbound - requestId=b66ecb0b-cc59-11e8-9327-0242ac1147ce, secure=false, request={method=GET, uri=http://localhost:41389/foobar, origin="N/A", headers=[Host=localhost:41389]}
08:57:11.977 [Styx-Client-Worker-0-Thread] INFO  c.hotels.styx.http-messages.inbound - requestId=b66ecb0b-cc59-11e8-9327-0242ac1147ce, secure=false, response={status=200 OK, headers=[Server=Jetty(6.1.26), X-Styx-Origin-Id=generic-app-01, Via=1.1 styx]}
[32m- Should log request and response[0m
08:57:12.014 [Proxy-Worker-1-Thread] INFO  c.hotels.styx.http-messages.inbound - requestId=b675cfec-cc59-11e8-9327-0242ac1147ce, secure=true, request={method=GET, uri=https://localhost:37909/foobar, origin="N/A", headers=[Host=localhost:37909]}
08:57:12.016 [Styx-Client-Worker-0-Thread] INFO  c.hotels.styx.http-messages.inbound - requestId=b675cfec-cc59-11e8-9327-0242ac1147ce, secure=true, response={status=200 OK, headers=[Server=Jetty(6.1.26), X-Styx-Origin-Id=generic-app-01, Via=1.1 styx]}
[32m- Should log HTTPS request[0m
Styx http port was: [41389]
Styx https port was: [37909]
08:57:12.029 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:12.032 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:12.033 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:12.033 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:12.033 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mOriginRestrictionSpec:[0m
08:57:12.046 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:12.048 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:57:12.048 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:12.049 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:12.050 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@1084f78c
08:57:12.051 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:12.053 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:12.054 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:12.054 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:12.054 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:12.056 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:12.056 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:12.059 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:41317
08:57:12.061 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:12.062 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:36103
08:57:12.063 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 7ms
Styx http port is: [41317]
Styx https port is: [-1]
08:57:12.064 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/app/, origins=[appOne:h1:localhost:42401, appOne:h2:localhost:35293, appOne:h3:localhost:44473, appOne:h4:localhost:37601], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@4fc5563d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@286090c, com.hotels.styx.admin.dashboard.DashboardDataSupplier@31120021, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3df1a1ac]
08:57:12.065 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:12.066 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:12.066 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:h1
08:57:12.067 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:h2
08:57:12.067 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:h3
08:57:12.067 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:h4
08:57:12.068 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:12.068 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:12.068 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/app/ current routes=[/app/]
08:57:12.069 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/app/, origins=[appOne:h1:localhost:42401, appOne:h2:localhost:35293, appOne:h3:localhost:44473, appOne:h4:localhost:37601], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mRoutes correctly[0m
[32m- Routes to origin indicated by cookie.[0m
[32m- Routes to range of origins indicated by cookie.[0m
08:57:12.149 [Proxy-Worker-2-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=b68a695f-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.api.exceptions.NoAvailableHostsException: No hosts available for application appOne, state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=/app/, headers=[Host=localhost:41317, Cookie=originRestrictionCookie=(?!)], id=b68a695f-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:57:12.150 [Proxy-Worker-2-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="502 Bad Gateway", exception="com.hotels.styx.api.exceptions.NoAvailableHostsException: No hosts available for application appOne"
[32m- If nothing matches treat as no hosts available[0m
[32m- Routes to list of origins indicated by cookie.[0m
Styx http port was: [41317]
Styx https port was: [-1]
08:57:12.469 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:12.471 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:12.472 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:12.472 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:12.472 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
08:57:12.482 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:12.484 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:57:12.484 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
[32mChunkedDownloadSpec:[0m
08:57:12.485 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:12.486 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@39c96e48
08:57:12.486 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:12.488 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:12.489 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:12.489 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:12.490 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:12.510 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:12.511 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:12.515 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:46165
08:57:12.517 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:12.518 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:45945
08:57:12.519 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 9ms
Styx http port is: [46165]
Styx https port is: [-1]
08:57:12.520 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/chunkedDownloadSpec/a/, origins=[appOne:localhost:46557:localhost:46557], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1a565afb, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2fd64b11, com.hotels.styx.admin.dashboard.DashboardDataSupplier@949c598, com.hotels.styx.admin.dashboard.DashboardData$Downstream@43d3aba5]
08:57:12.521 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:12.521 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:12.522 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:localhost:46557
08:57:12.522 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:12.522 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:12.523 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/chunkedDownloadSpec/a/ current routes=[/chunkedDownloadSpec/a/]
08:57:12.523 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/chunkedDownloadSpec/a/, origins=[appOne:localhost:46557:localhost:46557], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:57:12.525 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appTwo, path=/chunkedDownloadSpec/b/, origins=[appTwo:localhost:34463:localhost:34463], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1a565afb, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2fd64b11, com.hotels.styx.admin.dashboard.DashboardDataSupplier@949c598, com.hotels.styx.admin.dashboard.DashboardData$Downstream@43d3aba5, com.hotels.styx.admin.dashboard.DashboardData$Downstream@303c55fa]
08:57:12.525 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:12.525 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:12.526 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appTwo:localhost:34463
08:57:12.526 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:12.527 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:12.527 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/chunkedDownloadSpec/b/ current routes=[/chunkedDownloadSpec/a/, /chunkedDownloadSpec/b/]
08:57:12.527 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appTwo, path=/chunkedDownloadSpec/b/, origins=[appTwo:localhost:34463:localhost:34463], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mDownloads of chunked data.[0m
[32m- Proxies a response with chunked HTTP content.[0m
[32m- Proxies long lasting HTTP Chunked downloads without triggering gateway read timeout.[0m
08:57:17.582 [ScalaTest-main-running-ChunkedDownloadSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:19.832 [ScalaTest-main-running-ChunkedDownloadSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:22.575 [ScalaTest-main-running-ChunkedDownloadSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:22.581 [Proxy-Worker-3-Thread] WARN  c.h.s.s.n.c.HttpResponseWriter - Write error. Written content bytes 500/600 (ackd/sent). Write events 6/7 (ackd/writes), Exception=HttpResponse{version=HTTP/1.1, status=200 OK, headers=[X-Styx-Origin-Id=localhost:34463, Via=1.1 styx, X-Styx-Info=noJvmRouteSet;bc7526d5-cc59-11e8-9327-0242ac1147ce]}
java.nio.channels.ClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(...)(Unknown Source) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
08:57:22.584 [Styx-Client-Worker-0-Thread] WARN  c.h.s.s.n.c.HttpResponseWriter - Content observable error. Written content bytes 500/600 (ackd/sent). Write events 6/7 (ackd/writes). Exception={}
com.hotels.styx.client.netty.ConsumerDisconnectedException: The consumer unsubscribed. connection=localhost/127.0.0.1:34463 -> /127.0.0.1:47186, Request(method=GET, url=/chunkedDownloadSpec/b/3, id=bc7526d5-cc59-11e8-9327-0242ac1147ce) producerState=STREAMING
	at com.hotels.styx.client.netty.connectionpool.FlowControllingHttpContentProducer.emitErrorAndTerminateOnPrematureUnsubscription(FlowControllingHttpContentProducer.java:280) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine$StateEventHandler.lambda$new$0(StateMachine.java:134) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine.handle(StateMachine.java:73) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine.handle(StateMachine.java:87) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.client.netty.connectionpool.FlowControllingHttpContentProducer.unsubscribe(FlowControllingHttpContentProducer.java:380) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at java.util.Optional.ifPresent(Optional.java:159) ~[na:1.8.0_121]
	at com.hotels.styx.client.netty.connectionpool.NettyToStyxResponsePropagator.lambda$null$3(NettyToStyxResponsePropagator.java:139) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.PromiseTask.run(PromiseTask.java:73) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:309) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
08:57:22.586 [Proxy-Worker-3-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Error writing response. request=HttpRequest{version=HTTP/1.1, method=GET, uri=/chunkedDownloadSpec/b/3, headers=[Host=localhost:46165], id=bc7526d5-cc59-11e8-9327-0242ac1147ce}, response=HttpResponse{version=HTTP/1.1, status=200 OK, headers=[X-Styx-Origin-Id=localhost:34463, Via=1.1 styx]}, cause={}
java.nio.channels.ClosedChannelException: null
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(...)(Unknown Source) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
08:57:24.814 [ScalaTest-main-running-ChunkedDownloadSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
[32m- Cancels the HTTP download request when browser closes the connection.[0m
08:57:27.046 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:27.046 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [46165]
Styx https port was: [-1]
08:57:27.047 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:27.049 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:27.050 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:27.050 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:27.050 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mDoubleSubscribingPluginSpec:[0m
08:57:27.060 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:27.061 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin aggregator instrumented
08:57:27.061 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:57:27.061 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:27.063 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:27.063 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@10947c4e
08:57:27.064 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:27.064 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - MetricsHandler instantiated with no caching
08:57:27.066 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JVMMetricsHandler instantiated with no caching
08:57:27.066 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:27.067 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JsonHandler instantiated with cache expiration of PT10S
08:57:27.068 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:27.068 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:27.068 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:27.069 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:27.070 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:27.071 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:36437
08:57:27.076 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:27.077 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44723
08:57:27.078 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
Styx http port is: [36437]
Styx https port is: [-1]
08:57:27.079 [MockServer STARTING] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:27.080 [MockServer-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:43833
08:57:27.081 [MockServer STARTING] INFO  com.hotels.styx.MockServer - mock server started on port 43833
08:57:27.082 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app1, path=/, origins=[app1:origin-1:localhost:43833], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@40729f01, com.hotels.styx.admin.dashboard.DashboardData$Downstream@d535a3d, com.hotels.styx.admin.dashboard.DashboardDataSupplier@2d760326, com.hotels.styx.admin.dashboard.DashboardData$Downstream@9e54c59]
08:57:27.083 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:27.083 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:27.084 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app1:origin-1
08:57:27.085 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:27.085 [pool-1010-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=app1, activeOrigins=[app1:origin-1:localhost:43833], inactiveOrigins=[], disabledOrigins=[]}
08:57:27.085 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:27.085 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:57:27.086 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app1, path=/, origins=[app1:origin-1:localhost:43833], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:57:27.087 [pool-1010-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=app1, activeOrigins=[app1:origin-1:localhost:43833], inactiveOrigins=[], disabledOrigins=[]}
[32mStyx as a plugin container[0m
08:57:27.098 [Styx-Client-Worker-0-Thread] INFO  c.h.styx.plugins.ContentCutoffPlugin - do something with full content: 
08:57:27.100 [Styx-Client-Worker-0-Thread] WARN  c.h.s.c.n.c.FlowControllingHttpContentProducer - message="Secondary content subscription", prefix=localhost/127.0.0.1:43833 -> /127.0.0.1:53516, Request(method=GET, url=/, id=bf728858-cc59-11e8-9327-0242ac1147ce), state=COMPLETED, receivedChunks=0, receivedBytes=0, emittedChunks=0, emittedBytes=0
08:57:27.101 [Styx-Client-Worker-0-Thread] WARN  c.h.s.s.n.c.HttpResponseWriter - Content observable error. Written content bytes 0/0 (ackd/sent). Write events 1/1 (ackd/writes). Exception={}
java.lang.IllegalStateException: Secondary subscription occurred. producerState=COMPLETED. connection=localhost/127.0.0.1:43833 -> /127.0.0.1:53516, Request(method=GET, url=/, id=bf728858-cc59-11e8-9327-0242ac1147ce)
	at com.hotels.styx.client.netty.connectionpool.FlowControllingHttpContentProducer.contentSubscribedInCompletedState(FlowControllingHttpContentProducer.java:256) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine$StateEventHandler.lambda$new$0(StateMachine.java:134) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine.handle(StateMachine.java:73) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine.handle(StateMachine.java:87) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.client.netty.connectionpool.FlowControllingHttpContentProducer.onSubscribed(FlowControllingHttpContentProducer.java:372) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.client.netty.connectionpool.NettyToStyxResponsePropagator$InitializeNettyContentProducerOnSubscribe.lambda$call$0(NettyToStyxResponsePropagator.java:246) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.PromiseTask.run(PromiseTask.java:73) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:309) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
got response: HttpObjectAggregator$AggregatedFullHttpResponse(decodeResult: success, version: HTTP/1.1, content: CompositeByteBuf(ridx: 0, widx: 0, cap: 0, components=0))
HTTP/1.1 200 OK
X-Styx-Origin-Id: origin-1
Via: 1.1 styx
X-Styx-Info: noJvmRouteSet;bf728858-cc59-11e8-9327-0242ac1147ce
content-length: 0
08:57:27.102 [Styx-Client-Worker-0-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Error writing response. request=HttpRequest{version=HTTP/1.1, method=GET, uri=/, headers=[Host=localhost:36437], id=bf728858-cc59-11e8-9327-0242ac1147ce}, response=HttpResponse{version=HTTP/1.1, status=200 OK, headers=[X-Styx-Origin-Id=origin-1, Via=1.1 styx]}, cause={}
java.lang.IllegalStateException: Secondary subscription occurred. producerState=COMPLETED. connection=localhost/127.0.0.1:43833 -> /127.0.0.1:53516, Request(method=GET, url=/, id=bf728858-cc59-11e8-9327-0242ac1147ce)
	at com.hotels.styx.client.netty.connectionpool.FlowControllingHttpContentProducer.contentSubscribedInCompletedState(FlowControllingHttpContentProducer.java:256) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine$StateEventHandler.lambda$new$0(StateMachine.java:134) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine.handle(StateMachine.java:73) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.common.StateMachine.handle(StateMachine.java:87) ~[styx-common-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.client.netty.connectionpool.FlowControllingHttpContentProducer.onSubscribed(FlowControllingHttpContentProducer.java:372) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at com.hotels.styx.client.netty.connectionpool.NettyToStyxResponsePropagator$InitializeNettyContentProducerOnSubscribe.lambda$call$0(NettyToStyxResponsePropagator.java:246) ~[styx-client-0.9-SNAPSHOT.jar:na]
	at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.PromiseTask.run(PromiseTask.java:73) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:309) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-all-4.1.15.Final.jar:4.1.15.Final]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
08:57:27.103 [ScalaTest-main-running-DoubleSubscribingPluginSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:27.138 [simple-netty-http-client-Client-Worker-0-Thread] DEBUG c.h.s.c.n.c.FlowControllingHttpContentProducer - EMITTING_BUFFERED_CONTENT -> COMPLETED
[32m- Tolerates plugins that break the content observable chain[0m
08:57:29.346 [MockServer STOPPING] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:29.347 [MockServer STOPPING] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:29.348 [MockServer STOPPING] INFO  com.hotels.styx.MockServer - mock server running on port 43833 stopped
Styx http port was: [36437]
Styx https port was: [-1]
08:57:29.348 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:29.351 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:29.352 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:29.352 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:29.352 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mHealthCheckSpec:[0m
08:57:29.365 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:29.366 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:57:29.367 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:29.369 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:29.373 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@56e9a474
08:57:29.374 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:29.375 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - MetricsHandler instantiated with no caching
08:57:29.378 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JVMMetricsHandler instantiated with no caching
08:57:29.379 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:29.379 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JsonHandler instantiated with cache expiration of PT10S
08:57:29.380 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:29.380 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:29.382 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:29.384 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:29.385 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:29.388 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35631
08:57:29.391 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:29.392 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35865
08:57:29.392 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 9ms
Styx http port is: [35631]
Styx https port is: [-1]
08:57:29.394 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=httpApp, path=/http/, origins=[httpApp:httpApp-01:localhost:45221], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/version.txt], intervalMillis=100, timeoutMillis=500, healthyThreshold=1, unhealthyThreshold=1}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@2cd4e16a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@42505474, com.hotels.styx.admin.dashboard.DashboardDataSupplier@7b477141, com.hotels.styx.admin.dashboard.DashboardData$Downstream@784223e9]
08:57:29.395 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:29.396 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:29.398 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=httpApp:httpApp-01
08:57:29.399 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={"proxy":{"connectors":{"http":{"port":0}}},"admin":{"connectors":{"http":{"port":0}}},"request-logging":{"enabled":true}}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:29.399 [pool-1025-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=httpApp, activeOrigins=[httpApp:httpApp-01:localhost:45221], inactiveOrigins=[], disabledOrigins=[]}
08:57:29.400 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:57:29.400 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/http/ current routes=[/http/]
08:57:29.401 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=httpApp, path=/http/, origins=[httpApp:httpApp-01:localhost:45221], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/version.txt], intervalMillis=100, timeoutMillis=500, healthyThreshold=1, unhealthyThreshold=1}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:57:29.402 [pool-1025-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=httpApp, activeOrigins=[httpApp:httpApp-01:localhost:45221], inactiveOrigins=[], disabledOrigins=[]}
08:57:29.403 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=httpsApp, path=/https/, origins=[httpsApp:httpsApp-01:localhost:35971], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/version.txt], intervalMillis=100, timeoutMillis=500, healthyThreshold=1, unhealthyThreshold=1}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@1f1cddf3, protocols=[], cipherSuites=[]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@2cd4e16a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@42505474, com.hotels.styx.admin.dashboard.DashboardDataSupplier@7b477141, com.hotels.styx.admin.dashboard.DashboardData$Downstream@784223e9, com.hotels.styx.admin.dashboard.DashboardData$Downstream@228bda54]
08:57:29.408 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:29.409 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:29.411 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=httpsApp:httpsApp-01
08:57:29.412 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={"proxy":{"connectors":{"http":{"port":0}}},"admin":{"connectors":{"http":{"port":0}}},"request-logging":{"enabled":true}}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:29.412 [pool-1025-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=httpsApp, activeOrigins=[httpsApp:httpsApp-01:localhost:35971], inactiveOrigins=[], disabledOrigins=[]}
08:57:29.412 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:57:29.413 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/https/ current routes=[/https/, /http/]
08:57:29.414 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=httpsApp, path=/https/, origins=[httpsApp:httpsApp-01:localhost:35971], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=HealthCheckConfig{uri=Optional[/version.txt], intervalMillis=100, timeoutMillis=500, healthyThreshold=1, unhealthyThreshold=1}, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@1f1cddf3, protocols=[], cipherSuites=[]}}], removed=[], updated=[]}
08:57:29.416 [pool-1025-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=httpApp, activeOrigins=[httpApp:httpApp-01:localhost:45221], inactiveOrigins=[], disabledOrigins=[]}
08:57:29.417 [pool-1025-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=httpsApp, activeOrigins=[httpsApp:httpsApp-01:localhost:35971], inactiveOrigins=[], disabledOrigins=[]}
[32mBackend Service TLS Protocol Setting[0m
[32m- Marks origins healthy[0m
08:57:30.897 [Health-Check-Monitor-httpApp-Client-Worker-0-Thread] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="httpApp=httpApp-01", change="ACTIVE->INACTIVE"
08:57:30.898 [pool-1025-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=httpApp, activeOrigins=[], inactiveOrigins=[httpApp:httpApp-01:localhost:45221], disabledOrigins=[]}
08:57:30.922 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:30.922 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:30.922 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:30.923 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [35631]
Styx https port was: [-1]
08:57:30.923 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:30.925 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:30.926 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:30.928 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:30.928 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mAsyncResponseContentSpec:[0m
08:57:30.937 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:30.939 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin asyncDelayPlugin instrumented
08:57:30.939 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:57:30.939 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:30.940 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:30.940 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@2be21396
08:57:30.941 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:30.945 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:30.946 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:30.946 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:30.947 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:30.948 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:30.951 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:30.953 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35449
08:57:30.954 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:30.955 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:41707
08:57:30.956 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
Styx http port is: [35449]
Styx https port is: [-1]
08:57:30.957 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:39089], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@6413d7e7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@d16be4f, com.hotels.styx.admin.dashboard.DashboardDataSupplier@17b37e9a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6bcb12e6]
08:57:30.958 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:30.958 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:30.959 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:generic-app-01
08:57:30.960 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:30.960 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:30.960 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:57:30.961 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:generic-app-01:localhost:39089], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mStyx as a plugin container[0m
08:57:31.012 [Health-Check-Monitor-httpsApp-Client-Worker-0-Thread] INFO  c.h.styx.client.OriginsInventory - Origin state change: origin="httpsApp=httpsApp-01", change="ACTIVE->INACTIVE"
[32m- Proxies requests when plugin processes response content asynchronously on a separate thread pool[0m
Styx http port was: [35449]
Styx https port was: [-1]
08:57:32.124 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:32.127 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:32.127 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:32.128 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:32.128 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mOriginsReloadRepetitionSpec:[0m
08:57:32.144 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:32.145 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:57:32.145 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:32.146 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:32.146 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@28a9494b
08:57:32.146 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:32.148 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:32.148 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:32.148 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:32.149 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:32.149 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:32.149 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:32.151 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:44421
08:57:32.153 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:32.154 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35811
08:57:32.154 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 5ms
Styx http port is: [44421]
Styx https port is: [-1]
08:57:32.155 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:37307, appOne:appOne-02:localhost:43103, appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@798dad3d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@27abb6ca, com.hotels.styx.admin.dashboard.DashboardDataSupplier@696db620, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6968c1d6]
08:57:32.155 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.155 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.156 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-03
08:57:32.156 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-02
08:57:32.156 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-01
08:57:32.157 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:32.157 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:32.157 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:57:32.157 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:37307, appOne:appOne-02:localhost:43103, appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mReload Origins Endpoint[0m
08:57:32.159 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:37307, appOne:appOne-02:localhost:43103, appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@798dad3d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@27abb6ca, com.hotels.styx.admin.dashboard.DashboardDataSupplier@696db620, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6968c1d6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68e02f33]
08:57:32.160 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-03
08:57:32.160 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-02
08:57:32.160 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-01
08:57:32.160 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:37307, appOne:appOne-02:localhost:43103, appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:57:32.161 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:37307, appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@798dad3d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@27abb6ca, com.hotels.styx.admin.dashboard.DashboardDataSupplier@696db620, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6968c1d6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68e02f33, com.hotels.styx.admin.dashboard.DashboardData$Downstream@64942607]
08:57:32.161 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.161 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.161 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-03
08:57:32.161 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-01
08:57:32.162 [ScalaTest-main-running-OriginsReloadRepetitionSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:32.162 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:32.162 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:57:32.162 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:37307, appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:57:32.175 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:37307, appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@798dad3d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@27abb6ca, com.hotels.styx.admin.dashboard.DashboardDataSupplier@696db620, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6968c1d6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68e02f33, com.hotels.styx.admin.dashboard.DashboardData$Downstream@64942607, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2404b5a]
08:57:32.175 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-03
08:57:32.176 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-01
08:57:32.176 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:37307, appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:57:32.177 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@798dad3d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@27abb6ca, com.hotels.styx.admin.dashboard.DashboardDataSupplier@696db620, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6968c1d6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68e02f33, com.hotels.styx.admin.dashboard.DashboardData$Downstream@64942607, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2404b5a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3af58f76]
08:57:32.177 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.177 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.178 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-03
08:57:32.178 [ScalaTest-main-running-OriginsReloadRepetitionSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:32.178 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:32.178 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:57:32.178 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:57:32.182 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@798dad3d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@27abb6ca, com.hotels.styx.admin.dashboard.DashboardDataSupplier@696db620, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6968c1d6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68e02f33, com.hotels.styx.admin.dashboard.DashboardData$Downstream@64942607, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2404b5a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3af58f76, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1d06f16f]
08:57:32.183 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-03
08:57:32.183 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:57:32.184 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:37307, appOne:appOne-02:localhost:43103, appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@798dad3d, com.hotels.styx.admin.dashboard.DashboardData$Downstream@27abb6ca, com.hotels.styx.admin.dashboard.DashboardDataSupplier@696db620, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6968c1d6, com.hotels.styx.admin.dashboard.DashboardData$Downstream@68e02f33, com.hotels.styx.admin.dashboard.DashboardData$Downstream@64942607, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2404b5a, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3af58f76, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1d06f16f, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4fa4f485]
08:57:32.184 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.184 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.185 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-03
08:57:32.185 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-02
08:57:32.185 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-01
08:57:32.185 [ScalaTest-main-running-OriginsReloadRepetitionSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:32.185 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:32.185 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:57:32.186 [ScalaTest-main-running-OriginsReloadRepetitionSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:37307, appOne:appOne-02:localhost:43103, appOne:appOne-03:localhost:44485], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32m- should be able to remove and re-add origins[0m
Styx http port was: [44421]
Styx https port was: [-1]
08:57:32.500 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:32.504 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:32.504 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:32.504 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:32.505 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
08:57:32.514 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
[32mOriginsReloadSpec:[0m
08:57:32.515 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:57:32.515 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:32.516 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:32.516 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@6274670b
08:57:32.517 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:32.522 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:32.522 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:32.523 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:32.523 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:32.524 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:32.524 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:32.527 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:36367
08:57:32.529 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:32.530 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:35609
08:57:32.530 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 7ms
Styx http port is: [36367]
Styx https port is: [-1]
08:57:32.533 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:41851, appOne:appOne-02:localhost:44441], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@4887de2b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b4825f0, com.hotels.styx.admin.dashboard.DashboardDataSupplier@40ac6b76, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7980cf2c]
08:57:32.533 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.533 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.534 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-02
08:57:32.534 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-01
08:57:32.535 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:32.535 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:32.535 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:57:32.536 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:41851, appOne:appOne-02:localhost:44441], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mReload Origins Endpoint[0m
[32m- should return 200 for POST /admin/tasks/origins/reload[0m
[32m- should return 405 for GET /admin/tasks/origins/reload[0m
08:57:32.558 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:41851, appOne:appOne-02:localhost:44441], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@4887de2b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b4825f0, com.hotels.styx.admin.dashboard.DashboardDataSupplier@40ac6b76, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7980cf2c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@682abca7]
08:57:32.559 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-02
08:57:32.559 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-01
08:57:32.560 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:41851, appOne:appOne-02:localhost:44441], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:57:32.561 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:41851, appOne:appOne-02:localhost:44441, appOne:appOne-03:localhost:45673], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@4887de2b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b4825f0, com.hotels.styx.admin.dashboard.DashboardDataSupplier@40ac6b76, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7980cf2c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@682abca7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1d858300]
08:57:32.561 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.562 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.562 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-03
08:57:32.562 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-02
08:57:32.563 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-01
08:57:32.563 [ScalaTest-main-running-OriginsReloadSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:32.563 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:32.563 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:57:32.564 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:41851, appOne:appOne-02:localhost:44441, appOne:appOne-03:localhost:45673], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32m- should reflect origin addition in origins status page[0m
08:57:32.575 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:41851, appOne:appOne-02:localhost:44441, appOne:appOne-03:localhost:45673], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@4887de2b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b4825f0, com.hotels.styx.admin.dashboard.DashboardDataSupplier@40ac6b76, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7980cf2c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@682abca7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1d858300, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5a97b17c]
08:57:32.575 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-03
08:57:32.575 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-02
08:57:32.575 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=appOne:appOne-01
08:57:32.576 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:41851, appOne:appOne-02:localhost:44441, appOne:appOne-03:localhost:45673], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:57:32.577 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:41851], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@4887de2b, com.hotels.styx.admin.dashboard.DashboardData$Downstream@3b4825f0, com.hotels.styx.admin.dashboard.DashboardDataSupplier@40ac6b76, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7980cf2c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@682abca7, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1d858300, com.hotels.styx.admin.dashboard.DashboardData$Downstream@5a97b17c, com.hotels.styx.admin.dashboard.DashboardData$Downstream@9c73fff]
08:57:32.578 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.578 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.579 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne:appOne-01
08:57:32.579 [ScalaTest-main-running-OriginsReloadSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:32.579 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:32.579 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/foobar current routes=[/foobar]
08:57:32.579 [ScalaTest-main-running-OriginsReloadSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=appOne, path=/foobar, origins=[appOne:appOne-01:localhost:41851], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32m- should reflect origin removal in origins status page[0m
Styx http port was: [36367]
Styx https port was: [-1]
08:57:32.891 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:32.895 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:32.895 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:32.895 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:32.896 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mVersionAbsentFromResponseHeaderSpec:[0m
08:57:32.913 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:32.914 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:57:32.914 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:32.915 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:32.915 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@60aec68a
08:57:32.916 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:32.919 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:32.920 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:32.920 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:32.921 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:32.922 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:32.922 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:32.925 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:37113
08:57:32.928 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:32.929 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:37373
08:57:32.929 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 7ms
Styx http port is: [37113]
Styx https port is: [-1]
[32mStyx Info response header default format[0m
08:57:32.931 [ScalaTest-main-running-VersionAbsentFromResponseHeaderSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:39087], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@4a8ffd75, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1727e03a, com.hotels.styx.admin.dashboard.DashboardDataSupplier@7f9e8421, com.hotels.styx.admin.dashboard.DashboardData$Downstream@23da79eb]
08:57:32.931 [ScalaTest-main-running-VersionAbsentFromResponseHeaderSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.932 [ScalaTest-main-running-VersionAbsentFromResponseHeaderSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:32.932 [ScalaTest-main-running-VersionAbsentFromResponseHeaderSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=default-app:generic-app-01
08:57:32.933 [ScalaTest-main-running-VersionAbsentFromResponseHeaderSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:32.933 [ScalaTest-main-running-VersionAbsentFromResponseHeaderSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:32.933 [ScalaTest-main-running-VersionAbsentFromResponseHeaderSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:57:32.934 [ScalaTest-main-running-VersionAbsentFromResponseHeaderSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=default-app, path=/, origins=[default-app:generic-app-01:localhost:39087], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32m- should respond without version in response header[0m
Styx http port was: [37113]
Styx https port was: [-1]
08:57:32.973 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:32.976 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:32.976 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:32.977 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:32.977 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mConditionRoutingSpec:[0m
08:57:32.987 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:33.175 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}, HttpsConnectorConfig{port=0, sslProvider=JDK, certificateFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.crt, certificateKeyFile=/root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/test-classes/ssl/testCredentials.key, sessionTimeoutMillis=300000, sessionCacheSize=0, cipherSuites=[TLS_RSA_WITH_AES_128_GCM_SHA256], protocols=}] name=Proxy
08:57:33.176 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:33.182 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:33.182 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@3b2e5c0d
08:57:33.183 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:33.183 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - MetricsHandler instantiated with no caching
08:57:33.185 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JVMMetricsHandler instantiated with no caching
08:57:33.185 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:33.185 [ScalaTest-main-running-DiscoverySuite] DEBUG c.h.styx.admin.handlers.JsonHandler - JsonHandler instantiated with cache expiration of PT10S
08:57:33.186 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:33.186 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:33.186 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:33.187 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:33.188 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:33.190 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:39379
08:57:33.194 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:43113
08:57:33.194 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:33.195 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:46303
08:57:33.196 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 8ms
Styx http port is: [39379]
Styx https port is: [43113]
08:57:33.197 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne-http, path=/, origins=[appOne-http:app-01:localhost:37759], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@1dad01fe]
08:57:33.197 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:33.197 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:33.198 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne-http:app-01
08:57:33.199 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:33.199 [pool-1099-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appOne-http, activeOrigins=[appOne-http:app-01:localhost:37759], inactiveOrigins=[], disabledOrigins=[]}
08:57:33.199 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:57:33.199 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:57:33.200 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=appOne-https, path=/, origins=[appOne-https:app-ssl-01:localhost:35771], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=TlsSettings{trustAllCerts=true, sslProvider=JDK, additionalCerts=[], trustStorePath=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts, trustStorePassword=[C@1a464fa3, protocols=[], cipherSuites=[]}}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@4215e133]
08:57:33.200 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:33.200 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:33.201 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=appOne-https:app-ssl-01
08:57:33.201 [pool-1099-thread-1] DEBUG c.h.s.a.h.OriginsInventoryHandler - received origins inventory state change OriginsSnapshot{appId=appOne-https, activeOrigins=[appOne-https:app-ssl-01:localhost:35771], inactiveOrigins=[], disabledOrigins=[]}
08:57:33.201 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:33.201 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie not specified - origin restriction disabled
08:57:33.201 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
[32mStyx routing of HTTP requests[0m
[32m- Routes HTTP protocol to HTTP origins[0m
08:57:33.410 [mock-stub-app-ssl-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - app-ssl-01 received: https://localhost:43113/app.2
[]
08:57:33.429 [mock-admin-app-ssl-01-Worker-0-Thread] INFO  c.h.styx.servers.MockOriginServer - Received: /__admin/requests/count
[123, 10, 32, 32, 34, 117, 114, 108, 34, 32, 58, 32, 34, 47, 97, 112, 112, 46, 50, 34, 44, 10, 32, 32, 34, 109, 101, 116, 104, 111, 100, 34, 32, 58, 32, 34, 71, 69, 84, 34, 44, 10, 32, 32, 34, 104, 101, 97, 100, 101, 114, 115, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 34, 88, 45, 70, 111, 114, 119, 97, 114, 100, 101, 100, 45, 80, 114, 111, 116, 111, 34, 32, 58, 32, 123, 10, 32, 32, 32, 32, 32, 32, 34, 109, 97, 116, 99, 104, 101, 115, 34, 32, 58, 32, 34, 104, 116, 116, 112, 115, 34, 10, 32, 32, 32, 32, 125, 10, 32, 32, 125, 10, 125]
[32m- Routes HTTPS protocol to HTTPS origins[0m
08:57:33.434 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:33.435 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:33.435 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:33.435 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [39379]
Styx https port was: [43113]
08:57:33.441 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:33.444 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:33.444 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:33.444 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:33.444 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mHeadersSpec:[0m
08:57:33.454 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:33.456 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:57:33.456 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:33.457 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:33.457 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@12e12ac9
08:57:33.458 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:33.462 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:33.463 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:33.463 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:33.463 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:33.465 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:33.465 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:33.468 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:42497
08:57:33.473 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:33.474 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:40733
08:57:33.478 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 13ms
Styx http port is: [42497]
Styx https port is: [-1]
08:57:33.479 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-2, path=/headers, origins=[app-2:generic-app-01:localhost:43795], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@664212ab, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2693c618, com.hotels.styx.admin.dashboard.DashboardDataSupplier@3443e476, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7ccfdaef]
08:57:33.480 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:33.480 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:33.481 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-2:generic-app-01
08:57:33.481 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:33.481 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:33.481 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/headers current routes=[/headers]
08:57:33.482 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-2, path=/headers, origins=[app-2:generic-app-01:localhost:43795], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:57:33.483 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/badheaders, origins=[app-1:NettyOrigin:localhost:33171], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@664212ab, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2693c618, com.hotels.styx.admin.dashboard.DashboardDataSupplier@3443e476, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7ccfdaef, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7f287b98]
08:57:33.484 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:33.484 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:33.484 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:NettyOrigin
08:57:33.485 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:33.485 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:33.485 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/badheaders current routes=[/badheaders, /headers]
08:57:33.486 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/badheaders, origins=[app-1:NettyOrigin:localhost:33171], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mHeaders handling[0m
[32m- should pass through most http headers to the backend[0m
[32m- should not add a default User-Agent if there isn't one in the request[0m
[32m  setting host header[0m
[32m  - it should set the host if missing[0m
[32m  - should use host and port from an absolute URI to override the Host header[0m
[32m  setting to X-Forwarded-For header[0m
[32m  - should add the client IP to X-Forwarded-For[0m
[32m  - should append the client IP to X-Forwarded-For[0m
[32m  setting VIA header[0m
[32m  - should add itself to the Via request header for an HTTP/1.1 request[0m
[32m  - should append itself to the Via request header for an HTTP/1.1 request[0m
[32m  - should add itself to the Via response heaver[0m
[32m  - should append itself to the Via response header[0m
[32m  hop by hop headers[0m
[32m  - should remove hop by hop headers, apart from Transfer-Encoding, from request[0m
[32m  - should removes hop by hop headers from response.[0m
[32m  - should remove all fields from request indicated by Connection header value[0m
[32m  - should remove all fields from response indicated by Connection header value[0m
[32m  bad headers content[0m
08:57:34.016 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/headers, headers=[Host=localhost:42497, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=c392bf15-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=c392bf15-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.client.BadHttpResponseException exceptionMessage="Bad HTTP Response received from origin. origin=app-2:generic-app-01:localhost:43795."
08:57:34.017 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=c392bf15-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app-2:generic-app-01:localhost:43795., state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=/headers, headers=[Host=localhost:42497], id=c392bf15-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:57:34.022 [Proxy-Worker-4-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="502 Bad Gateway", exception="com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app-2:generic-app-01:localhost:43795., cause="com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app-2:generic-app-01:localhost:43795.", cause="java.lang.IllegalArgumentException: Duplicate Content-Length found. [50, 60]""
[32m  - should return HTTP BAD_GATEWAY Bad Gateway if origin returns multiple differing content-length headers.[0m
08:57:34.050 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/badheaders, headers=[Host=localhost:42497, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=c397ef36-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=c397ef36-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.client.BadHttpResponseException exceptionMessage="Bad HTTP Response received from origin. origin=app-1:NettyOrigin:localhost:33171."
08:57:34.051 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=c397ef36-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app-1:NettyOrigin:localhost:33171., state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=/badheaders, headers=[Host=localhost:42497], id=c397ef36-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:57:34.070 [Proxy-Worker-5-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="502 Bad Gateway", exception="com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app-1:NettyOrigin:localhost:33171., cause="java.lang.NumberFormatException: For input string: "50, 60"""
[32m  - should return HTTP BAD_GATEWAY Bad Gateway if origin returns multiple differing content-length values.[0m
08:57:34.095 [Styx-Client-Worker-0-Thread] ERROR c.h.s.c.StyxBackendServiceClient - Error Handling request=HttpRequest{version=HTTP/1.1, method=GET, uri=/badheaders, headers=[Host=localhost:42497, Via=1.1 styx, X-Forwarded-For=127.0.0.1, X-Styx-Request-Id=c39e7ee7-cc59-11e8-9327-0242ac1147ce, X-Forwarded-Proto=http], id=c39e7ee7-cc59-11e8-9327-0242ac1147ce} exceptionClass=com.hotels.styx.client.BadHttpResponseException exceptionMessage="Bad HTTP Response received from origin. origin=app-1:NettyOrigin:localhost:33171."
08:57:34.096 [Styx-Client-Worker-0-Thread] ERROR c.h.s.s.n.c.HttpPipelineHandler - message='Error proxying request', requestId=c39e7ee7-cc59-11e8-9327-0242ac1147ce cause=com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app-1:NettyOrigin:localhost:33171., state=WAITING_FOR_RESPONSE, request=HttpRequest{version=HTTP/1.1, method=GET, uri=/badheaders, headers=[Host=localhost:42497], id=c39e7ee7-cc59-11e8-9327-0242ac1147ce}, ongoingResponse=null, prematureRequest=null
08:57:34.101 [Proxy-Worker-6-Thread] ERROR c.h.s.p.HttpErrorStatusCauseLogger - Failure status="502 Bad Gateway", exception="com.hotels.styx.client.BadHttpResponseException: Bad HTTP Response received from origin. origin=app-1:NettyOrigin:localhost:33171., cause="java.lang.NumberFormatException: For input string: "50, 50"""
[32m  - Returns HTTP BAD_GATEWAY Bad Gateway if origin returns multiple identical content-length values.[0m
[32m  - should remove Content-Length from response when both Content-Length and Transfer-Encoding: chunked headers are returned by the origin[0m
[32m  handling cookies[0m
08:57:34.152 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=app-2, path=/headers, origins=[app-2:generic-app-01:localhost:43795], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}, BackendService{id=app-1, path=/badheaders, origins=[app-1:NettyOrigin:localhost:33171], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@664212ab, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2693c618, com.hotels.styx.admin.dashboard.DashboardDataSupplier@3443e476, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7ccfdaef, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7f287b98, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1c57f6b2]
08:57:34.153 [ScalaTest-main-running-HeadersSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=app-2:generic-app-01
08:57:34.155 [ScalaTest-main-running-HeadersSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=app-1:NettyOrigin
08:57:34.156 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=app-2, path=/headers, origins=[app-2:generic-app-01:localhost:43795], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}, BackendService{id=app-1, path=/badheaders, origins=[app-1:NettyOrigin:localhost:33171], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:57:34.157 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-2, path=/quotedCookies, origins=[app-2:generic-app-01:localhost:43795], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@664212ab, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2693c618, com.hotels.styx.admin.dashboard.DashboardDataSupplier@3443e476, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7ccfdaef, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7f287b98, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1c57f6b2, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4b515eab]
08:57:34.157 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:34.157 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:34.158 [ScalaTest-main-running-HeadersSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-2:generic-app-01
08:57:34.158 [ScalaTest-main-running-HeadersSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:34.159 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:34.159 [ScalaTest-main-running-HeadersSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/quotedCookies current routes=[/quotedCookies]
08:57:34.159 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-2, path=/quotedCookies, origins=[app-2:generic-app-01:localhost:43795], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:57:34.161 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/badheaders, origins=[app-1:NettyOrigin:localhost:33171], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@664212ab, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2693c618, com.hotels.styx.admin.dashboard.DashboardDataSupplier@3443e476, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7ccfdaef, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7f287b98, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1c57f6b2, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4b515eab, com.hotels.styx.admin.dashboard.DashboardData$Downstream@574059d5]
08:57:34.162 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:34.162 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:34.162 [ScalaTest-main-running-HeadersSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:NettyOrigin
08:57:34.163 [ScalaTest-main-running-HeadersSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:34.163 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:34.163 [ScalaTest-main-running-HeadersSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/badheaders current routes=[/quotedCookies, /badheaders]
08:57:34.164 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/badheaders, origins=[app-1:NettyOrigin:localhost:33171], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32m  - should leave request and response quoted cookie values[0m
08:57:34.231 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[], removed=[BackendService{id=app-2, path=/quotedCookies, origins=[app-2:generic-app-01:localhost:43795], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}, BackendService{id=app-1, path=/badheaders, origins=[app-1:NettyOrigin:localhost:33171], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@664212ab, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2693c618, com.hotels.styx.admin.dashboard.DashboardDataSupplier@3443e476, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7ccfdaef, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7f287b98, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1c57f6b2, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4b515eab, com.hotels.styx.admin.dashboard.DashboardData$Downstream@574059d5, com.hotels.styx.admin.dashboard.DashboardData$Downstream@307e4c44]
08:57:34.234 [ScalaTest-main-running-HeadersSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=app-2:generic-app-01
08:57:34.235 [ScalaTest-main-running-HeadersSpec] INFO  c.h.styx.client.OriginsInventory - Existing origin has been removed. Origin=app-1:NettyOrigin
08:57:34.235 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[BackendService{id=app-2, path=/quotedCookies, origins=[app-2:generic-app-01:localhost:43795], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}, BackendService{id=app-1, path=/badheaders, origins=[app-1:NettyOrigin:localhost:33171], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], updated=[]}
08:57:34.237 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-2, path=/cookies, origins=[app-2:generic-app-01:localhost:43795], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@664212ab, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2693c618, com.hotels.styx.admin.dashboard.DashboardDataSupplier@3443e476, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7ccfdaef, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7f287b98, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1c57f6b2, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4b515eab, com.hotels.styx.admin.dashboard.DashboardData$Downstream@574059d5, com.hotels.styx.admin.dashboard.DashboardData$Downstream@307e4c44, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2a8a3ada]
08:57:34.237 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:34.238 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:34.238 [ScalaTest-main-running-HeadersSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-2:generic-app-01
08:57:34.239 [ScalaTest-main-running-HeadersSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:34.239 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:34.239 [ScalaTest-main-running-HeadersSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/cookies current routes=[/cookies]
08:57:34.239 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-2, path=/cookies, origins=[app-2:generic-app-01:localhost:43795], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
08:57:34.242 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/badheaders, origins=[app-1:NettyOrigin:localhost:33171], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@664212ab, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2693c618, com.hotels.styx.admin.dashboard.DashboardDataSupplier@3443e476, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7ccfdaef, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7f287b98, com.hotels.styx.admin.dashboard.DashboardData$Downstream@1c57f6b2, com.hotels.styx.admin.dashboard.DashboardData$Downstream@4b515eab, com.hotels.styx.admin.dashboard.DashboardData$Downstream@574059d5, com.hotels.styx.admin.dashboard.DashboardData$Downstream@307e4c44, com.hotels.styx.admin.dashboard.DashboardData$Downstream@2a8a3ada, com.hotels.styx.admin.dashboard.DashboardData$Downstream@7412a438]
08:57:34.242 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:34.242 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:34.243 [ScalaTest-main-running-HeadersSpec] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:NettyOrigin
08:57:34.243 [ScalaTest-main-running-HeadersSpec] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:34.243 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:34.243 [ScalaTest-main-running-HeadersSpec] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/badheaders current routes=[/badheaders, /cookies]
08:57:34.244 [ScalaTest-main-running-HeadersSpec] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/badheaders, origins=[app-1:NettyOrigin:localhost:33171], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32m  - should handle http only cookies[0m
08:57:34.382 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:34.383 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
Styx http port was: [42497]
Styx https port was: [-1]
08:57:34.384 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:34.384 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:34.385 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:34.386 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:34.386 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[32mPluginAdminInterfaceSpec:[0m
08:57:34.395 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.startup.CoreMetrics - Could not acquire build number from release version: Version{releaseTag=STYX.0.9-SNAPSHOT}
08:57:34.396 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin plugx instrumented
08:57:34.396 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin plugy instrumented
08:57:34.396 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin plugz instrumented
08:57:34.397 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.plugin.InstrumentedPlugin - Plugin plugw instrumented
08:57:34.397 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Proxy
08:57:34.397 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:34.398 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:34.398 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.admin.AdminServerBuilder - event bus that will be used is com.google.common.eventbus.AsyncEventBus@5b202ff
08:57:34.399 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.a.handlers.VersionTextHandler - Could not load file=./styx-version.txt
08:57:34.402 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[], removed=[], updated=[]}
08:57:34.405 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.netty.NettyServerBuilderSpec - connectors=[HttpConnectorConfig{port=0}] name=Admin
08:57:34.406 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:34.406 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.s.n.e.PlatformAwareServerEventLoopFactory - Epoll is available so using the native socket transport.
08:57:34.407 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Starting styx 
                                                                                                                     
                                                                                                                     
                                                                                                                     
                                                                                                                     
  ,1  L.                                                                                                             
   @   0     8@@@@@@8                                                                                                
    8   @ @@@@@@@@@@@@@@                                                                                             
     G   @@@@@@@@@@@@@@@@@                                                                                           
     C.   @@@@@@@@@@@@.   :                                                                                          
      8   0@@@@@@@@@  :8   C                                                                                         
      ,@   8@@@@@@@   @@@ fi,    @@@@@@@@@@@@@@@@ .@@@@@@@@@@@@@@@@G  @@@@      @@@@    @@@@      @@@@               
      ,@8   @@@@@@     .@. @,    @@@t                    8@@@          t@@@8  8@@@L      f@@@8  8@@@8                
      ,@@C   @@@@@ 080G   88     @@@t                    8@@@            @@@@@@@@          @@@@@@@@                  
     1@@@@    @@@;  8@@    tC    @@@@@@@@@@@@@@@@:       8@@@             :@@@@;            ;@@@@1                   
    @@@@@@@@@@@@@@  8C8     0     ::::::::::::@@@@       8@@@              @@@@            .@@@@@@;                  
    @@@@@@@@@@@@@@@  @ 1,  @                  @@@@       8@@@              @@@@           @@@@..@@@@                 
    @@@@@@@@@@@C@@@@@@      G    @@@@@@@@@@@@@@@@@       8@@@              @@@@         f@@@8    8@@@C               
     @@@@@@@@@   @@@@@@@@@@      @@@@@@@@@@@@@@@@        8@@@              @@@@        @@@@        @@@@              
      8@@@@@@@    @@@@@@@@8                                                                                          
        @@@@@@@   8@@@@@@8                                                                                           
 @@@@@@@@@@@@@@@   8@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
 @@@@@@@@@@@@@@@8   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
                ,t   8                                                                                               
                 8   .f                                                                                              
                  08@@                                                                                               
                                                                                                                     
                                                                                                                     
08:57:34.408 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:34.409 [Proxy-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.proxy.ProxyConnectorFactory$ProxyConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:39733
08:57:34.416 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - starting services
08:57:34.419 [Admin-Boss-0-Thread] INFO  c.h.styx.server.netty.NettyServer - server connector class com.hotels.styx.server.netty.WebServerConnectorFactory$WebServerConnector bound successfully on port 0 socket port /0:0:0:0:0:0:0:0%0:42659
08:57:34.419 [ScalaTest-main-running-DiscoverySuite] INFO  com.hotels.styx.StyxServer - Started styx server in 12ms
Styx http port is: [39733]
Styx https port is: [-1]
08:57:34.421 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.e.s.spi.AbstractRegistry - notifying about services=Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:42113], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]} to listeners=[com.hotels.styx.proxy.BackendServicesRouter@671d03bb, com.hotels.styx.admin.dashboard.DashboardData$Downstream@6babffb5, com.hotels.styx.admin.dashboard.DashboardDataSupplier@2173a742, com.hotels.styx.admin.dashboard.DashboardData$Downstream@706ceca6]
08:57:34.421 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:34.421 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.c.n.e.PlatformAwareClientEventLoopGroupFactory - Epoll is available so using the native socket transport.
08:57:34.422 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.client.OriginsInventory - New origin added and activated. Origin=app-1:generic-app-01
08:57:34.423 [ScalaTest-main-running-DiscoverySuite] WARN  c.h.s.p.BackendServiceClientFactory - No configured retry policy found in AggregatedConfiguration{styxConfig={}, configuration={}}. Using RetryNTimes{delay=0, maxAttempts=1}
08:57:34.423 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.p.BackendServiceClientFactory - originRestrictionCookie specified as originRestrictionCookie - origin restriction will apply when this cookie is sent
08:57:34.423 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.proxy.BackendServicesRouter - added path=/ current routes=[/]
08:57:34.424 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.s.a.d.DashboardDataSupplier - received new services changes set Changes{added=[BackendService{id=app-1, path=/, origins=[app-1:generic-app-01:localhost:42113], connectionPoolSettings=ConnectionPoolSettings{maxConnectionsPerHost=25, maxPendingConnectionsPerHost=25, connectTimeoutMillis=2000, socketTimeoutMillis=11000, pendingConnectionTimeoutMillis=2000}, healthCheckConfig=null, stickySessionConfig=StickySessionConfig{enabled=false, timeoutSeconds=43200}, rewrites=[], tlsSettings=null}], removed=[], updated=[]}
[32mstyx admin server[0m
[32m- Exposes plugin admin interface under /plugins/<name> endpoint[0m
[32m- Joins plugin admin path with a path separator character, if one is missing[0m
[32m- Represents link to plugins index on admin server index page[0m
[32m- Represents links to plugin indexes on plugins index page[0m
[32m- Represents links to plugin endpoints on admin server plugin index pages[0m
[32m- Plugins without any admin features should display message instead of index[0m
Styx http port was: [39733]
Styx https port was: [-1]
08:57:34.574 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:34.577 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:34.577 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopping server
08:57:34.578 [ScalaTest-main-running-DiscoverySuite] INFO  c.h.styx.server.netty.NettyServer - stopped
08:57:34.578 [ScalaTest-main-running-DiscoverySuite] WARN  com.hotels.styx.StyxServer - Stopped
[36mRun completed in 4 minutes, 2 seconds.[0m
[36mTotal number of tests run: 160[0m
[36mSuites: completed 64, aborted 0[0m
[36mTests: succeeded 160, failed 0, canceled 0, ignored 6, pending 0[0m
[32mAll tests passed.[0m
[INFO] 
[INFO] --- jacoco-maven-plugin:0.7.5.201505241946:report (report) @ styx-e2e-suite ---
[INFO] Skipping JaCoCo execution because property jacoco.skip is set.
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ styx-e2e-suite ---
[WARNING] JAR will be empty - no content was marked for inclusion!
[INFO] 
[INFO] --- maven-failsafe-plugin:2.13:integration-test (default) @ styx-e2e-suite ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-failsafe-plugin:2.13:integration-test (failsafe-integration-tests) @ styx-e2e-suite ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-failsafe-plugin:2.13:verify (default) @ styx-e2e-suite ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- jacoco-maven-plugin:0.7.5.201505241946:check (check) @ styx-e2e-suite ---
[INFO] Skipping JaCoCo execution because property jacoco.skip is set.
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ styx-e2e-suite ---
[INFO] Installing /root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/target/styx-e2e-suite-0.9-SNAPSHOT.jar to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-e2e-suite/0.9-SNAPSHOT/styx-e2e-suite-0.9-SNAPSHOT.jar
[INFO] Installing /root/workspace/mikkokar/styx/437148287/system-tests/e2e-suite/pom.xml to /root/./workspace/mikkokar/styx/437148287/.m2/com/hotels/styx/styx-e2e-suite/0.9-SNAPSHOT/styx-e2e-suite-0.9-SNAPSHOT.pom
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Styx ............................................... SUCCESS [  1.231 s]
[INFO] Styx - Bill of Materials ........................... SUCCESS [  0.022 s]
[INFO] Styx - Support ..................................... SUCCESS [  0.019 s]
[INFO] Styx - Support - Non-Styx Test Support ............. SUCCESS [  1.034 s]
[INFO] Styx - Components .................................. SUCCESS [  0.019 s]
[INFO] Styx - Components - Core Api ....................... SUCCESS [  3.934 s]
[INFO] Styx - Components - Common ......................... SUCCESS [  0.192 s]
[INFO] Styx - Components - Styx API Test Support .......... SUCCESS [  0.069 s]
[INFO] Styx - Components - Client ......................... SUCCESS [ 15.230 s]
[INFO] Styx - Components - Server ......................... SUCCESS [  3.389 s]
[INFO] Styx - Components - Proxy .......................... SUCCESS [  5.661 s]
[INFO] Styx - Support - Test API .......................... SUCCESS [  0.076 s]
[INFO] Styx - System Tests ................................ SUCCESS [  0.022 s]
[INFO] Styx - System Tests - Test Support ................. SUCCESS [  0.949 s]
[INFO] Styx - Origins Starter Application ................. SUCCESS [  0.079 s]
[INFO] Styx - System Tests - Test Plugin - Dependencies ... SUCCESS [  0.049 s]
[INFO] Styx - System Tests - Test Plugin .................. SUCCESS [  0.057 s]
[INFO] Styx - System Tests - Backend Provider ............. SUCCESS [  0.044 s]
[INFO] Styx - System Tests - End To End Tests ............. SUCCESS [04:06 min]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 04:38 min
[INFO] Finished at: 2018-10-10T08:57:35+02:00
[INFO] Final Memory: 63M/916M
[INFO] ------------------------------------------------------------------------
