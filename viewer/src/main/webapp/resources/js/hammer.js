function Hammer(h,d,L){var s,t;function z(a){a=a||window.event;if(E){for(var b=[],c=0<a.touches.length?a.touches:a.changedTouches,e=0,d=c.length;e<d;e++)a=c[e],b.push({x:a.pageX,y:a.pageY});return b}b=document;c=b.body;return[{x:a.pageX||a.clientX+(b&&b.scrollLeft||c&&c.scrollLeft||0)-(b&&b.clientLeft||c&&b.clientLeft||0),y:a.pageY||a.clientY+(b&&b.scrollTop||c&&c.scrollTop||0)-(b&&b.clientTop||c&&b.clientTop||0)}]}function A(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI}function F(a,b){if(2== a.length&&2==b.length){var c,e;c=a[0].x-a[1].x;e=a[0].y-a[1].y;var d=Math.sqrt(c*c+e*e);c=b[0].x-b[1].x;e=b[0].y-b[1].y;return Math.sqrt(c*c+e*e)/d}return 0}function G(a,b){if(2==a.length&&2==b.length){var c,d;c=a[0].x-a[1].x;d=a[0].y-a[1].y;var f=180*Math.atan2(d,c)/Math.PI;c=b[0].x-b[1].x;d=b[0].y-b[1].y;return 180*Math.atan2(d,c)/Math.PI-f}return 0}function i(a,b){b.touches=z(b.originalEvent);b.type=a;"[object Function]"==Object.prototype.toString.call(p["on"+a])&&p["on"+a].call(p,b)}function u(a){d.cancel_event&& (a=a||window.event,a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a.returnValue=!1,a.cancelBubble=!0))}function B(a){switch(a.type){case "mousedown":case "touchstart":c.start=z(a);x=(new Date).getTime();q=!0;H=a;var b=h.getBoundingClientRect();s=b.top+(window.pageYOffset||h.scrollTop||document.body.scrollTop)-(h.clientTop||document.body.clientTop||0);t=b.left+(window.pageXOffset||h.scrollLeft||document.body.scrollLeft)-(h.clientLeft||document.body.clientLeft||0);y=!0;v.hold(a);d.prevent_default&& u(a);break;case "mousemove":case "touchmove":if(!y)return!1;c.move=z(a);v.transform(a)||v.drag(a);break;case "mouseup":case "mouseout":case "touchcancel":case "touchend":if(!y||"transform"!=f&&a.touches&&0<a.touches.length)return!1;y=!1;b="drag"==f;v.swipe(a);b?i("dragend",{originalEvent:a,direction:n,distance:j,angle:l}):"transform"==f?i("transformend",{originalEvent:a,position:c.center,scale:F(c.start,c.move),rotation:G(c.start,c.move)}):v.tap(H);I=f;i("release",{originalEvent:a,gesture:f});c={}; q=!1;l=j=0;f=null}}function C(a,b,c){for(var b=b.split(" "),d=0,f=b.length;d<f;d++)a.addEventListener?a.addEventListener(b[d],c,!1):document.attachEvent&&a.attachEvent("on"+b[d],c)}var p=this;var o={prevent_default:!1,css_hacks:!0,cancel_event:!0,swipe:!0,swipe_time:200,swipe_min_distance:20,drag:!0,drag_vertical:!0,drag_horizontal:!0,drag_min_distance:20,transform:!0,scale_treshold:0.1,rotation_treshold:15,tap:!0,tap_double:!0,tap_max_interval:300,tap_max_distance:10,tap_double_distance:20,hold:!0, hold_timeout:500},r=d,m={};if(r){for(var k in o)m[k]=k in r?r[k]:o[k];d=m}else d=o;if(d.css_hacks){o=["webkit","moz","ms","o",""];r={userSelect:"none",touchCallout:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"};m="";for(k=0;k<o.length;k++)for(var J in r)m=J,o[k]&&(m=o[k]+m.substring(0,1).toUpperCase()+m.substring(1)),h.style[m]=r[J]}var j=0,l=0,n=0,c={},q=!1,f=null,I=null,x=null,w={x:0,y:0},D=null,K=null;t=s=void 0;var y=!1,H,E="ontouchstart"in window;this.option=function(a,b){b!=L&&(d[a]= b);return d[a]};this.getDirectionFromAngle=function(a){var a={down:45<=a&&135>a,left:135<=a||-135>=a,up:-45>a&&-135<a,right:-45<=a&&45>=a},b,c;for(c in a)if(a[c]){b=c;break}return b};var v={hold:function(a){d.hold&&(f="hold",clearTimeout(K),K=setTimeout(function(){"hold"==f&&i("hold",{originalEvent:a,position:c.start})},d.hold_timeout))},swipe:function(a){if(c.move){var b=c.move[0].x-c.start[0].x,g=c.move[0].y-c.start[0].y;j=Math.sqrt(b*b+g*g);var e=(new Date).getTime()-x;d.swipe&&(d.swipe_time>e&& j>d.swipe_min_distance)&&(l=A(c.start[0],c.move[0]),n=p.getDirectionFromAngle(l),f="swipe",i("swipe",{originalEvent:a,position:{x:c.move[0].x-t,y:c.move[0].y-s},direction:n,distance:j,distanceX:b,distanceY:g,angle:l}))}},drag:function(a){var b=c.move[0].x-c.start[0].x,g=c.move[0].y-c.start[0].y;j=Math.sqrt(b*b+g*g);if(d.drag&&j>d.drag_min_distance||"drag"==f){l=A(c.start[0],c.move[0]);n=p.getDirectionFromAngle(l);var e="up"==n||"down"==n;if(!((e&&!d.drag_vertical||!e&&!d.drag_horizontal)&&j>d.drag_min_distance)){var e= A(c.interim||c.start[0],c.move[0]),h=p.getDirectionFromAngle(e);c.interim=c.move[0];f="drag";b={originalEvent:a,position:{x:c.move[0].x-t,y:c.move[0].y-s},direction:n,distance:j,distanceX:b,distanceY:g,angle:l,interim_angle:e,interim_direction:h};q&&(i("dragstart",b),q=!1);i("drag",b);u(a)}}},transform:function(a){if(d.transform){if(2!=(a.touches?a.touches.length:1))return!1;var b=G(c.start,c.move),g=F(c.start,c.move);if("drag"!=f&&("transform"==f||Math.abs(1-g)>d.scale_treshold||Math.abs(b)>d.rotation_treshold))return f= "transform",c.center={x:(c.move[0].x+c.move[1].x)/2-t,y:(c.move[0].y+c.move[1].y)/2-s},b={originalEvent:a,position:c.center,scale:g,rotation:b},q&&(i("transformstart",b),q=!1),i("transform",b),u(a),!0}return!1},tap:function(a){var b=(new Date).getTime(),g=b-x;if(!d.hold||d.hold&&d.hold_timeout>g){if(w&&d.tap_double&&"tap"==I&&x-D<d.tap_max_interval)var g=Math.abs(w[0].x-c.start[0].x),e=Math.abs(w[0].y-c.start[0].y),g=w&&c.start&&Math.max(g,e)<d.tap_double_distance;else g=!1;g?(f="double_tap",D=null, i("doubletap",{originalEvent:a,position:c.start}),u(a)):(g=c.move?Math.abs(c.move[0].x-c.start[0].x):0,e=c.move?Math.abs(c.move[0].y-c.start[0].y):0,j=Math.max(g,e),j<d.tap_max_distance&&(f="tap",D=b,w=c.start,d.tap&&(i("tap",{originalEvent:a,position:c.start}),u(a))))}}};E?C(h,"touchstart touchmove touchend touchcancel",B):(C(h,"mouseup mousedown mousemove",B),C(h,"mouseout",function(a){var b;a:if(b=a.relatedTarget,!b&&(window.event&&window.event.toElement)&&(b=window.event.toElement),h===b)b=!0; else{if(b)for(b=b.parentNode;null!==b;){if(b===h){b=!0;break a}b=b.parentNode}b=!1}b||B(a)}))};